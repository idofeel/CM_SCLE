"use strict";const a33_0x3ccc=["fIrrGGXScale","baseMap","1hoshTC","395396HHVLGE","diffuseB","202noYwIo","diffuseG","gmViewProj","TEXTURE0","gt2EnvCos","pureColor","materialDiffuse","3074CsCxoT","gnFragmentTex","gf3LightDir","materialSpecular","1106122CompwI","getAttribLocation","emissiveG","specularR","237541kpbJbh","2WjIvGG","envCos","envGGXZp","TEXTURE_2D","#version 300 es\nprecision highp float;\nprecision highp int;\nprecision highp sampler2D;\n//--------------------------------------------------------------------------- \n#include <comm.glsli>\n//--------------------------------------------------------------------------- \nin  float3 vaPosition;\nin  float3 vaNormal;\nin  float2 vaUV;\nout float3 voPosInWorld;\nout float3 voNorInWorld;\nout float2 voUV;\n//--------------------------------------------------------------------------- \nuniform mat4 gmViewProj;\nuniform mat4 gmWorldMatrix;\nuniform mat4 gmWorldITMatrix;\n//--------------------------------------------------------------------------- \nvoid main()\n{\n    voPosInWorld = (gmWorldMatrix * vec4(vaPosition, 1.0)).xyz;\n    voNorInWorld = (gmWorldITMatrix * vec4(vaNormal, 0.0)).xyz;\n    voUV = vaUV;\n\n    gl_Position = gmViewProj * vec4(voPosInWorld, 1.0f);\n}\n//--------------------------------------------------------------------------- ","130764WIEiHK","trans","uniform4f","vaUV","gt2BaseMap","lutGGX","roughness","gmWorldITMatrix","gt2LutGGX","724811NzmqqO","fragmentTex","getUniformLocation","irrGGXScale","texSlicePos","uniformLocations","1628834dGdmMb","gfIrrGGXLodScale","bindTexture","gt2EnvGGXZp","ambientR","gf3Ambient","fIrrGGXLodScale","gt2EnvGGXZn","envGGXZn","5PkLfNJ","uniform1f","ambientG","gf4PureColor","type","7rWjqew","activeTexture","uniform1i","linear","emissiveB","ambientB","gf3Eye","gfSolidPass","diffuseR"],a33_0x3f9ef3=a33_0x4217,vsCode=(!function(t){for(var e=a33_0x4217;;)try{if(844750===parseInt(e(340))+parseInt(e(365))*-parseInt(e(315))+parseInt(e(334))+parseInt(e(304))*-parseInt(e(311))+-parseInt(e(319))*-parseInt(e(354))+-parseInt(e(366))*parseInt(e(320))+-parseInt(e(349))*parseInt(e(325)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(a33_0x3ccc),a33_0x3f9ef3(324)),psCode="#version 300 es\nprecision highp float;\nprecision highp int;\nprecision highp sampler2DArray;\n//--------------------------------------------------------------------------- \n#include <comm.glsli>\n#include <shading.glsli>\n#include <env.glsli>\n#include <microfacet.glsli>\n//--------------------------------------------------------------------------- \nin  float2 voUV;\nin  float3 voPosInWorld;\nin  float3 voNorInWorld;\nout float4 poColor;\n//--------------------------------------------------------------------------- \nuniform float3 gf3Eye;\nuniform float3 gf3LightDir;\n//--------------------------------------------------------------------------- \nuniform int       gnFragmentTex;\nuniform sampler2D gt2BaseMap;\nuniform vec4      gf4PureColor;\nuniform float     gfSolidPass;\n//--------------------------------------------------------------------------- \nuniform float gfIrrGGXScale;\nuniform float gfIrrGGXLodScale;\n//--------------------------------------------------------------------------- \nuniform sampler2D gt2LutGGX;\nuniform sampler2D gt2EnvCos;\nuniform sampler2D gt2EnvGGXZp;\nuniform sampler2D gt2EnvGGXZn;\n//--------------------------------------------------------------------------- \nuniform float4 gf4EmissiveAndAlpha;\nuniform float3 gf3Ambient;\nuniform float3 gf3Diffuse; \nuniform float4 gf4SpecularAndRoughness;\n//--------------------------------------------------------------------------- \n#include <forward.glsli>\n//--------------------------------------------------------------------------- \nvoid main()\n{\n    float fAlpha = gf4EmissiveAndAlpha.a;\n\n    if ((gfSolidPass > 0.0f && fAlpha < 1.0f) || (gfSolidPass <= 0.0f && fAlpha >= 1.0f))\n        discard;\n\n    if (gnFragmentTex == 0)\n    {\n        poColor = CleShading(gf4EmissiveAndAlpha, gf3Ambient, gf3Diffuse, gf4SpecularAndRoughness);\n    }\n    else if (gnFragmentTex == 1)\n    {\n        // Load map color\n        float3 vMapColor             = textureLod(gt2BaseMap, voUV, 0.0).rgb;\n        float4 vEmissiveAndAlpha     = float4(gf4EmissiveAndAlpha.rgb * vMapColor, gf4EmissiveAndAlpha.a);\n        float3 vAmbient              = gf3Ambient * vMapColor;\n        float3 vDiffuse              = gf3Diffuse * vMapColor;\n        float4 vSpecularAndRoughness = float4(gf4SpecularAndRoughness.rgb * vMapColor, gf4SpecularAndRoughness.a);\n\n        poColor = CleShading(vEmissiveAndAlpha, vAmbient, vDiffuse, vSpecularAndRoughness);\n    }\n    else\n    {\n        poColor = float4(gf4PureColor.rgb, fAlpha);\n    }\n\n    poColor.rgb = LinearToSRGB(poColor.rgb);\n    poColor.a   = fAlpha;\n}\n//--------------------------------------------------------------------------- ";function a33_0x4217(e,t){return e-=303,a33_0x3ccc[e]}function initPbrProgramInfo(e){var t=a33_0x3f9ef3,a=compileVertexShader(e,vsCode),n=compileFragmentShader(e,psCode),i=link(e,[a,n]);return release(a),release(n),{program:i,attribLocations:{vertexPosition:e[t(316)](i,"vaPosition"),vertexVector:e[t(316)](i,"vaNormal"),vertexUV:e.getAttribLocation(i,t(328))},uniformLocations:{viewProjMatrix:e[t(336)](i,t(306)),worldMatrix:e.getUniformLocation(i,"gmWorldMatrix"),worldITMatrix:e[t(336)](i,t(332)),eyeLocation:e.getUniformLocation(i,t(360)),lightDir:e[t(336)](i,t(313)),fragmentTex:e[t(336)](i,t(312)),materialDiffuse:e[t(336)](i,"gf3Diffuse"),materialAmbient:e[t(336)](i,t(345)),materialSpecular:e.getUniformLocation(i,"gf4SpecularAndRoughness"),materialEmissive:e[t(336)](i,"gf4EmissiveAndAlpha"),baseMap:e[t(336)](i,t(329)),pureColor:e.getUniformLocation(i,t(352)),solidPass:e[t(336)](i,t(361)),irrGGXScale:e.getUniformLocation(i,"gfIrrGGXScale"),irrGGXLodScale:e[t(336)](i,t(341)),lutGGX:e[t(336)](i,t(333)),envCos:e.getUniformLocation(i,t(308)),envGGXZp:e.getUniformLocation(i,t(343)),envGGXZn:e[t(336)](i,t(347))}}}function setPbrProgramMaterial(e,t,a,n){var i=a33_0x3f9ef3;e.uniform3f(t[i(339)][i(310)],a[i(357)][i(362)],a.linear[i(305)],a.linear[i(303)]),e.uniform3f(t.uniformLocations.materialAmbient,a[i(357)][i(344)],a[i(357)][i(351)],a.linear[i(359)]),e.uniform4f(t[i(339)][i(314)],a[i(357)][i(318)],a[i(357)].specularG,a[i(357)].specularB,a[i(357)][i(331)]),e[i(327)](t[i(339)].materialEmissive,a[i(357)].emissiveR,a[i(357)][i(317)],a[i(357)][i(358)],a.alpha*n),a[i(353)]==P3D_MATERIAL_TYPE_MESH_COLOR?e[i(356)](t[i(339)][i(335)],0):a[i(353)]==P3D_MATERIAL_TYPE_MESH_TEXTURE?a[i(338)]instanceof WebGLTexture?(e.uniform1i(t.uniformLocations[i(335)],1),e[i(356)](t.uniformLocations[i(364)],4),e.activeTexture(e[i(307)]+4),e[i(342)](e.TEXTURE_2D,a[i(338)])):e[i(356)](t[i(339)][i(335)],0):(e[i(356)](t.uniformLocations[i(335)],2),e[i(350)](t.uniformLocations[i(326)],n),e[i(327)](t.uniformLocations[i(309)],a.r,a.g,a.b,n))}function setPbrProgramGGX(e,t,a,n){var i=a33_0x3f9ef3;e[i(356)](t[i(339)][i(330)],0),e[i(355)](e[i(307)]),e.bindTexture(e[i(323)],a),e[i(350)](t[i(339)][i(337)],n[i(363)]),e[i(350)](t[i(339)].irrGGXLodScale,n[i(346)]),e[i(356)](t[i(339)][i(321)],1),e[i(355)](e.TEXTURE0+1),e.bindTexture(e.TEXTURE_2D,n.convCos),e[i(356)](t.uniformLocations[i(322)],2),e[i(355)](e[i(307)]+2),e[i(342)](e[i(323)],n.convGGX.zp),e[i(356)](t[i(339)][i(348)],3),e[i(355)](e[i(307)]+3),e[i(342)](e[i(323)],n.convGGX.zn)}const a30_0x2fed=["1llZllv","2PzsbBm","292792BrAoUr","129231aqtFKj","215219PkrysY","createTexture2D","RGBA8","RGBA16F","uMipLevels","convGGX","2QZXUjT","RG32F","318601NaliKs","6019GwuyhN","length","fillMipImageTexture","1MExcBf","1GqlEft","114459OqjLmb","155455rAKWqc","fillRawImageTexture"];function createEnv(e){return{context:e,texture:null,convCos:null,convGGX:null,fIrrGGXScale:1.2,fIrrGGXLodScale:1}}function createConvGGX(e,t,a){return{zp:e,zn:t,uMipLevels:a}}function loadLutGGXFromRawUrl(a,e,n){const i=a30_0x2d7b,r=g_texturer[i(276)](a,a.RGBA8,1,1,!0);return syncBufferFromUrl(e,function(e){var t=i;g_texturer[t(270)](a,e,a[t(282)],1024,512,r,0),n&&n()}),r}function a30_0x2d7b(e,t){return e-=264,a30_0x2fed[e]}function loadConvCosFromRawUrl(a,e,n){const i=a30_0x2d7b,r=g_texturer.createTexture2D(a,a[i(277)],1,1,!0);return syncBufferFromUrl(e,function(e){var t=i;g_texturer[t(270)](a,e,a[t(278)],1024,512,r,0),n&&n()}),r}function loadConvGGXFromRawUrl(n,e,t,i){const r=a30_0x2d7b,s=g_texturer[r(276)](n,n[r(277)],1,1,!0),o=g_texturer[r(276)](n,n[r(277)],1,1,!0);return syncArraybufferFromUrl(e,function(e){const a=r;g_texturer[a(265)](n,e,n[a(278)],1024,1024,s);syncArraybufferFromUrl(t,function(e){var t=a;g_texturer[t(265)](n,e,n.RGBA16F,1024,1024,o),i&&i()})}),createConvGGX(s,o,e[r(264)])}function loadPbrEnv(e,t,a,n,i,r){var s=a30_0x2d7b,o=createEnv(e),l=new Array(a[s(264)]),_=new Array(n[s(264)]);for(let e=0;e<l[s(264)];++e)l[e]=t+a[e],_[e]=t+n[e];return o.convCos=loadConvCosFromRawUrl(e,t+i,r),o[s(280)]=loadConvGGXFromRawUrl(e,l,_,r),o.fIrrGGXLodScale=o[s(280)][s(279)]-1,o}!function(t){for(var e=a30_0x2d7b;;)try{if(207866===parseInt(e(283))*-parseInt(e(266))-parseInt(e(284))+parseInt(e(272))*parseInt(e(274))+parseInt(e(273))+-parseInt(e(268))*parseInt(e(271))+-parseInt(e(281))*-parseInt(e(269))+-parseInt(e(275))*parseInt(e(267)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(a30_0x2fed);const a67_0x2ca2=["clipPlaneMtlBlue","DefaultHlPmi","fromSysMaterial","13tKavjo","DefaultHlSurface","Black","Red","Yellow","Green","DarkBlue","Blue","929341zKLUQl","451391BtfwQp","clipPlaneMtlGreen","DefaultHlAnnot","9vZGmhp","Brightgreen","DarkYellow","CyanGreen","White","756088bltmJg","Grey","DefaultPmi","DarkGrey","Pink","CyanBlue","DefaultAnnot","13607lrIGqa","Default","14WARDbl","1HqRLjl","DarkRed","1104130tePirp","1UtpbGc","Ink2","Ink","87587JGjPbU","Violet","from","102698XkbFyh","fromMaterial","DefaultHlPart"],g_cmonlineMtlIDBase=(!function(t){for(var e=a67_0x454e;;)try{if(710805===parseInt(e(447))+-parseInt(e(418))*parseInt(e(439))+parseInt(e(442))*parseInt(e(412))+parseInt(e(417))+-parseInt(e(430))*-parseInt(e(424))+-parseInt(e(438))*parseInt(e(415))+parseInt(e(414))*-parseInt(e(421)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(a67_0x2ca2),2e5),P3D_MATERIAL_TYPE_MESH_COLOR=0,P3D_MATERIAL_TYPE_MESH_TEXTURE=1,P3D_MATERIAL_TYPE_LINE=2,P3D_MATERIAL_TYPE_PURE_COLOR=3;function a67_0x454e(e,t){return e-=409,a67_0x2ca2[e]}var g_newMaterialID=g_cmonlineMtlIDBase,g_materialData=new MeshMaterialData,g_lineMtlData=new LineMaterialData,g_pureColor=new PureColorData;function MeshMaterialData(){var e=a67_0x454e;this[e(413)]=MeshMaterial[e(429)](-1),this[e(433)]=MeshMaterial.fromSysMaterial(100),this.Brightgreen=MeshMaterial.fromSysMaterial(101),this[e(437)]=MeshMaterial.fromSysMaterial(102),this[e(434)]=MeshMaterial[e(429)](103),this[e(409)]=MeshMaterial[e(429)](104),this[e(445)]=MeshMaterial[e(429)](105),this[e(432)]=MeshMaterial[e(429)](106),this[e(446)]=MeshMaterial[e(429)](107),this[e(448)]=MeshMaterial[e(429)](108),this[e(416)]=MeshMaterial[e(429)](109),this[e(435)]=MeshMaterial.fromSysMaterial(110),this[e(436)]=MeshMaterial.fromSysMaterial(111),this.DarkYellow=MeshMaterial.fromSysMaterial(112),this[e(422)]=MeshMaterial[e(429)](113),this[e(410)]=MeshMaterial[e(429)](114),this[e(420)]=MeshMaterial[e(425)](float3[e(423)](.46,.46,.46),float3.from(.5,.5,.5),float3[e(423)](.5,.5,.5),float3[e(423)](.314,.314,.314),1,10),this[e(419)]=MeshMaterial[e(425)](float3[e(423)](.156863,.156863,.156863),float3[e(423)](.87451,.87451,.87451),float3[e(423)](.847059,.847059,.847059),float3[e(423)](1,1,1),1,10),this[e(426)]=MeshMaterial[e(429)](150),this[e(431)]=MeshMaterial[e(429)](151)}function PureColorData(){var e=a67_0x454e;this[e(446)]=PureColor.fromSysMaterial(303),this[e(441)]=PureColor[e(429)](310)}function LineMaterialData(){var e=a67_0x454e;this[e(433)]=LineMaterial[e(429)](200),this[e(443)]=LineMaterial[e(429)](201),this[e(410)]=LineMaterial[e(429)](202),this[e(444)]=LineMaterial[e(429)](203),this[e(448)]=LineMaterial.fromSysMaterial(204),this[e(450)]=LineMaterial[e(429)](205),this[e(428)]=LineMaterial[e(429)](210),this[e(449)]=LineMaterial[e(429)](211),this[e(411)]=LineMaterial.fromSysMaterial(212)}function PlaneMaterialData(){var e=a67_0x454e;this.clipPlaneMtlRed=PureColor[e(429)](300),this[e(440)]=PureColor.fromSysMaterial(301),this[e(427)]=PureColor[e(429)](302)}function ConvertColorToMaterial(e,t,a,n){return 1<(e=e<0?0:e)&&(e=1),1<(t=t<0?0:t)&&(t=1),1<(a=a<0?0:a)&&(a=1),1<(n=n<0?0:n)&&(n=1),MeshMaterial.fromColor(e,t,a,n)}var a20_0x202b=["fromCleCamera","fAspect","draw3D","eRotDir","flush","889337AzBlPy","eRotPos","914741oEvseL","166298wBkzqx","max","_onTick","setControl","zoomWithMouseWheel","560492TBYzpU","exportToCleCamera","227wneKxK","363674AcoigI","_fInterocularDistance","isCompleted","670578XXYXgJ","_fAspect","updateDesc","5780KkLfkU","tick","ePan","rotPos","desc","requestAnimationFrame"],g_camera=(!function(t){for(var e=a20_0x2fe0;;)try{if(799480===-parseInt(e(264))+parseInt(e(273))*-parseInt(e(266))+parseInt(e(267))+parseInt(e(256))+parseInt(e(270))+parseInt(e(258))+-parseInt(e(259)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(a20_0x202b),null),g_cameraController=null,g_cameraDesc=null,g_cameraTweener=null,g_fElapseTimeInSeconds=null,g_selfRotateHandle=null,g_selfRotateElapse=30,g_selfRotateDelta=float2.from(-1,0),g_isCameraAnimMode=!0;function shiftViewOnTick(t){var a=a20_0x2fe0;if(null==g_cameraTweener)g_render[a(261)]=null,g_fElapseTimeInSeconds=null;else{let e=0;null!=g_fElapseTimeInSeconds&&(e=t-g_fElapseTimeInSeconds,e=Math[a(260)](e,0),e*=.001),g_fElapseTimeInSeconds=t,0==CameraTweener.isCompleted(g_cameraTweener)&&(CameraTweener[a(274)](g_cameraTweener,e),Camera[a(272)](g_camera,g_cameraTweener[a(249)]),glRunTime.flush()),0==CameraTweener[a(269)](g_cameraTweener)?window[a(250)](function(e){shiftViewOnTick(e)}):g_cameraTweener=null}}function shiftViewAnim(e,t){var a=a20_0x2fe0;g_isCameraAnimMode?(g_cameraTweener=CameraTweener.make(g_camera.desc,e,t),g_fElapseTimeInSeconds=null,g_render[a(261)]=shiftViewOnTick):Camera[a(272)](g_camera,e),glRunTime[a(255)]()}function enableCameraAnimation(e){g_isCameraAnimMode=!!e}function selfRotateAnimRun(){var e=a20_0x2fe0;CameraController[e(276)](g_cameraController,g_camera,g_selfRotateDelta),glRunTime[e(255)](),g_selfRotateHandle=setTimeout("selfRotateAnimRun()",g_selfRotateElapse)}function selfRotateAnimStop(){null!=g_selfRotateHandle&&clearTimeout(g_selfRotateHandle),g_selfRotateHandle=null}function setCameraControlMode(e){var t=a20_0x2fe0;0==e?(selfRotateAnimStop(),CameraController[t(262)](g_cameraController,CameraController[t(257)])):1==e?(CameraController.lockUpAxis(g_cameraController,g_sceneConfig._upAxis),CameraController[t(262)](g_cameraController,CameraController[t(257)]),selfRotateAnimRun()):2==e?(selfRotateAnimStop(),CameraController[t(262)](g_cameraController,CameraController[t(275)])):3==e?(selfRotateAnimStop(),CameraController.setControl(g_cameraController,CameraController[t(254)])):4!=e&&5!=e||(selfRotateAnimStop(),CameraController[t(262)](g_cameraController,CameraController[t(254)]))}function getCameraCurView(){var e=a20_0x2fe0,t=new P3D_CAMERA;return Common[e(265)](t,g_camera.desc),t._fFOVY=g_camera[e(249)].fFOVInRadian,t[e(271)]=g_camera.desc.fAspect,t[e(268)]=0,t}function setCameraCurView(e){var t=a20_0x2fe0;return Common[t(251)](g_cameraDesc,e),g_cameraDesc[t(252)]=g_camera[t(249)][t(252)],Camera.updateDesc(g_camera,g_cameraDesc),glRunTime.draw3D(),!0}function setCameraRotate(e,t,a){var n=a20_0x2fe0,e=float2.from(-e,t);CameraController.rotate(g_cameraController,g_camera,CameraController.eRotPos,e),glRunTime[n(253)]()}function setCameraZoom(e){var t=a20_0x2fe0;CameraController[t(263)](g_cameraController,g_camera,e),glRunTime[t(253)]()}function a20_0x2fe0(e,t){return a20_0x202b[e-=249]}function setCameraSlide(e,t){var a=a20_0x2fe0,e=float2.from(-e,t);CameraController.pan(g_cameraController,g_camera,e),glRunTime[a(253)]()}const a62_0x3c52=["getObjectIndexById","splice","pcLightPower","pickByRay","isOnceLoad","getSubObjectsByTreeId","setObjectTransparent","_arrPartLODData","getObjectNameByID","_matLocal","m_BgColor","_arrTexID","fAspect","endLoadModel","getBackgroundColor","min","geomSurfaceIndex","pickModelByIDs","m_defFocus","setBoxShow","GetMaterialInfo","vecLightType","renderPixelMSAA","getPickUnit","PointNDCCenter","pickIndexs","WIDTH","setObjectMaterial","digitalWorldMat","pickMeasureMode","requestAnimationFrame","renderPixel","fromCleVec3","initOperationParams","move","setObjectOriWorldMatrix","GetAnimTransparent","getTreeNodeById","clearObjectSurfaceMaterial","setCaptureMode","cvtCMOnlineToWorld","mViewProjI","ray_nds_near","curObjectCenter","_uIsUV","copy","setObjectEnhancedDisplayById","_arrSubset","_MtlData","setObjectVisible","clearPmi","setSurfaceMaterial","mViewProj","assignDesc","wasmInit","1170406kuiNRZ","_strName","setObjectSurfaceMaterialById","setObjectSurfaceMaterial","_matWorld","getObjectVisible","pickObjectSurfaceByIndex","getObjectIdByIndex","getObjectOriWorldMatrix","getMaterialById","setObjectsPickedByIds","setSceneLightPosition","PARTSURFACEDATA","fromValues","231394ckVjLs","curRuntimeMode","curModelCenter","uninitBuffers","_uPickType","_arrObjectSet","uninit","ObjectMoveCenterEnd","updatePartData","objectRotateWorldFinish","_arrSurfaceMaterialIndex","clearBuffers","webglRect","RayPoint2","185uFJUoC","flush2D","projectionMatInverse","getTreeNodeSubObjectID","geomPointIndex","transformMat4","mapMaterialIDIndex","createUrlRgbaTexture","objectMoveWorldFinish","ObjectMovematrix","initSurfaceGLData","importMaterialData","identity","draw","setSceneLightOn","push","objectIndex","ray_world_near","getObjectBoxById","_uElapseTimeMillSec","GLObjectSet","msaaChangeed","DefaultHlPart","pick","max","initScene","src","getPickStatus","PARTLODDATA","fNear","vUp","uninitSection","initCamera","_arrSubNode","high","m_bgType","getObjectModelId","getBoundingClientRect","intersectRayScene","_nPrimitType","_fFOVY","cvtModelToScreen","captureGeomtry","digitalMultiplyMat","getObjectModelMatrix","Clear","ObjectOriginalCenter","pickModelTreeNode","Clone","ObjectStartmatrix","desc","defaultHlSurface","_eMtlType","eRotPos","_unit","getObjectSurfacesNum","create","vEye","m_fModelLength","mapObjectIDIndex","fSensRot","setSurfaceMaterialMode","366387kKBWHY","reset","m_modelBox","distance","dst","ray_nds_far","computeSafeMinDistance","multiply","doGetPickMeasureIndex","mapMeshIDIndex","GLSceneConfig","setSceneLightPower","isCaptureGeomtry","onceLoadScleModel","_uTreeNodeID","m_arrBgTexId","normalize","m_arrObjectTransparent","fromScaling","ray_clip_near","MMatrix","getObjectTransparent","setHighlightShow","getObjectMetialList","Copy","updateDesc","ObjectRotatematrix","addBackground","shiftView","add","setPickType","_uPartID","cvtWebGLPtToScreen","_nFillMode","resetObjectHighlightMaterial","uninitScene","fromCleCamera","objectMoveWorld","GetAnimMatrix","setObjectEnhancedDisplayByIndex","ClearCache","onload","log","1138269fLzKUY","recorderViewImage","setMultObjectVisible","curMoveVec","curRotateVec","m_arrObjectMatrix","getTreeNodeSubObjectIndex","isContainsGeom","clear","setHighlight","ray_world_far","doMeasureAction","ray_clip_far","setObjectSurfaceMaterialByIndex","getCanvasPosByModelPos","getPickObjectIndexs","surfaceIndex","pickPmi","clearCommon","ObjectStartFlag","draw2D","_uPartIndex","setObjectEnhancedDisplayByTreeId","61481UPysIi","ObjectMoveCenterStart","m_fOperateSensitivity","fFOVInRadian","_onTick","isDuringRectSel","getObjectCurWorldMatrix","VPMatrix","captureType","GLModelTreeNode","setObjectMaterialTextureBasis","cvtScreenPtToWebGL","GLPmiSet","length","captureUnit","m_bgIndex","cos","left","setObjectTransparentByIndex","_boxset","isObjectInRect","arrPickObjectIndexs","getPickedIndex","21lxcBtm","_uObjectIndex","top","getObjectWindowCenterByIndex","fromScalar","initMap","importScleModel","m_arrObjectVisiable","_SurfaceShape","updateScleModel","translate","_arrPartSet","resetObjectSurfaceHighlightMaterial","arrModelData","digitalLocalMat","lockUpAxis","uninitGLData","clearPickSurfaceIndex","cvtScreenToWorld","_ObjectBox","resetWindow","setObjectMatrixTranslate","normal","initSceneBox","_DefaultCamera","setSelectedShow","_Vertex","setViewport","DefaultHlSurface","draw3D","setBackgroundColor","pickNone","GLMatertalSet","_oPickUnit","addUsrBackground","width","render","PARTCURVEDATA","resetGLData","setFocusOnObject","setObjectModelMatrixPicked","_uPrimitType","_CurveShape","getObjectWorldCenterByIndex","m_defUpAxis","setObjectSurfaceMaterialIndex","_uMtlID","_arrVertex","home","uID","initRender","objectMoveWindow","getMaterialIndexById","defaultHlPart","make","getPickObjectIds","isShowImageBk","startScelModel","loadBasisData","RayPoint1","objectSetMoveWorld","setModelCenter","getObjectTreeIDByID","makeDesc","cvtWorldToCMOnline","setCaptureModeByMeasure","rotate","importPartData","pickModelByIndexs","objectRotateWorldStart","importObjectData","setObjectMatrixByIndex","pickModelByRect","initCanvasView","HEIGHT","getObjectParamsByID","pickObjectIndex","_arrMaterialSet","_vFocus","MVPMatrix","pickMultObjectByIndexs","_uRequestRender","264331ZxuUxp","setRectSelection","curPickUnit","setMutiSample","tcFormat","vAt","9WlCOLB","flush","m_defEyePos","userDefColor","getPickObjectIdByIndex","height","833YWWtHm","setObjectMeshMaterialUnitByPart","setObjectSurfaceHighlightMaterial","set","objectMoveWorldStart","_uObjectID","_SurfaceBoxes"];function a62_0x3b45(e,t){return e-=374,a62_0x3c52[e]}!function(t){for(var e=a62_0x3b45;;)try{if(676339===-parseInt(e(581))+parseInt(e(491))+parseInt(e(647))*-parseInt(e(670))+-parseInt(e(519))*-parseInt(e(429))+-parseInt(e(505))+-parseInt(e(624))+parseInt(e(417))*parseInt(e(423)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(a62_0x3c52);var g_GLData=null,g_GLObjectSet=null,g_GLPartSet=null,g_GLMaterialSet=null,g_GLAnnoSet=null,g_GLCameraSet=null,g_GLPmiSet=null,g_glprogram=null,g_webgl=null,g_buffers=null,g_webglControl=null,g_canvas=null,g_xmlTool=null,g_sceneConfig=null,g_sceneMeasure=null,g_sceneAnnotation=null,g_sceneSection=null,g_scenePmiManager=null,g_render=null,g_axisNvg=null,g_objectAxisNvg=null,g_sceneExploder=null,g_isInitRender=!1;const RUNTIME_MODE_NORMAL=-1,RUNTIME_MODE_ANNOTATION=0,RUNTIME_MODE_MEASURE=1,RUNTIME_MODE_SECTION=2,RUNTIME_MODE_PMI=3,RUNTIME_RENDER_STOP=0,RUNTIME_RENDER_GO=1,ANIM_FRAME_STEP=30,SCENE_DEFAULT_ROT_SENS=3;function RunTimePickUnit(){var e=a62_0x3b45;this[e(509)]=-2,this._oPickUnit=null,this[e(564)]=function(){this._uPickType=-2,this._oPickUnit=null}}function RunTimeRender(){const t=a62_0x3b45;this._uRequestRender=!1,this[t(538)]=0,this[t(651)]=null,this[t(564)]=function(){var e=t;this[e(416)]=!1,this[e(538)]=0}}function GLRunTime(){const g=a62_0x3b45;this[g(462)]=0,this[g(409)]=0,this.m_fModelLength=1,this[g(649)]=1,this[g(583)]=new Box3D,this[g(454)]=new Point3(0,0,0),this[g(425)]=new Point3(0,0,0),this[g(379)]=new Point3(0,0,0),this.ray_nds_near=vec3.create(),this[g(586)]=vec3[g(575)](),this.ray_clip_near=vec4[g(575)](),this[g(636)]=vec4[g(575)](),this.viewMatInverse=mat4.create(),this[g(521)]=mat4[g(575)](),this[g(601)]=mat4[g(575)](),this[g(654)]=mat4[g(575)](),this[g(414)]=mat4[g(575)](),this.inverseMVPMatrix=mat4[g(575)](),this[g(536)]=vec4.create(),this[g(634)]=vec4[g(575)](),this[g(394)]=new Point3(0,0,0),this[g(518)]=new Point3(0,0,0),this[g(565)]=new Point3(0,0,0),this[g(460)]=new Point3(0,0,0),this[g(648)]=new Point3(0,0,0),this.ObjectMoveCenterEnd=new Point3(0,0,0),this[g(528)]=mat4[g(575)](),this[g(607)]=mat4.create(),this[g(568)]=mat4[g(575)](),this[g(643)]=0,this[g(627)]=vec3.create(),this[g(628)]=vec3.create(),this.curModelCenter=new Point3(0,0,0),this[g(479)]=new Point3(0,0,0),this[g(461)]=new Array,this[g(517)]=new Rect2D(0,0,0,0),this[g(593)]=!0,this.captureType=CAPTURE_NONE,this.captureUnit=new GL_PICK_UNIT,this[g(684)]=mat4[g(575)](),this[g(464)]=mat4[g(575)](),this.digitalMultiplyMat=mat4[g(575)](),this[g(440)]=!1,this.curRuntimeMode=-1,this[g(419)]=new RunTimePickUnit,this[g(578)]=null,this.mapMeshIDIndex=null,this[g(525)]=null,this[g(385)]=function(){var e=g;g_isWebgl2?(null==g_buffers&&(g_buffers=new WebGL2Buffer(gl)),null==g_webgl&&(g_webgl=new WebGL2RenderTarget(gl))):(null==g_buffers&&(g_buffers=new WebGL1Buffer(gl)),null==g_webgl&&(g_webgl=new WebGL1(gl))),null==g_glprogram&&(g_glprogram=new GLProgram),null==g_canvas&&(g_canvas=new Canvas2D),null==g_webglControl&&(g_webglControl=new WebGLControl(gl)),null==g_sceneMeasure&&(g_sceneMeasure=new SceneMeasure),null==g_sceneAnnotation&&(g_sceneAnnotation=new SceneAnnotation),null==g_sceneSection&&(g_sceneSection=new SceneSection),null==g_scenePmiManager&&(g_scenePmiManager=new ScenePmiManager),null==g_render&&(g_render=new RunTimeRender),null==g_texBasisu&&(g_texBasisu=new TexturerBasisu(gl)).getWebglExtension(),null==g_sceneExploder&&(g_sceneExploder=new SceneExplode),null==g_camera&&(g_camera=Camera[e(389)](),g_cameraController=CameraController[e(389)](),g_cameraDesc=Camera[e(398)](),g_cameraController[e(579)]=SCENE_DEFAULT_ROT_SENS),this.initRuntimeParams(),this.initMap(),g_glprogram.initGLData(),g_webgl[e(544)](),g_buffers.initBuffers(),g_canvas[e(408)](this.WIDTH,this[e(409)]),g_isInitRender=!0},this.uninitRender=function(){var e=g;null!=g_sceneAnnotation&&g_sceneAnnotation[e(511)](),null!=g_sceneMeasure&&g_sceneMeasure.uninit(),null!=g_sceneSection&&g_sceneSection[e(550)](),null!=g_glprogram&&g_glprogram[e(686)](),null!=g_scenePmiManager&&g_scenePmiManager[e(511)](),null!=g_webgl&&g_webgl[e(616)](),null!=g_buffers&&g_buffers[e(508)](),this[e(642)](),g_sceneAnnotation=g_sceneMeasure=g_buffers=g_webgl=g_sceneSection=g_glprogram=null},this[g(632)]=function(){var e=g;null!=g_sceneAnnotation&&g_sceneAnnotation[e(511)](),null!=g_sceneMeasure&&g_sceneMeasure[e(511)](),null!=g_sceneSection&&g_sceneSection.clearSection(),null!=g_glprogram&&g_glprogram.clearGLData(),null!=g_scenePmiManager&&g_scenePmiManager[e(486)](),null!=g_webgl&&g_webgl.clearScene(),null!=g_buffers&&g_buffers[e(516)](),this[e(642)]()},this[g(642)]=function(){var e=g;null!=g_GLObjectSet&&g_GLObjectSet[e(564)](),null!=g_GLPartSet&&g_GLPartSet[e(564)](),null!=g_GLMaterialSet&&g_GLMaterialSet[e(564)](),null!=g_GLAnnoSet&&g_GLAnnoSet[e(564)](),null!=g_GLCameraSet&&g_GLCameraSet[e(564)](),this.clearMap(),g_sceneExploder=g_scenePmiManager=g_GLData=null,g_isInitRender=!1},this.clearMap=function(){var e=g;null!=this[e(578)]&&this[e(578)][e(437)](0,this[e(578)][e(660)]),null!=this[e(590)]&&this.mapMeshIDIndex[e(437)](0,this.mapMeshIDIndex[e(660)]),null!=this[e(525)]&&this[e(525)][e(437)](0,this.mapMaterialIDIndex[e(660)]),this.mapObjectIDIndex=null,this[e(590)]=null,this.mapMaterialIDIndex=null},this[g(582)]=function(){var e=g;this.initRuntimeParams(),g_glprogram[e(708)](),g_webgl.resetScene(),g_canvas.initCanvasView(this.WIDTH,this[e(409)])},this.initRuntimeParams=function(){var e=g;this[e(462)]=getContextWidth(gl),this[e(409)]=getContextHeight(gl),null==g_GLData&&(g_GLData=Cle2Data(),g_GLObjectSet=g_GLData[e(539)],g_GLMaterialSet=g_GLData[e(702)],g_GLAnnoSet=g_GLData.GLAnnotData,g_sceneConfig=g_GLData[e(591)],g_GLCameraSet=g_GLData.GLCamera,g_GLPmiSet=g_GLData[e(659)]),null==g_webglControl[e(596)]&&(g_webglControl[e(662)]=g_bgImageIndex,g_webglControl[e(596)]=new Array(g_bgImage.length),GetDefaultBgImg(g_webglControl[e(596)],g_bgImage[e(660)]))},this[g(675)]=function(){var t=g;this[t(578)]=new Array;for(let e=0;e<g_GLObjectSet[t(510)][t(660)];++e)this[t(578)][g_GLObjectSet[t(510)][e]._uObjectID]=e;this[t(525)]=new Array;for(let e=0;e<g_GLMaterialSet._arrMaterialSet[t(660)];++e)this[t(525)][g_GLMaterialSet[t(412)][e].uID]=e},this[g(551)]=function(){var e=g,t=web3dCanvas[e(556)]();this[e(462)]=t[e(705)],this[e(409)]=t[e(428)],1e-4<g_GLCameraSet._DefaultCamera[e(559)]?(this[e(565)].x=g_GLCameraSet[e(694)][e(413)].x,this[e(565)].y=g_GLCameraSet[e(694)][e(413)].y,this[e(565)].z=g_GLCameraSet[e(694)][e(413)].z,Common[e(617)](g_cameraDesc,g_GLCameraSet[e(694)]),g_cameraDesc[e(448)]=this.WIDTH/this[e(409)],Camera.updateDesc(g_camera,g_cameraDesc),Camera.setViewport(g_camera,this[e(462)],this[e(409)],web3dCanvas[e(664)],web3dCanvas[e(672)])):(getModelBoxCenter(this[e(583)],this[e(565)]),g_glprogram[e(396)](this[e(565)]),getModelDefEyePos(this.m_modelBox,this[e(425)],this[e(454)],this[e(379)]),Common[e(468)](g_cameraDesc[e(576)],this[e(425)]),Common[e(468)](g_cameraDesc[e(422)],this[e(454)]),Common[e(468)](g_cameraDesc[e(549)],this[e(379)]),g_cameraDesc[e(448)]=this[e(462)]/this.HEIGHT,t=float3[e(584)](g_cameraDesc.vEye,g_cameraDesc[e(422)]),g_cameraDesc[e(548)]=.02*t,g_cameraDesc.fFar=200*t,g_cameraDesc[e(650)]=45*Math.PI/180,Camera[e(606)](g_camera,g_cameraDesc),Camera[e(697)](g_camera,this[e(462)],this[e(409)],web3dCanvas.left,web3dCanvas[e(672)])),CameraController[e(685)](g_cameraController,g_sceneConfig._upAxis),CameraController.setControl(g_cameraController,CameraController[e(572)])},this[g(693)]=function(){var e=g;this[e(440)]?this[e(583)]=getModelBox(g_GLObjectSet,g_GLPartSet):this[e(583)]=getSliceScleBox(g_GLObjectSet,g_sceneData[e(683)])},this[g(469)]=function(){this.m_fModelLength=getModelBoxLength(this.m_modelBox)},this[g(424)]=function(){const a=g;g_isInitRender&&0==g_render._uRequestRender&&(window[a(466)](function(e){var t=a;null!=gl&&g_webgl.render(),null!=gl2d&&g_canvas[t(532)](),updateNvgCamera(g_camera),null!=g_render[t(651)]&&g_render[t(651)](e),g_render[t(416)]=!1}),g_render[a(416)]=!0)},this.flush2D=function(){const a=g;0==g_render[a(416)]&&(window[a(466)](function(e){var t=a;null!=gl2d&&g_canvas.draw(),null!=g_render[t(651)]&&g_render[t(651)](e),g_render._uRequestRender=!1}),g_render[a(416)]=!0)},this.draw3D=function(){var e=g;null!=gl&&g_webgl[e(706)]()},this[g(644)]=function(){null!=gl2d&&g_canvas.draw()},this[g(690)]=function(e,t){var a=g;this[a(462)]=e,this.HEIGHT=t,Camera.setViewport(g_camera,e,t,web3dCanvas[a(664)],web3dCanvas.top),g_webgl.initViewPort(),g_canvas[a(408)](this[a(462)],this[a(409)]),this[a(699)]()},this[g(470)]=function(e,t){var a=g,e=(getModelBoxCenter(this[a(583)],this[a(507)]),CalTranslatePoint(this[a(507)].x,this[a(507)].y,this.curModelCenter.z,g_camera.mViewProj,this[a(460)]),-e/this.WIDTH),t=-t/this[a(409)],e=(CalTranslatePoint(0,0,this[a(460)].z,g_camera.mViewProjI,this.ObjectMoveCenterStart),CalTranslatePoint(e,t,this[a(460)].z,g_camera[a(477)],this[a(512)]),this[a(507)].x=this[a(512)].x-this[a(648)].x,this.curModelCenter.y=this[a(512)].y-this.ObjectMoveCenterStart.y,this[a(507)].z=this.ObjectMoveCenterEnd.z-this[a(648)].z,g_glprogram.moveModelCenter(this[a(507)]),float3[a(389)]()),t=(float3[a(432)](e,this[a(507)].x,this[a(507)].y,this[a(507)].z),float3.add(null,g_camera[a(569)][a(576)],e)),e=float3[a(610)](null,g_camera[a(569)][a(422)],e);Camera.setViewParam(g_camera,t,e,null),this[a(424)]()},this[g(386)]=function(e,t,a){var n=g,i=g_glprogram[n(563)](e),e=g_GLObjectSet[n(510)][e]._uPartIndex,e=(getModelBoxCenter(g_GLPartSet._arrPartSet[e][n(443)][0][n(666)][n(689)],this[n(507)]),mat4[n(588)](this[n(414)],g_camera[n(488)],i),CalTranslatePoint(this[n(507)].x,this[n(507)].y,this[n(507)].z,this[n(414)],this[n(460)]),t/this.WIDTH),i=a/this[n(409)];CalTranslatePoint(0,0,this[n(460)].z,g_camera[n(477)],this[n(648)]),CalTranslatePoint(e,i,this[n(460)].z,g_camera.mViewProjI,this[n(512)]),mat4[n(531)](this[n(528)]),mat4[n(680)](this[n(528)],this.ObjectMovematrix,vec3[n(504)](this[n(512)].x-this[n(648)].x,this[n(512)].y-this[n(648)].y,this.ObjectMoveCenterEnd.z-this[n(648)].z)),g_glprogram[n(375)](this[n(528)]),this[n(424)]()},this[g(618)]=function(e,t,a,n){var i=g;vec3.set(this[i(627)],t,a,n),this[i(568)]=g_webglControl.m_arrObjectMatrix[e],mat4[i(680)](this[i(528)],IDENTITY_MATRIX,this[i(627)]),mat4.multiply(g_webglControl.m_arrObjectMatrix[e],this[i(528)],this[i(568)]),this[i(424)]()},this[g(433)]=function(e,t,a,n){var i=g;this[i(648)][i(432)](t,a,n),mat4[i(481)](this.ObjectStartmatrix,g_webglControl[i(629)][e]),this[i(643)]=1},this.objectMoveWorldUpdate=function(e,t,a,n){var i=g;0!=this.ObjectStartFlag&&(vec3[i(432)](this[i(627)],t-this.ObjectMoveCenterStart.x,a-this.ObjectMoveCenterStart.y,n-this[i(648)].z),mat4[i(680)](this[i(528)],IDENTITY_MATRIX,this[i(627)]),mat4[i(588)](g_webglControl.m_arrObjectMatrix[e],this[i(528)],this[i(568)]),this[i(424)]())},this[g(527)]=function(){var e=g;mat4[e(531)](this[e(568)]),this[e(643)]=0,this[e(520)]()},this[g(404)]=function(e){var t=g;mat4[t(481)](this[t(568)],g_webglControl[t(629)][e]),this[t(643)]=1},this.objectRotateWorldUpdate=function(e,t,a){var n=g;0!=this[n(643)]&&(vec3.set(this.curRotateVec,t.x,t.y,t.z),mat4[n(401)](g_webglControl[n(629)][e],this[n(568)],a,this[n(628)]),this[n(424)]())},this[g(514)]=function(){var e=g;mat4.identity(this.ObjectStartmatrix),this[e(643)]=0,this[e(520)]()},this[g(395)]=function(e,t,a,n){var i=g,r=getPublicModelBox(g_GLObjectSet,g_GLPartSet,e,g_webglControl[i(629)]);getModelBoxCenter(r,this.curModelCenter),mat4[i(531)](this.ObjectMovematrix),mat4.translate(this[i(528)],this[i(528)],vec3[i(504)](t,a,n)),g_glprogram[i(691)](e,this[i(528)]),this[i(424)]()},this[g(455)]=function(e){var t=g;g_glprogram[t(455)](e),this.draw3D()},this[g(633)]=function(e){var t=g;g_glprogram[t(603)](e),this.draw3D()},this[g(695)]=function(e){var t=g;g_glprogram.setBoxShow(e),g_glprogram[t(603)](e),this.draw3D()},this[g(688)]=function(e,t,a,n){var i=g,e=2*e/this[i(462)]-1,t=1-2*t/this.HEIGHT;this.ray_nds_near[0]=e,this[i(478)][1]=t,this[i(478)][2]=-1,this[i(586)][0]=e,this[i(586)][1]=t,this[i(586)][2]=1,this[i(600)][0]=this[i(478)][0],this.ray_clip_near[1]=this[i(478)][1],this[i(600)][2]=this.ray_nds_near[2],this[i(600)][3]=1,this[i(636)][0]=this[i(586)][0],this[i(636)][1]=this[i(586)][1],this.ray_clip_far[2]=this.ray_nds_far[2],this[i(636)][3]=1,vec4[i(524)](this[i(536)],this[i(600)],g_camera.mViewProjI),vec4[i(524)](this[i(634)],this[i(636)],g_camera[i(477)]),0!=this[i(536)][3]&&(this.ray_world_near[0]/=this[i(536)][3],this[i(536)][1]/=this.ray_world_near[3],this.ray_world_near[2]/=this[i(536)][3]),0!=this[i(634)][3]&&(this[i(634)][0]/=this[i(634)][3],this.ray_world_far[1]/=this[i(634)][3],this[i(634)][2]/=this[i(634)][3]),a.x=this.ray_world_near[0],a.y=this[i(536)][1],a.z=this[i(536)][2],n.x=this[i(634)][0],n.y=this.ray_world_far[1],n.z=this[i(634)][2]},this[g(476)]=function(e,t){var a=g;CalTranslatePoint(e.x,e.y,e.z,g_webglControl[a(629)][t],e)},this[g(399)]=function(e,t){var a;-1<t&&(a=new Point3(e.x,e.y,e.z),CalInversePoint(a,g_webglControl.m_arrObjectMatrix[t],e))},this[g(613)]=function(e,t){var a=g;t.x=(e.x+1)/2*this.WIDTH,t.y=(1-e.y)/2*this[a(409)]},this[g(658)]=function(e,t){var a=g;t.x=e.x/this.WIDTH*2-1,t.y=1-e.y/this[a(409)]*2},this[g(638)]=function(e,t){var a=g,a=g_canvas[a(560)](e,t);return{x:(a.x+1)/2,y:(1-a.y)/2}},this.pick=function(e,t,a,n){var i=g;if(this[i(506)]==RUNTIME_MODE_MEASURE){this[i(419)][i(509)]=RUNTIME_MODE_MEASURE;var r=g_sceneMeasure[i(589)](e,t);if(-1<r)return g_glprogram[i(701)](),this[i(419)]._oPickUnit=r,this.curPickUnit}return this.curRuntimeMode==RUNTIME_MODE_PMI&&(this[i(419)][i(509)]=RUNTIME_MODE_PMI,this[i(419)]._oPickUnit=g_scenePmiManager[i(641)](e,t,a,n),null!=this[i(419)][i(703)])?(g_glprogram.pickNone(),this[i(419)]):(this.cvtScreenToWorld(e,t,this[i(394)],this[i(518)]),this[i(506)]!=RUNTIME_MODE_SECTION?(this[i(419)][i(703)]=g_glprogram[i(439)](this[i(394)],this.RayPoint2,a,n),-1<this.curPickUnit._oPickUnit[i(535)]?(this[i(419)][i(509)]=RUNTIME_MODE_NORMAL,1==g_sceneMeasure[i(465)]&&1==g_webglControl[i(631)]&&(this[i(419)][i(509)]=RUNTIME_MODE_MEASURE,g_sceneMeasure[i(635)](this[i(419)][i(703)]))):this[i(419)][i(564)](),this[i(424)](),this[i(419)]):void this[i(419)][i(564)]())},this[g(411)]=function(e,t,a,n){var i=g,e=this[i(542)](e,t,a,n);return null==e||null==e[i(703)]?-1:e[i(703)][i(535)]},this[g(403)]=function(e){var t=g;null==e||e[t(660)]<1||(g_glprogram.pickMultObjectByIndexs(e),this[t(699)]())},this[g(453)]=function(a){var n=g;if(null==a||a[n(660)]<1)g_glprogram[n(701)]();else{var i=new Array;for(let t=0;t<a.length;++t)for(let e=0;e<g_GLObjectSet[n(510)][n(660)];++e)if(g_GLObjectSet[n(510)][e][n(434)]==a[t]){i[n(534)](e);break}this[n(403)](i)}this[n(699)]()},this[g(546)]=function(){var e=g;return g_glprogram[e(546)]()},this[g(639)]=function(){var e=g;return g_glprogram[e(669)]()},this[g(390)]=function(){var t=g,a=new Array,n=g_glprogram[t(669)]();for(let e=0;e<n[t(660)];e++)a[t(534)](g_GLObjectSet[t(510)][n[e]][t(434)]);return a},this[g(427)]=function(e){var t=g;return e<0||e>=g_GLObjectSet._arrObjectSet[t(660)]?null:g_GLObjectSet._arrObjectSet[e][t(434)]},this[g(407)]=function(e){var t=g,a=(e[t(597)](),this[t(658)](e[t(451)],this[t(517)].min),this[t(658)](e[t(543)],this[t(517)][t(543)]),this[t(517)][t(597)](),new Array);for(let e=0;e<g_GLObjectSet[t(510)].length;++e){var n=g_GLObjectSet[t(510)][e][t(645)];mat4[t(588)](this[t(414)],g_camera[t(488)],g_glprogram[t(563)](e)),g_glprogram[t(667)](g_GLPartSet._arrPartSet[n][t(443)][0],this[t(414)],this[t(517)])&&a[t(534)](e)}return this.pickModelByIndexs(a)},this[g(459)]=function(){return g_glprogram.pickUnit},this[g(436)]=function(e){e=this[g(578)][e];return null==e?-1:e},this[g(498)]=function(e){var t=g;return e<0||e>=g_GLObjectSet[t(510)].length?-1:g_GLObjectSet[t(510)][e][t(434)]},this[g(444)]=function(t,a){var n=g;if(a[n(434)]==t)return a[n(492)];var i;for(let e=0;e<a._arrSubNode.length;++e)if(null!=(i=this[n(444)](t,a[n(552)][e])))return i;return null},this[g(397)]=function(t,a){var n=g;if(a[n(434)]==t)return a[n(595)];var i;for(let e=0;e<a[n(552)].length;++e)if(null!=(i=this[n(397)](t,a[n(552)][e])))return i;return null},this[g(410)]=function(t,a){var n=g;if(a[n(434)]==t)return a._arrNodeParameters;var i;for(let e=0;e<a[n(552)][n(660)];++e)if(null!=(i=this[n(410)](t,a[n(552)][e])))return i;return null},this.getObjectCenterById=function(e){var t=g;let a=this[t(436)](e),n=null;if(0<=a){e=this.getObjectCenterByIndex(a).Center2D;if(null==e)return null;(n=new Point2(0,0)).x=(e.x+1)*this[t(462)]/2,n.y=(1-e.y)*this[t(409)]/2}return n},this.getObjectCenterByIndex=function(e){var t=g;return{Center2D:this[t(673)](e),Center3D:this[t(378)](e)}},this[g(378)]=function(e){var t,a=g,n=g_GLObjectSet[a(510)][e][a(645)];return null==g_GLPartSet[a(681)][n]?null:(t=new Point3(0,0,0),e=g_webglControl[a(629)][e],getModelBoxCenter(g_GLPartSet[a(681)][n][a(443)][0][a(666)][a(689)],this[a(507)]),CalTranslatePoint(this.curModelCenter.x,this[a(507)].y,this.curModelCenter.z,e,t),t)},this[g(673)]=function(e){var t,a=g,n=g_GLObjectSet[a(510)][e][a(645)];return null==g_GLPartSet._arrPartSet[n]||(t=new Point3(0,0,0),e=g_webglControl.m_arrObjectMatrix[e],getModelBoxCenter(g_GLPartSet._arrPartSet[n][a(443)][0][a(666)][a(689)],this[a(507)]),mat4.multiply(this[a(414)],g_camera[a(488)],e),CalTranslatePoint(this[a(507)].x,this[a(507)].y,this[a(507)].z,this.MVPMatrix,t),t.z<0)||1<t.z?null:t},this[g(574)]=function(e){var t=g,e=g_GLObjectSet[t(510)][e][t(645)];return null==g_GLPartSet[t(681)][e]?0:g_GLPartSet._arrPartSet[e][t(443)][0]._boxset[t(435)][t(660)]},this.getObjectModelIndex=function(e){var t=g,e=this[t(436)](e);return e<0?-1:g_GLObjectSet._arrObjectSet[e][t(645)]},this[g(555)]=function(e){var t=g,e=this.getObjectModelIndex(e);return e<0?-1:g_GLPartSet[t(681)][e]._uPartID},this[g(374)]=function(){var t=g;if(this[t(461)][t(437)](0,this[t(461)][t(660)]),this[t(461)]=g_glprogram.getPickedIndex(),null==this.pickIndexs||0==this[t(461)][t(660)])for(let e=0;e<g_webglControl[t(629)][t(660)];e++)this.pickIndexs[t(534)](e);var e=getPublicModelBox(g_GLObjectSet,g_GLPartSet,this[t(461)],g_webglControl[t(629)]);getModelBoxCenter(e,this[t(507)]);let a=getModelBoxLength(e),n=Camera[t(587)](g_camera),i=.5*a,r=0;r=i<n?n:1.5*a;e=new Vector3(g_camera[t(569)].vEye[0]-g_camera[t(569)].vAt[0],g_camera[t(569)][t(576)][1]-g_camera[t(569)].vAt[1],g_camera[t(569)][t(576)][2]-g_camera[t(569)].vAt[2]);e[t(597)](),Camera.assignDesc(g_cameraDesc,g_camera.desc),float3[t(432)](g_cameraDesc[t(422)],this.curModelCenter.x,this.curModelCenter.y,this[t(507)].z),float3.set(g_cameraDesc[t(576)],g_cameraDesc[t(422)][0]+e.x*r,g_cameraDesc.vAt[1]+e.y*r,g_cameraDesc[t(422)][2]+e.z*r),shiftViewAnim(g_cameraDesc,.5)},this[g(566)]=function(e){var t=g;return g_glprogram[t(415)](e)},this.setBackground=function(e){var t=g;g_glprogram.setBackground(e),g_webglControl[t(391)]=!0,g_webglControl.m_bgType=BG_TYPE_PICTURE,this[t(699)]()},this[g(704)]=function(e){const t=g;let a=new Image,n=void(a[t(545)]=e);a[t(622)]=function(){var e=t;null!=(n=g_texturer[e(526)](gl,a,g_isWebgl2))&&g_glprogram[e(608)](n),g_webglControl[e(391)]=!0,g_webglControl.m_bgType=BG_TYPE_PICTURE,glRunTime[e(699)]()}},this[g(700)]=function(e,t,a){var n=g;float4.set(g_webglControl.m_BgColor,e,t,a,1),float4[n(432)](g_webglControl[n(426)],e,t,a,1),g_webglControl[n(391)]=!1,g_webglControl[n(554)]=BG_TYPE_COLOR,this[n(699)]()},this[g(450)]=function(){var e,t=g;return null!=g_webglControl[t(596)]&&0<g_webglControl[t(596)].length&&g_webglControl[t(391)]?null:((e=new Array).push(g_webglControl.m_BgColor[0]),e.push(g_webglControl[t(446)][1]),e[t(534)](g_webglControl.m_BgColor[2]),e)},this[g(609)]=function(e){var t=g;if(null!=g_cameraDesc&&null!=g_camera){Camera[t(489)](g_cameraDesc,g_camera.desc);var a=float3.make();switch(e){case 0:float3[t(432)](a,0,0,this.m_fModelLength),float3[t(432)](g_cameraDesc.vUp,0,1,0);break;case 1:float3[t(432)](a,0,0,-this.m_fModelLength),float3[t(432)](g_cameraDesc[t(549)],0,1,0);break;case 2:float3[t(432)](a,-this[t(577)],0,0),float3[t(432)](g_cameraDesc[t(549)],0,1,0);break;case 3:float3.set(a,this[t(577)],0,0),float3[t(432)](g_cameraDesc[t(549)],0,1,0);break;case 4:float3[t(432)](a,0,this[t(577)],0),float3[t(432)](g_cameraDesc.vUp,0,0,-1);break;case 5:float3[t(432)](a,0,-this.m_fModelLength,0),float3[t(432)](g_cameraDesc[t(549)],0,0,1);break;case 6:float3[t(432)](a,this.m_fModelLength/2,this[t(577)]/Math[t(663)](45*Math.PI/180),this[t(577)]/2),float3[t(432)](g_cameraDesc[t(549)],0,0,1)}g_glprogram.pickNone(),float3[t(610)](g_cameraDesc[t(576)],g_camera[t(569)][t(422)],a),shiftViewAnim(g_cameraDesc,.5)}},this[g(442)]=function(t,a){var n=g;if(null==t||0==t[n(660)])g_glprogram.setObjectTransparent(-1,a);else{var i;for(let e=0;e<t.length;++e)0<=(i=this[n(436)](t[e]))&&g_glprogram[n(442)](i,a)}this[n(699)]()},this[g(602)]=function(e){return g_glprogram.getObjectTransparent(e)},this.setObjectVisible=function(e,t){var a=g;g_glprogram[a(485)](e,t),this[a(699)]()},this[g(496)]=function(e){var t=g;return g_glprogram[t(496)](e)},this[g(626)]=function(e,t){var a=g;null==e||e[a(660)]<1||(g_glprogram.setObjectVisibleByIndexs(e,t),this.draw3D())},this[g(463)]=function(e,t,a,n,i){var r=g,t=ConvertColorToMaterial(t,a,n,i),a=this.getObjectIndexById(e);return!(a<0||(g_glprogram[r(463)](a,t),this[r(699)](),0))},this.setObjectMaterialById=function(e,t){var a=g,t=this.getMaterialById(t);null!=t&&(g_glprogram.setObjectMaterial(e,t),this[a(699)]())},this.clearObjectMaterialById=function(e){var t=g,e=this[t(436)](e);return!(e<0||(g_glprogram.clearObjectMaterial(e),this[t(699)](),0))},this.setObjectMaterialTexture2D=function(e,t,a,n){const i=g;e=this.getObjectIndexById(e);if(e<0)return-1;var r=g_GLObjectSet[i(510)][e][i(645)];if(null==g_GLPartSet[i(681)][r]||1!=g_GLPartSet._arrPartSet[r][i(443)][0][i(480)])return-1;r=this[i(500)](a);if(null==r)return-1;let s=r.Clone(),o=(s[i(381)]=g_newMaterialID++,s[i(484)][i(571)]=ADFMTLTYPE_PICTURE,e),l=t,_=new Image;_[i(622)]=function(){var t=i;if(s[t(484)][t(447)][0]=g_texturer[t(526)](gl,_,g_isWebgl2),null==l||0==l[t(660)])g_glprogram[t(463)](o,s);else for(let e=0;e<l.length;++e)g_glprogram[t(494)](o,l[e],s);this[t(699)]()},_[i(545)]=n},this[g(657)]=function(e,t,a,n){var i=g,r=this[i(436)](e);if(r<0)return-1;e=g_GLObjectSet[i(510)][r]._uPartIndex;if(null==g_GLPartSet[i(681)][e]||1!=g_GLPartSet._arrPartSet[e][i(443)][0][i(480)])return-1;e=this[i(500)](a);if(null==e)return-1;var s=e[i(567)]();if(s[i(381)]=g_newMaterialID++,s[i(484)][i(571)]=ADFMTLTYPE_PICTURE,null==g_texBasisu||!g_texBasisu[i(490)])return console[i(623)]("basis unversal not support"),-1;a=g_texBasisu[i(393)](n);if(null==a)return-1;if(s[i(484)][i(447)][0]=g_texBasisu.createCompressedTexture(a[i(585)],a[i(705)],a[i(428)],a[i(421)]),null==t||0==t[i(660)])g_glprogram[i(463)](r,s);else for(let e=0;e<t[i(660)];++e)g_glprogram[i(494)](r,t[e],s)},this[g(494)]=function(e,t,a,n,i,r){var s=g,a=ConvertColorToMaterial(a,n,i,1);g_glprogram[s(494)](e,t,a),this.draw3D()},this[g(493)]=function(e,t,a){var n=g,i=this[n(436)](e);if(0<=i){if(null==t||0==t[n(660)])this.setObjectMaterialById(i,a);else for(let e=0;e<t[n(660)];++e)this.setObjectSurfaceMaterialByIndex(i,t[e],a);return 0}return-1},this[g(637)]=function(e,t,a){var n=g;e<0||t<0||(a=this[n(387)](a))<0||(g_glprogram[n(380)](e,t,a),this[n(699)]())},this[g(474)]=function(e){e=this[g(436)](e);0<=e&&g_glprogram.setObjectSurfaceMaterial(e,-1,null),this.draw3D()},this[g(604)]=function(e){var t=g;if(-1==e)return g_GLMaterialSet[t(605)]();var a=this[t(436)](e);if(0<=a){var n=new Array;for(i=0;i<g_GLObjectSet[t(510)][a][t(515)].length;++i){var r=g_GLMaterialSet[t(456)](g_GLObjectSet._arrObjectSet[a][t(515)][i]);n[t(534)](r)}return n}return null},this.getMaterialById=function(e){var t=g,e=this[t(387)](e);return 0<=e?g_GLMaterialSet[t(412)][e]:null},this[g(387)]=function(e){e=this[g(525)][e];return null==e?-1:e},this[g(537)]=function(e){var t=g,a=this[t(436)](e);if(a<0)return null;e=g_GLObjectSet[t(510)][a][t(645)];if(null==g_GLPartSet[t(681)][e])return null;var n=g_GLPartSet[t(681)][e][t(443)][0]._boxset[t(689)],i=new P3D_BOX;for(let e=0;e<n._Vertex[t(660)];++e){var r=new Point3;CalTranslatePoint(n[t(696)][e].x,n._Vertex[e].y,n._Vertex[e].z,g_glprogram[t(563)](a),r),i[t(382)][t(534)](r)}return i},this[g(441)]=function(e){var t,a=g,e=this.getTreeNodeById(e,g_GLData[a(656)]);return null==e?null:(t=new Array,this[a(522)](e,t),t)},this.setSubObjectMoveByTreeId=function(e,t,a,n){var i,r=g,e=this[r(473)](e,g_GLData[r(656)]);return null!=e&&(i=new Array,this[r(630)](e,i),!(i[r(660)]<=0||(this[r(395)](i,t,a,n),0)))},this[g(473)]=function(t,a){var n=g;if(a._uTreeNodeID==t)return a;var i;for(let e=0;e<a[n(552)][n(660)];++e)if(null!=(i=this[n(473)](t,a[n(552)][e])))return i;return null},this.getTreeNodeSubObjectIndex=function(t,a){var n=g;if(0<=t[n(671)])a[n(534)](t[n(671)]);else for(let e=0;e<t[n(552)][n(660)];++e)this.getTreeNodeSubObjectIndex(t._arrSubNode[e],a)},this[g(522)]=function(t,a){var n=g;if(0<=t[n(671)])a[n(534)](t[n(434)]);else for(let e=0;e<t[n(552)].length;++e)this[n(522)](t[n(552)][e],a)},this[g(646)]=function(e){var t,a=g,e=this[a(473)](e,g_GLData[a(656)]);if(null!=e)return t=new Array,this.getTreeNodeSubObjectIndex(e,t),this[a(620)](t)},this[g(482)]=function(n){var i=g,r=new Array;for(let e=0;e<g_GLObjectSet[i(510)][i(660)];e++){let t=!1,a=g_GLObjectSet[i(510)][e][i(434)];for(let e=0;e<n.length;++e)if(a==n[e]){t=!0;break}t||r[i(534)](e)}g_glprogram[i(665)](r,.2),this[i(699)]()},this[g(620)]=function(n){var i=g,e=new Array;for(let a=0;a<g_GLObjectSet[i(510)].length;a++){let t=!1;for(let e=0;e<n[i(660)];++e)if(a==n[e]){t=!0;break}t||e[i(534)](a)}g_glprogram[i(665)](e,.2),this[i(699)]()},this.setObjectHighlightMaterial=function(e,t,a,n){var i=g,e=ConvertColorToMaterial(e,t,a,1);return g_webglControl[i(388)]=e,this[i(699)](),!0},this[g(615)]=function(){var e=g;return g_webglControl[e(388)]=g_materialData[e(541)],this[e(699)](),!0},this[g(431)]=function(e,t,a,n){var i=g,e=ConvertColorToMaterial(e,t,a,1);return g_webglControl.defaultHlSurface=e,this[i(699)](),!0},this[g(682)]=function(){var e=g;return g_webglControl[e(570)]=g_materialData[e(698)],this[e(699)](),!0},this[g(580)]=function(e){var t=g;1==e?g_glprogram[t(611)](PICK_GEOM_SURFACE):g_glprogram.setPickType(PICK_OBJECT),g_sceneGeomtryOn&&g_glprogram[t(529)]()},this[g(487)]=function(e,t,a,n){var i=g,r=glRunTime[i(459)]();this[i(494)](r[i(535)],r[i(640)],e,t,a,n)},this.home=function(e){var t=g;switch(e){case HOME_ALL:case HOME_TYPE_CAMERA:this[t(551)]()}g_glprogram[t(383)](e),g_sceneAnnotation[t(383)](e),this[t(699)]()},this[g(471)]=function(e,t){var a=g,e=this[a(436)](e);e<0||(CalMat4(g_GLObjectSet[a(510)][e][a(445)],this[a(684)]),CalMat4(t,this[a(464)]),mat4[a(588)](this[a(562)],this[a(464)],this[a(684)]),g_glprogram[a(406)](e,this[a(562)]),this.draw3D())},this[g(499)]=function(e){var t=g,e=this[t(436)](e);if(!(e<0))return g_GLObjectSet._arrObjectSet[e][t(495)]},this[g(653)]=function(e){var e=this[g(436)](e);if(!(e<0))return e=g_glprogram.getObjectWorldMatrix(e),CalADFMat(e)},this[g(501)]=function(a){var n=g;if(null!=a){var i=new Array;for(let t=0;t<a[n(660)];++t)for(let e=0;e<g_GLObjectSet[n(510)][n(660)];e++)if(g_GLObjectSet._arrObjectSet[e][n(434)]==a[t]){i.push(e);break}g_glprogram[n(415)](i),this.draw3D()}},this.getRectSelectionStatus=function(){var e=g;return g_canvas[e(652)]},this[g(418)]=function(e,t){var a=g;g_canvas[a(652)]=e,g_canvas.selRect[a(481)](t),this.draw2D()},this[g(475)]=function(e){this[g(655)]=e},this[g(400)]=function(e){var t=g;g_webglControl[t(631)]&&(e==MEASURE_NONE?this[t(655)]=CAPTURE_NONE:e==MEASURE_OBJECT?this[t(655)]=CAPTURE_OBJECT:e==MEASURE_SURFACE?this.captureType=CAPTURE_GEOM_SURFACE:e==MEASURE_CURVE?this[t(655)]=CAPTURE_GEOM_CURVE:e==MEASURE_POINT?this[t(655)]=CAPTURE_GEOM_POINT:e==MEASURE_TWO_CURVES?this.captureType=CAPTURE_GEOM_CURVE:e==MEASURE_TWO_POINTS&&(this[t(655)]=CAPTURE_GEOM_POINT))},this[g(561)]=function(e,t){var a=g;if(this[a(655)]==CAPTURE_NONE)return g_canvas[a(661)]=null;if(-1<g_sceneMeasure.pickMeasureUintByRay(e,t,!1))return null;this.cvtScreenToWorld(e,t,this.RayPoint1,this[a(518)]);e=g_glprogram[a(557)](this[a(394)],this[a(518)],this[a(661)]);if(this.captureType==CAPTURE_OBJECT){if((g_canvas.captureUnit=null)==e||-1==this[a(661)][a(535)])return null}else{if(this[a(655)]==CAPTURE_GEOM_SURFACE){if((g_canvas.captureUnit=null)==e||-1==this[a(661)][a(535)]||this[a(661)][a(452)]<0)return g_glprogram[a(687)](),null;g_glprogram[a(497)](this.captureUnit[a(535)],this[a(661)][a(640)],!1)}else if(this.captureType==CAPTURE_GEOM_CURVE){if(null==e||-1==this.captureUnit.objectIndex||this[a(661)].geomCurveIndex<0)return g_canvas.captureUnit=null;g_canvas[a(661)]=this.captureUnit}else{if(this[a(655)]!=CAPTURE_GEOM_POINT)return null;if(null==e||-1==this[a(661)].objectIndex||this[a(661)][a(523)]<0)return g_canvas.captureUnit=null;g_canvas.captureUnit=this[a(661)]}this[a(424)]()}return this[a(661)]},this[g(533)]=function(e){var t=g;g_webglControl[t(457)][0]=e?1:0},this[g(502)]=function(e,t,a){},this[g(592)]=function(e,t,a){var n=g;0!=g_webglControl.vecLightType[0]&&(1<(e=e<0?0:e)&&(e=1),1<(t=t<0?0:t)&&(t=1),1<(a=a<0?0:a)&&(a=1),g_webglControl[n(438)][0]=e,g_webglControl[n(438)][1]=t,g_webglControl[n(438)][2]=a,this.draw3D())},this[g(594)]=function(){var t=g;this[t(440)]=!0,g_GLPartSet=GetSVZPartSet(),this[t(693)](),this[t(551)](),this[t(469)]();for(let e=0;e<g_GLPartSet[t(681)][t(660)];++e)g_glprogram[t(430)](e,g_GLPartSet[t(681)][e]),g_buffers[t(513)](e);g_GLPartSet.ClearCache(),this[t(699)]()},this[g(392)]=function(){var e=g;this[e(440)]=!1,(g_GLPartSet=new GL_PARTSET)[e(681)]=new Array(g_sceneData[e(683)][e(660)]),this[e(693)](),this[e(551)](),this.initOperationParams()},this[g(679)]=function(e,t){var a,n,i=g;e<0||e>g_GLPartSet[i(681)].length||(this[i(440)]?console[i(623)]("current loader is not slice mode"):(a=new GL_PART,n=GetSVZPartData(t,0,0),a._arrPartLODData[0]=n[i(547)],a[i(678)]=n[i(503)],a[i(377)]=n[i(707)],a[i(376)]=t[i(483)][0][i(558)],g_GLPartSet[i(681)][e]=a,g_glprogram[i(430)](e,a),g_buffers.updatePartData(e),g_GLPartSet[i(681)][e][i(621)](),this[i(424)]()))},this[g(449)]=function(){var e=g;g_sceneAnnotation.init(),g_sceneData.Clear(),this[e(424)]()},this[g(530)]=function(t,a){var n=g;for(let e=0;e<t._arrMaterialSet.length;++e)t._arrMaterialSet[e][n(384)]+=a,g_GLMaterialSet[n(412)].push(t._arrMaterialSet[e])},this[g(405)]=function(a,e,n,i,r){var s=g,o=g_GLObjectSet[s(510)][s(660)],l=mat4[s(575)]();mat4[s(599)](l,float3[s(674)](e));for(let t=0;t<a[s(510)][s(660)];++t){a[s(510)][t][s(434)]+=n,a._arrObjectSet[t][s(645)]+=i;for(let e=0;e<a._arrObjectSet[t][s(515)].length;++e)a[s(510)][t]._arrSurfaceMaterialIndex[e]+=r;g_GLObjectSet[s(510)][s(534)](a[s(510)][t]);var _=mat4.create(),_=(g_GLObjectSet[s(510)][t+o][s(619)](0,_),mat4[s(588)](_,_,l),g_webglControl[s(629)][s(534)](_),g_GLObjectSet._arrObjectSet[t+o][s(472)](0));-.5<_?g_webglControl[s(598)].push(_):g_webglControl.m_arrObjectTransparent[s(534)](1),g_GLObjectSet[s(510)][t+o][s(614)]==ADFFILL_INVISIBLE?g_webglControl.m_arrObjectVisiable[s(534)](!1):g_webglControl[s(677)][s(534)](!0),g_webglControl.m_arrObjectMaterial.push(null),g_webglControl[s(668)][s(534)](!1)}},this[g(402)]=function(t,a){var n=g;for(let e=0;e<t._arrPartSet[n(660)];++e)t._arrPartSet[e][n(612)]+=a,g_GLPartSet[n(681)][n(534)](t[n(681)][e])},this[g(676)]=function(e){var t=g,a=Cle2Data(),n=a[t(539)],i=a[t(702)],r=GetSVZPartSet(),a=a[t(591)],s=g_GLMaterialSet._arrMaterialSet[t(660)],o=g_GLPartSet[t(681)][t(660)],a=GetSceneUnitScale(a._unit,g_sceneConfig[t(573)]),l=GetMaxMaterialId(g_GLMaterialSet),_=GetMaxPartId(g_GLPartSet),c=GetMaxObjectId(g_GLObjectSet);this[t(530)](i,l),this.importObjectData(n,a,c,o,s),this[t(402)](r,_);for(let e=o;e<g_GLPartSet[t(681)][t(660)];++e)g_glprogram[t(430)](e,g_GLPartSet[t(681)][e]),g_buffers[t(513)](e);e&&e(c),g_GLPartSet[t(621)](),g_sceneData[t(564)](),this.flush()},this[g(540)]=function(e){var t=g;2==e||4==e||8==e?g_webgl[t(420)](e):g_webgl.setMutiSample(0),this[t(699)]()},this[g(625)]=function(e,t,a){var n=g;let i=null,r="";return r=0==a?(i=g_webgl[n(467)](e,t),n(692)):(i=g_webgl[n(458)](e,t),n(553)),this[n(699)](),{type:0,desc:r,width:e,height:t,pixels:i}}}var a101_0x4f66=["onmouseover","vUp","Navigator/navigator_circle_z_dark.png","Navigator/navigator_circle_ex_dark.png","beginPath","set","make","makeDesc","flush","Navigator/navigator_circle_ez_light.png","normalize","145111CbqgiR","drag","236112dCbxiY","top","sub","bottom","left","splice","right","width","clientY","Navigator/navigator_circle_ex_light.png","onmousedown","onmousewheel","fFOVInRadian","vAt","beginDrag","setViewport","5px","225880TGJUQH","mViewProj","Navigator/navigator_circle_ey_dark.png","onmouseup","Navigator/navigator_circle_x_light.png","fWidth","oncontextmenu","Navigator/navigator_circle_x_focus.png","webgl2","rgba(222,222,222,0.2)","fill","287382FwWvZu","clientX","isPointInside","distance","Navigator/navigator_circle_e_focus.png","fFar","Navigator/navigator_circle_z_light.png","dot","arc","length","shiftView","mul","45691LuLify","getBoundingClientRect","getContext","closePath","vEye","fNear","isHide","453630dRtLCY","fSensRot","button","updateDesc","initNavigator","Navigator/navigator_circle_y_dark.png","requestAnimationFrame","assign","desc","Navigator/navigator_circle_y_focus.png","calFront","drawNavigator","Navigator/navigator_circle_z_focus.png","uninitNavigator","push","height","style","Navigator/navigator_circle_y_light.png","clearRect","472672bwulLl"],a101_0x464ee7=a101_0x5ebd;!function(t){for(var e=a101_0x5ebd;;)try{if(293072===parseInt(e(177))+-parseInt(e(207))+-parseInt(e(219))+parseInt(e(165))+parseInt(e(196))+parseInt(e(179))+-parseInt(e(226)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(a101_0x4f66);const NVG_CAMERA_DISTANCE=4,NVG_NODE_RADIUS=.13,NVG_LAYOUT_TOP_LEFT=0,NVG_LAYOUT_TOP_RIGHT=1,NVG_LAYOUT_BOTTOM_LEFT=2,NVG_LAYOUT_BOTTOM_RIGHT=3;var nvgController=null,nvg2dCanvas=null,nvg3dCanvas=null,nvgGl=null,nvg2d=null,nvgCamera=Camera[a101_0x464ee7(172)](),nvgCameraController=CameraController.make(),nvgCameraDesc=Camera[a101_0x464ee7(173)](),nvgEyeDir=float3[a101_0x464ee7(172)](),nvgVertex=[0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,0,1];const nvgAxisCount=[2,2,2],nvgBillbordList=["Navigator/navigator_circle_x_dark.png",a101_0x464ee7(203),a101_0x464ee7(200),a101_0x464ee7(169),a101_0x464ee7(188),a101_0x464ee7(231),a101_0x464ee7(235),a101_0x464ee7(243),a101_0x464ee7(198),"Navigator/navigator_circle_ey_light.png",a101_0x464ee7(168),a101_0x464ee7(238),a101_0x464ee7(213),"Navigator/navigator_circle_ez_dark.png",a101_0x464ee7(175),a101_0x464ee7(211)];var nvgBillboardPt=[float3[a101_0x464ee7(172)](),float3[a101_0x464ee7(172)](),float3[a101_0x464ee7(172)](),float3.make(),float3[a101_0x464ee7(172)](),float3.make()];const nvgBillboardVertex=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1],nvgBillboardSize=[-NVG_NODE_RADIUS,-NVG_NODE_RADIUS,NVG_NODE_RADIUS,-NVG_NODE_RADIUS,NVG_NODE_RADIUS,NVG_NODE_RADIUS,NVG_NODE_RADIUS,NVG_NODE_RADIUS,-NVG_NODE_RADIUS,NVG_NODE_RADIUS,-NVG_NODE_RADIUS,-NVG_NODE_RADIUS,-NVG_NODE_RADIUS,-NVG_NODE_RADIUS,NVG_NODE_RADIUS,-NVG_NODE_RADIUS,NVG_NODE_RADIUS,NVG_NODE_RADIUS,NVG_NODE_RADIUS,NVG_NODE_RADIUS,-NVG_NODE_RADIUS,NVG_NODE_RADIUS,-NVG_NODE_RADIUS,-NVG_NODE_RADIUS,-NVG_NODE_RADIUS,-NVG_NODE_RADIUS,NVG_NODE_RADIUS,-NVG_NODE_RADIUS,NVG_NODE_RADIUS,NVG_NODE_RADIUS,NVG_NODE_RADIUS,NVG_NODE_RADIUS,-NVG_NODE_RADIUS,NVG_NODE_RADIUS,-NVG_NODE_RADIUS,-NVG_NODE_RADIUS,-NVG_NODE_RADIUS,-NVG_NODE_RADIUS,NVG_NODE_RADIUS,-NVG_NODE_RADIUS,NVG_NODE_RADIUS,NVG_NODE_RADIUS,NVG_NODE_RADIUS,NVG_NODE_RADIUS,-NVG_NODE_RADIUS,NVG_NODE_RADIUS,-NVG_NODE_RADIUS,-NVG_NODE_RADIUS,-NVG_NODE_RADIUS,-NVG_NODE_RADIUS,NVG_NODE_RADIUS,-NVG_NODE_RADIUS,NVG_NODE_RADIUS,NVG_NODE_RADIUS,NVG_NODE_RADIUS,NVG_NODE_RADIUS,-NVG_NODE_RADIUS,NVG_NODE_RADIUS,-NVG_NODE_RADIUS,-NVG_NODE_RADIUS,-NVG_NODE_RADIUS,-NVG_NODE_RADIUS,NVG_NODE_RADIUS,-NVG_NODE_RADIUS,NVG_NODE_RADIUS,NVG_NODE_RADIUS,NVG_NODE_RADIUS,NVG_NODE_RADIUS,-NVG_NODE_RADIUS,NVG_NODE_RADIUS,-NVG_NODE_RADIUS,-NVG_NODE_RADIUS],nvgBillboardUV=[0,1,1,1,1,0,1,0,0,0,0,1,0,1,1,1,1,0,1,0,0,0,0,1,0,1,1,1,1,0,1,0,0,0,0,1,0,1,1,1,1,0,1,0,0,0,0,1,0,1,1,1,1,0,1,0,0,0,0,1,0,1,1,1,1,0,1,0,0,0,0,1];var nodeCircle=new Circle2D(0,0,0),nodeProjPt=new Point3(0,0,0),pickScreenPt=new Point3(0,0,0),pickProjPt=new Point3(0,0,0),pickNodeArray=new Array,isNvgReqRender=!1;const NVG_DEFAULT_ROT_SENS=6;function initNavigatorCanvas(){var e=a101_0x464ee7;null!=nvg2dCanvas&&null!=nvg3dCanvas&&(nvg2d=nvg2dCanvas[e(221)]("2d",{alpha:!0}),addNvgMouseListener(nvg2dCanvas),nvgGl=nvg3dCanvas[e(221)](e(204),{alpha:!0,antialias:!0,preserveDrawingBuffer:!0}),(nvgController=new GLNavigator(nvgGl))[e(230)](),initNvgNodePt(),initNvgCamera(),LoadNvgBillBoardTexture(nvgGl,flushNavigator))}function uninitNavigatorCanvas(){null!=nvgController&&nvgController[a101_0x464ee7(239)](),DeleteNvgBillBoardTexture(nvgGl),nvgController=null}function clearNavigatorCanvas(){}function initNvgCamera(){var e=a101_0x464ee7,t=(float3[e(171)](nvgCameraDesc[e(223)],0,0,NVG_CAMERA_DISTANCE),float3[e(171)](nvgCameraDesc[e(192)],0,0,0),float3[e(171)](nvgCameraDesc.vUp,0,1,0),nvgCameraDesc[e(201)]=nvg3dCanvas[e(186)],nvgCameraDesc.fAspect=nvg3dCanvas[e(186)]/nvg3dCanvas[e(241)],float3[e(210)](nvgCameraDesc[e(223)],nvgCameraDesc[e(192)]));nvgCameraDesc[e(224)]=.02*t,nvgCameraDesc[e(212)]=200*t,nvgCameraDesc[e(191)]=45*Math.PI/180,Camera[e(229)](nvgCamera,nvgCameraDesc),Camera[e(194)](nvgCamera,nvg3dCanvas.width,nvg3dCanvas[e(241)],0,0)}function updateNvgCamera(e){var t=a101_0x464ee7;float3[t(181)](nvgEyeDir,e[t(234)][t(223)],e[t(234)][t(192)]),float3[t(176)](nvgEyeDir,nvgEyeDir),float3[t(218)](nvgCameraDesc[t(223)],NVG_CAMERA_DISTANCE,nvgEyeDir),float3[t(233)](nvgCameraDesc[t(167)],e[t(234)][t(167)]),Camera[t(229)](nvgCamera,nvgCameraDesc),flushNavigator()}function addNvgMouseListener(t){var e=a101_0x464ee7;t[e(189)]=function(e){webNvgKeyDown(e,t)},t[e(199)]=function(e){webNvgKeyUp(e,t)},t[e(190)]=function(e){webNvgWheel(e,t)},t.onmousemove=function(e){webNvgKeyMove(e,t)},t[e(166)]=function(e){webNvgMouseOver(e,t)},t.onmouseout=function(e){webNvgMouseOut(e,t)}}var isMoveIn=!1,isNvgMove=!1,isNvgDragLeft=!1;function webNvgKeyDown(e,t){var a=a101_0x464ee7;switch(getNvgScreenPt(e.clientX,e.clientY,pickScreenPt),e.button){case 0:isNvgDragLeft=!0,null!=g_cameraController&&CameraController[a(193)](g_cameraController,g_camera,float2.from(pickScreenPt.x,pickScreenPt.y),null);break;case 1:break;case 2:t[a(202)]=function(){return!1}}lastX=pickScreenPt.x,lastY=pickScreenPt.y}function webNvgKeyUp(e,t){var a=a101_0x464ee7;getNvgScreenPt(e[a(208)],e[a(187)],pickScreenPt),0===e[a(228)]&&(isNvgDragLeft=!1,isNvgMove||doPickNvgNode(pickNvgNode(pickScreenPt.x,pickScreenPt.y))),isNvgMove=!1}function webNvgKeyMove(e,t){var a=a101_0x464ee7;getNvgScreenPt(e[a(208)],e[a(187)],pickScreenPt),isNvgDragLeft&&(isNvgMove=!0,null!=g_cameraController)&&(CameraController[a(178)](g_cameraController,float2.from(pickScreenPt.x,pickScreenPt.y)),glRunTime[a(174)]())}function webNvgWheel(e,t){}function webNvgMouseOver(e,t){isMoveIn=!0,null!=g_cameraController&&(g_cameraController[a101_0x464ee7(227)]=NVG_DEFAULT_ROT_SENS),drawNvg()}function webNvgMouseOut(e,t){isNvgDragLeft=isNvgMove=isMoveIn=!1,null!=g_cameraController&&(g_cameraController.fSensRot=SCENE_DEFAULT_ROT_SENS),nvgController.setFocus(-1),flushNavigator(),drawNvg()}function drawNvg(){var e=a101_0x464ee7;nvg2d[e(164)](0,0,nvg2dCanvas[e(186)],nvg2dCanvas.height),isMoveIn&&!nvgController[e(225)]&&(nvg2d[e(170)](),nvg2d[e(215)](nvg2dCanvas[e(186)]/2,nvg2dCanvas.height/2,nvg2dCanvas[e(186)]/2,0,2*Math.PI),nvg2d[e(222)](),nvg2d.fillStyle=e(205),nvg2d[e(206)]())}function initNvgNodePt(){var e=a101_0x464ee7;float3[e(171)](nvgBillboardPt[0],1,0,0),float3[e(171)](nvgBillboardPt[1],-1,0,0),float3.set(nvgBillboardPt[2],0,1,0),float3.set(nvgBillboardPt[3],0,-1,0),float3[e(171)](nvgBillboardPt[4],0,0,1),float3[e(171)](nvgBillboardPt[5],0,0,-1)}function getNvgScreenPt(e,t,a){var n=a101_0x464ee7,i=nvg2dCanvas[n(220)]();a.x=e-i[n(183)],a.y=t-i[n(180)]}function isNodeFront(e){return 0<float3[a101_0x464ee7(214)](nvgBillboardPt[e],nvgCamera.desc.vEye)}function pickNvgNode(e,t){var a=a101_0x464ee7;pickNodeArray[a(184)](0,pickNodeArray[a(216)]),pickProjPt.x=2*e/nvg2dCanvas.width-1,pickProjPt.y=1-2*t/nvg2dCanvas[a(241)];for(let e=0;e<nvgBillboardPt[a(216)];++e)CalTranslatePoint(nvgBillboardPt[e][0],nvgBillboardPt[e][1],nvgBillboardPt[e][2],nvgCamera[a(197)],nodeProjPt),nodeCircle[a(171)](nodeProjPt.x,nodeProjPt.y,NVG_NODE_RADIUS),nodeCircle[a(209)](pickProjPt)&&pickNodeArray[a(240)](e);return 1==pickNodeArray[a(216)]?pickNodeArray[0]:1<pickNodeArray[a(216)]?isNodeFront(pickNodeArray[0])?pickNodeArray[0]:pickNodeArray[1]:-1}function doPickNvgNode(e){var t=a101_0x464ee7;nvgController.setFocus(e),0==e?glRunTime.shiftView(3):1==e?glRunTime[t(217)](2):2==e?glRunTime[t(217)](1):3==e?glRunTime.shiftView(0):4==e?glRunTime[t(217)](5):5==e?glRunTime[t(217)](4):flushNavigator()}function a101_0x5ebd(e,t){return a101_0x4f66[e-=164]}function flushNavigator(){var a=a101_0x464ee7;0==isNvgReqRender&&(window[a(232)](function(e){var t=a;nvgController[t(236)](),nvgController[t(237)](),isNvgReqRender=!1}),isNvgReqRender=!0)}function hideNavigator(e){var t=a101_0x464ee7;nvgController[t(225)]=!!e,flushNavigator()}function setNavigatorLayout(e){var t=a101_0x464ee7;switch(e){case NVG_LAYOUT_TOP_LEFT:nvg3dCanvas[t(242)][t(180)]="5px",nvg3dCanvas[t(242)][t(183)]=t(195),nvg3dCanvas[t(242)][t(182)]="",nvg3dCanvas[t(242)][t(185)]="",nvg2dCanvas.style[t(180)]=t(195),nvg2dCanvas[t(242)][t(183)]=t(195),nvg2dCanvas.style[t(182)]="",nvg2dCanvas[t(242)].right="";break;case NVG_LAYOUT_TOP_RIGHT:nvg3dCanvas.style[t(180)]="5px",nvg3dCanvas[t(242)].right=t(195),nvg3dCanvas[t(242)].bottom="",nvg3dCanvas[t(242)][t(183)]="",nvg2dCanvas[t(242)].top=t(195),nvg2dCanvas[t(242)].right=t(195),nvg2dCanvas[t(242)][t(182)]="",nvg2dCanvas.style[t(183)]="";break;case NVG_LAYOUT_BOTTOM_LEFT:nvg3dCanvas[t(242)].bottom=t(195),nvg3dCanvas[t(242)][t(183)]=t(195),nvg3dCanvas[t(242)][t(180)]="",nvg3dCanvas.style[t(185)]="",nvg2dCanvas[t(242)][t(182)]=t(195),nvg2dCanvas.style[t(183)]="5px",nvg2dCanvas[t(242)][t(180)]="",nvg2dCanvas[t(242)].right="";break;case NVG_LAYOUT_BOTTOM_RIGHT:nvg3dCanvas[t(242)][t(182)]=t(195),nvg3dCanvas[t(242)][t(185)]=t(195),nvg3dCanvas[t(242)][t(180)]="",nvg3dCanvas.style[t(183)]="",nvg2dCanvas[t(242)].bottom="5px",nvg2dCanvas[t(242)][t(185)]=t(195),nvg2dCanvas[t(242)][t(180)]="",nvg2dCanvas.style[t(183)]=""}}var a59_0x473d=["defaultCanvasTransparency","getBoundingClientRect","max","getRectSelectionStatus","4254QhVvVl","getPickObjectIdByIndex","P3D_OnCommentCreateCallback","defaultBgImage","pickMeasureUnitIndex","110RfwQLR","onmousedown","offsetWidth","isDuringComment","offsetHeight","DOMMouseScroll","zoomWithMouseWheel","_strModelName","style","canvas","deltaY","_oPickUnit","length","ver","addEventListener","uninitRender","P3D_OnCommentDeleteCallback","preventDefault","createCommentUpdate","white.jpg","P3D_OnKeyboardDownCallBack","5px","objectMoveWindow","onceLoadScleModel","startScelModel","adapterLocalToScreen","top","splice","P3D_OnMouseWheelCallBack","arrModelData","showCommentInput","./P3DToolkit/Resource/Background/","defaultBgUrl","_arrPickElements","fillStyle","moveMeasureUnit","P3D_OnCameraChangeCallback","oncontextmenu","P3D_OnAnimFinishCallBack","mousePt","Clear","pickModelByIDs","setActiveByIndex","1LyBqpQ","97557qqAPZk","createMeasureCancel","objectIndex","onunload","ctx","setFocusOnObject","_ModelInfo","nvg2dCanvas","button","ctrlKey","CleStreamModelDataParser","from","P3D_OnTouchMoveCallBack","height","isBind","push","requestAnimationFrame","getTime","P3D_OnLoadModelEndCallback","setRectSelection","clientY","keyCode","left","rect","importScleModel","refreshPickMeasureUnitPos","onMouseKeyUp","cancelBubble","commentOnSubmit","18076foEhpD","onMouseKeyMove","width","blue.jpg","clientX","stopPropagation","viewIndex","keyup","data","grey.jpg","P3D_OnAnimRefreshCallBack","commentOnChange","returnValue","100%","getObjectIdByIndex","P3D_OnTouchStartCallBack","createElement","P3D_OnMouseMoveCallBack","P3D_OnMouseDownCallBack","_arrayByteBuffer","move","itemIndex","updateScleModel","./P3DToolkit/Resource/","setFocusOnPmiItemByIndex","defaultBaseOptMode","right","endLoadModel","clear","set","470522uDgCaS","position","2055938evDfaE","P3D_OnKeyboardUpCallBack","intersectUnit","removeEventListener","pick","moveCommentInput","drag","P3D_OnImportModelCallback","_nCleBufferlength","nvg3dCanvas","isDuringAxis","initRender","P3D_OnSectionUpdateCallback","408277OlazgE","_uPickType","abs","keydown","pmiIndex","curPickUnit","_uRequestRender","_attachPt","curRuntimeMode","absolute","beginDrag","defaultGeomtryOn","min","appendChild","onmouseup","393816GeCUGP","createCommentCancel","flush","init","undefined","byteLength","commentOnClick","P3D_OnMouseUpCallBack","pickModelByRect"],a59_0x4a02fd=a59_0x3ff8;function CALLBACK_V2(){var e=a59_0x3ff8;this.refreshNotation=function(){},this[e(494)]=function(e){},this[e(539)]=function(e){},this[e(581)]=function(e,t,a,n){},this[e(593)]=function(e,t,a,n){},this[e(497)]=function(e,t,a,n){},this.deleteCommentInput=function(){},this[e(468)]=function(e,t,a,n){},this[e(551)]=null}function a59_0x3ff8(e,t){return a59_0x473d[e-=465]}function CALLBACK_V3(){var e=a59_0x3ff8;this.P3D_OnUpdateUICallBack=function(){},this[e(592)]=function(e){},this[e(547)]=function(e){},this.P3D_OnKeyboardDownCallBack=function(e){},this[e(615)]=function(e){},this.P3D_OnMouseDownCallBack=function(e){},this[e(498)]=function(e){},this.P3D_OnMouseMoveCallBack=function(e){},this.P3D_OnMouseWheelCallBack=function(e){},this[e(597)]=function(e){},this[e(565)]=function(e){},this.P3D_OnTouchEndCallBack=function(e){},this[e(545)]=function(){},this[e(571)]=function(){},this[e(475)]=function(){},this.P3D_OnSectionFinishCallback=function(){},this[e(506)]=function(e){},this[e(525)]=function(e){},this[e(470)]=function(e){}}!function(t){for(var e=a59_0x3ff8;;)try{if(235902===-parseInt(e(509))*parseInt(e(504))-parseInt(e(476))+-parseInt(e(553))*parseInt(e(552))-parseInt(e(612))-parseInt(e(491))+parseInt(e(582))+parseInt(e(614)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(a59_0x473d);var container=null,web3dCanvas=null,gl=null,g_isWebgl2=!0,text2dCanvas=null,gl2d=null,callback_v2=new CALLBACK_V2,callback_v3=new CALLBACK_V3,g_bTestMode=!0;const g_resFoder=a59_0x4a02fd(605),g_bgFoder=a59_0x4a02fd(540);var g_bgImage=[a59_0x4a02fd(585),a59_0x4a02fd(528),a59_0x4a02fd(591)],g_bgImageUrl=[],g_bgImageIndex=0,g_sceneLightOn=!0,g_sceneGeomtryOn=!0,g_canvasTransparency=!1,glRunTime=new GLRunTime,isLockCavans=!1,isShiftDown=!1,lastPickType=-2,curPickType=-2,g_operationMode=MOUSE_OPERATION_MODE_DEFAULT,doubleClickTimeMS=300,isMove=!1,curDate=null,lastTime=0,curTime=0,isDigitalTwinMode=!1,isMultPick=!1,isMotionCapture=!1,motionCaptureObjID=null,scrollLeft=0,scrollTop=0,originPt=new Point2(0,0),selRect=new Rect2D(0,0,0,0),isKeyTap=!1,dragLeft=!1,dragMid=!1,dragRight=!1,lastX=-1,lastY=-1;function initComponet(e){var t=a59_0x4a02fd;typeof e!=t(495)&&null!=e&&(container=e,(web3dCanvas=document[t(598)](t(518))).id="web3dCanvas",web3dCanvas.style[t(613)]="absolute",web3dCanvas[t(517)].width="100%",web3dCanvas[t(517)][t(566)]=t(595),container[t(489)](web3dCanvas),initSceneCanvas(),(text2dCanvas=document.createElement(t(518))).id="text2dCanvas",text2dCanvas[t(517)][t(613)]=t(485),text2dCanvas.style[t(584)]=t(595),text2dCanvas[t(517)][t(566)]="100%",container[t(489)](text2dCanvas),init2dCanvas(),(nvg3dCanvas=document.createElement("canvas")).id=t(472),nvg3dCanvas[t(517)][t(613)]=t(485),nvg3dCanvas[t(584)]=150,nvg3dCanvas[t(566)]=150,nvg3dCanvas[t(517)].top="5px",nvg3dCanvas[t(517)][t(608)]="5px",container.appendChild(nvg3dCanvas),(nvg2dCanvas=document.createElement(t(518))).id=t(560),nvg2dCanvas.style[t(613)]="absolute",nvg2dCanvas[t(584)]=150,nvg2dCanvas.height=150,nvg2dCanvas.style[t(535)]=t(530),nvg2dCanvas[t(517)][t(608)]=t(530),container[t(489)](nvg2dCanvas),initNavigatorCanvas())}function destoryComponet(){glRunTime[a59_0x4a02fd(524)](),commentDataClear(),uninitNavigatorCanvas()}function initModuleCallbacks(e){callback_v3=e}function initSettings(t){var a=a59_0x4a02fd;if(typeof t!=a(495)&&null!=t){if(null!=t.defaultBgUrl&&0<t.defaultBgUrl[a(521)])g_bgImage.push(t[a(541)]),g_bgImageIndex=g_bgImage[a(521)];else for(let e=0;e<g_bgImage[a(521)];++e)if(t[a(507)]==g_bgImage[e]){g_bgImageIndex=e;break}g_sceneLightOn=t.defaultLightOn,g_sceneGeomtryOn=t[a(487)],g_operationMode=t[a(607)],g_canvasTransparency=t[a(500)]}}function initP3DUIAPI(){var e=a59_0x4a02fd;(callback_v2=P3DUIAPI)[e(494)](container),callback_v2.commentOnSubmit=commentOnSubmit,callback_v2[e(593)]=commentOnChange,callback_v2[e(497)]=commentOnClick,callback_v2.deleteCommentInput=deleteCommentInput,callback_v2[e(468)]=moveCommentInput}function initSceneCanvas(){var e=a59_0x4a02fd,t=(web3dCanvas[e(584)]=container[e(511)],web3dCanvas[e(566)]=container.offsetHeight,createWebglContext());gl=t[e(557)],g_isWebgl2=2==t[e(522)]}function init2dCanvas(){var e=a59_0x4a02fd;text2dCanvas[e(584)]=container[e(511)],text2dCanvas[e(566)]=container[e(513)],(gl2d=text2dCanvas.getContext("2d",{alpha:!0}))[e(576)](0,0,text2dCanvas[e(584)],text2dCanvas.height),gl2d[e(543)]="rgb(80,91,119,1.0)",gl2d.fill()}function startRender(){var e=a59_0x4a02fd;gl&&gl2d&&(initP3DUIAPI(),glRunTime[e(474)](),addMouseListener(text2dCanvas),text2dCanvas[e(523)](e(514),fireFoxScollFun,!1),window[e(556)]=addCloseListenser,window.onresize=onCanvasResize,0==g_sceneData.arrModelData.length||g_sceneData[e(538)][0]._ModelInfo._Loaded?(glRunTime[e(532)](),glRunTime[e(609)](),callback_v3[e(571)]&&callback_v3[e(571)]()):glRunTime[e(533)]())}function updateModel(a,n,i){var r=a59_0x4a02fd;if(!(a<0||a>g_sceneData[r(538)].length)){let e=new ADFCleParser,t=(e[r(601)]=n,e._arrayCleBuffer=new DataView(e[r(601)],0,e[r(601)][r(496)]),e[r(471)]=e._arrayByteBuffer[r(496)],new ADF_MODEL_SAVEDATA);e[r(563)](t),g_sceneData[r(538)][a][r(559)]._Loaded=!0,e=null,glRunTime[r(604)](a,t),t[r(549)](),t=null,i&&startLoadModels(a+1)}}function clearModel(){var e=a59_0x4a02fd;clearAnimation(),glRunTime[e(610)](),commentDataClear(),clearNavigatorCanvas()}function getModelList(){var t=a59_0x4a02fd;if(null==g_sceneData)return null;var a=new Array;for(let e=0;e<g_sceneData[t(538)][t(521)];e++)a.push(g_sceneData.arrModelData[e][t(559)][t(516)]);return a}function importModel(){var e=a59_0x4a02fd;return glRunTime[e(577)](callback_v3[e(470)])}function stopDefault(e){var t=a59_0x4a02fd;e[t(526)]?(e[t(526)](),e[t(587)]()):(e[t(580)]=!0,e[t(594)]=!1)}function fireFoxScollFun(e){var t=a59_0x4a02fd;if(!isLockCavans)return CameraController[t(515)](g_cameraController,g_camera,-e.deltaY),!1}function addKeyboardListener(e){var t=a59_0x4a02fd;document[t(523)](t(479),onDocumentKeyDown,!1),document[t(523)]("keyup",onDocumentKeyUp,!1)}function removeKeyboardListener(){var e=a59_0x4a02fd;document[e(466)](e(479),onDocumentKeyDown,!1),document[e(466)](e(589),onDocumentKeyUp,!1)}function getCanvasOrigin(){var e=a59_0x4a02fd,t=web3dCanvas[e(501)]();originPt.x=t[e(575)],originPt.y=t[e(535)]}var g_isLocked=!1;function getPickElement(e,t,a,n){var i=a59_0x4a02fd;g_isLocked||(e=glRunTime[i(467)](e,t,a,n),curPickType=null==e||null==e[i(520)]?-2:e[i(477)])}function onDocumentKeyDown(e){var t=a59_0x4a02fd;isLockCavans||(e[t(562)]?isMultPick=isShiftDown=!0:(isMultPick=isShiftDown=!1,32==e[t(574)]?isCommentEditting()||glRunTime[t(558)]():27==e.keyCode&&setUsrCommentMode(0,1)),callback_v3[t(529)](e))}function onDocumentKeyUp(e){isLockCavans||(isMultPick=isShiftDown=!1,callback_v3[a59_0x4a02fd(615)](e))}function webKeyDown(e,t){var a=a59_0x4a02fd;if(!isLockCavans){isKeyTap=!0,getCanvasOrigin();var n=e[a(586)]-originPt.x,i=e[a(573)]-originPt.y;switch(e[a(561)]){case 0:onMouseLeftKeyDown(t,n,i);break;case 1:onMouseMidKeyDown(t,n,i);break;case 2:onMouseRightKeyDown(t,n,i)}lastX=n,lastY=i}}function webKeyUp(e,t){var a=a59_0x4a02fd;if(!isLockCavans){getCanvasOrigin();var n=e[a(586)]-originPt.x,i=e[a(573)]-originPt.y;switch(e[a(561)]){case 0:onMouseLeftKeyUp(t,n,i);break;case 1:onMouseMidKeyUp(t,n,i);break;case 2:onMouseRightKeyUp(t,n,i)}pickedCommentIndex=-1,isKeyTap=!1}}function webWheel(e,t){var a=a59_0x4a02fd;isLockCavans||(CameraController[a(515)](g_cameraController,g_camera,-e[a(519)]),glRunTime.flush(),stopDefault(e))}function webKeyMove(e,t){var a,n=a59_0x4a02fd;isLockCavans||(getCanvasOrigin(),a=e[n(586)]-originPt.x,e=e.clientY-originPt.y,isKeyTap?dragLeft?onMouseLeftKeyMove(t,a,e):dragMid&&onMouseMidKeyMove(t,a,e):isMotionCapture&&(t=glRunTime.captureGeomtry(a,e),motionCaptureObjID=null!=t?glRunTime[n(505)](t[n(555)]):null),isUsrCommentFlag&&!isUsrCommInputShow&&(g_canvas[n(548)][n(611)](a,e),glRunTime[n(493)]()),g_sceneMeasure.pickMeasureMode&&(g_canvas[n(548)].set(a,e),glRunTime[n(493)]()),null!=g_axisNvg&&g_axisNvg.isBind&&!g_canvas[n(473)]&&g_axisNvg.onMouseOver(a,e),lastX=a,lastY=e)}function onMouseLeftKeyDown(e,t,a){var n=a59_0x4a02fd;dragLeft=!0,selRect[n(488)].x=t,selRect[n(488)].y=a,e[n(546)]=function(){return!1},g_operationMode==MOUSE_OPERATION_MODE_DEFAULT?isShiftDown?glRunTime[n(484)]==RUNTIME_MODE_NORMAL&&getPickElement(t,a,isMultPick,!1):glRunTime[n(484)]==RUNTIME_MODE_MEASURE?0<=g_sceneMeasure[n(508)]&&g_sceneMeasure[n(578)](t,a):null!=g_axisNvg&&g_axisNvg[n(567)]&&g_axisNvg.onMouseKeyDown(t,a):g_operationMode==MOUSE_OPERATION_MODE_ROTATE&&CameraController[n(486)](g_cameraController,g_camera,float2[n(564)](t,a),null)}function onMouseMidKeyDown(e,t,a){var n=a59_0x4a02fd;dragMid=!0,CameraController[n(486)](g_cameraController,g_camera,float2[n(564)](t,a),null)}function onMouseRightKeyDown(e,t,a){dragRight=!0,e.oncontextmenu=function(){return!1}}function onMouseLeftKeyUp(e,t,a){var n=a59_0x4a02fd;if(dragLeft=!1,isKeyTap){if(null!=g_axisNvg&&g_axisNvg[n(567)]&&g_axisNvg[n(579)](t,a),glRunTime[n(503)]())return glRunTime[n(550)](null),glRunTime[n(499)](selRect),void glRunTime.setRectSelection(!1,selRect);if(isUsrCommentFlag&&isSingleComment)addSingleComment(lastX,lastY,test_note);else if(isUsrCommentFlag&&g_canvas[n(512)])return void g_sceneAnnotation[n(527)](lastX,lastY);if(getPickElement(lastX,lastY,isMultPick,!0),isMultPick)return;curDate=new Date,(curTime=curDate[n(570)]())-lastTime<doubleClickTimeMS&&lastPickType==curPickType&&(curPickType==RUNTIME_MODE_NORMAL?glRunTime.setFocusOnObject():curPickType==RUNTIME_MODE_PMI?g_scenePmiManager[n(606)](g_scenePmiManager[n(465)][n(480)],g_scenePmiManager[n(465)][n(588)],g_scenePmiManager[n(465)][n(603)]):-2==curPickType&&glRunTime[n(558)]()),lastTime=curTime,lastPickType=curPickType}lastX=t,lastY=a}function onMouseMidKeyUp(e,t,a){CameraController.endDrag(g_cameraController),dragMid=!1,isUsrCommentFlag&&g_canvas.isDuringComment?getNewCommentNote(lastX,lastY):(lastX=t,lastY=a)}function onMouseRightKeyUp(e,t,a){var n=a59_0x4a02fd;dragRight=!1,isUsrCommentFlag&&!isUsrCommInputShow?g_sceneAnnotation[n(492)]():g_sceneMeasure.pickMeasureMode?g_sceneMeasure[n(554)]():(lastX=t,lastY=a)}function onMouseLeftKeyMove(e,a,n){var i=a59_0x4a02fd;g_operationMode==MOUSE_OPERATION_MODE_DEFAULT?isShiftDown?isMove&&curPickType==RUNTIME_MODE_NORMAL&&-1<glRunTime[i(481)][i(520)][i(555)]&&glRunTime[i(531)](glRunTime[i(481)]._oPickUnit.objectIndex,2*(a-lastX),-2*(n-lastY)):null!=g_axisNvg&&g_axisNvg[i(567)]?0==g_axisNvg.requestUpdate&&(window[i(569)](function(e){var t=i;g_axisNvg[t(583)](a,n),null!=callback_v3.P3D_OnSectionUpdateCallback&&callback_v3[t(475)](),g_axisNvg._uRequestRender=!1}),g_axisNvg[i(482)]=!0):curPickType<0?(3<Math[i(478)](a-selRect.min.x)||3<Math[i(478)](n-selRect[i(488)].y))&&(selRect.max.x=a,selRect[i(502)].y=n,glRunTime[i(572)](!0,selRect)):curPickType==RUNTIME_MODE_MEASURE&&0<=g_sceneMeasure[i(508)]&&(g_sceneMeasure[i(544)](g_sceneMeasure[i(508)],a,n),glRunTime[i(493)]()):g_operationMode==MOUSE_OPERATION_MODE_MOVE?glRunTime[i(602)](2*(a-lastX),-2*(n-lastY)):g_operationMode==MOUSE_OPERATION_MODE_ROTATE&&(CameraController.drag(g_cameraController,float2[i(564)](a,n)),glRunTime[i(493)]()),lastX=a,lastY=n}function onMouseMidKeyMove(e,t,a){var n=a59_0x4a02fd;isShiftDown?glRunTime[n(602)](2*(t-lastX),-2*(a-lastY)):(CameraController[n(469)](g_cameraController,float2[n(564)](t,a)),glRunTime.flush()),lastX=t,lastY=a}function addMouseListener(a){var n=a59_0x4a02fd;a[n(510)]=function(e){var t=n;webKeyDown(e,a),stopDefault(e),callback_v3[t(600)](e)},a[n(490)]=function(e){var t=n;webKeyUp(e,a),callback_v3[t(498)](e)},a.onmousewheel=function(e){var t=n;webWheel(e,a),stopDefault(e),callback_v3[t(537)](e)},a.onmousemove=function(e){var t=n;webKeyMove(e,a),callback_v3[t(599)](e)},a.onmouseover=function(e){addKeyboardListener()},a.onmouseout=function(e){removeKeyboardListener()}}function addCloseListenser(){destoryComponet()}function onCanvasResize(){doCanvasResize(getContextWidth(gl),getContextHeight(gl))}function doCanvasResize(e,t){var a=a59_0x4a02fd,n=(resizeContext(gl,e,t),glRunTime.resetWindow(e,t),new Point2(0,0));for(let e=0;e<g_usrCommOption[a(590)][a(521)];++e)g_canvas[a(534)](g_usrCommOption[a(590)][e]._attachPt.x,g_usrCommOption[a(590)][e][a(483)].y,n),g_usrCommOption.data[e].cvtPointToStyle(n);callback_v2[a(539)](g_usrCommOption),gl2d[a(518)][a(584)]=e,gl2d.canvas[a(566)]=t}function setMouseOperationMode(e){e<MOUSE_OPERATION_MODE_DEFAULT||e>=MOUSE_OPERATION_MODE_END||(g_operationMode=e)}function transP3DTookkitPickElem(e,t){var a=a59_0x4a02fd;e[a(477)]=P3D_ELEMENT_TYPE_NONE,e[a(542)][a(536)](0,e[a(542)][a(521)]);let n=0;t._uPickType==RUNTIME_MODE_NORMAL?(e[a(477)]=P3D_ELEMENT_TYPE_PART,n=glRunTime[a(596)](t[a(520)][a(555)]),e._arrPickElements[a(568)](n)):t[a(477)]==RUNTIME_MODE_PMI&&(e[a(477)]=P3D_ELEMENT_TYPE_PMI_ITEM,n=g_scenePmiManager.getItemIdByIndex(t[a(520)][a(480)],t[a(520)][a(603)]),e[a(542)][a(568)](n))}var a95_0x273d=["pow","21YStbpf","atan2","createCommentUpdate","length","objectMoveWindow","endDrag","abs","5CdyjHr","move","P3D_OnTouchStartCallBack","from","94426zIohql","drag","ontouchend","P3D_OnTouchMoveCallBack","sqrt","clientY","436897NvaOBJ","383810MvTaPJ","beginDrag","168370njxCtH","574065CKswrv","getTime","ontouchmove","userAgent","_oPickUnit","clientX","P3D_OnTouchEndCallBack","481673RcVqIQ","setFocusOnObject","targetTouches","curPickUnit","isDuringComment","4462jusqVn","1xUKhVP"],a95_0x1d1380=a95_0x2289;function a95_0x2289(e,t){return a95_0x273d[e-=244]}!function(t){for(var e=a95_0x2289;;)try{if(268449===-parseInt(e(271))*parseInt(e(274))+-parseInt(e(266))*-parseInt(e(272))+parseInt(e(256))+parseInt(e(249))*-parseInt(e(245))+-parseInt(e(255))+-parseInt(e(258))+parseInt(e(259)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(a95_0x273d);var isPhone=/(iPhone|iPad|iPod|iOS|Android|ipad)/i.test(navigator[a95_0x1d1380(262)])||/(Macintosh)/i.test(navigator[a95_0x1d1380(262)])&&a95_0x1d1380(251)in document,lastX1=-1,lastY1=-1,lastX2=-1,lastY2=-1,x1=-1,y1=-1,x2=-1,y2=-1,touch1=null,touch2=null,scaleFactor=1.2,moveSensitivity=1,rotateSensitivity=1,zRotateSensitive=.03,cameraMoveSensitivity=3,scaleSensitivity=.1,isKeyDown=!1,isKeyMove=!1,isKeyRotate=!1,isKeyScale=!1;function phoneKeyDown(e){var t=a95_0x1d1380;isLockCavans||(isKeyDown=!0,getCanvasOrigin(),1==e[t(268)][t(277)]?(touch1=e[t(268)][0],x1=touch1[t(264)]-originPt.x,y1=touch1[t(254)]-originPt.y,CameraController[t(257)](g_cameraController,g_camera,float2[t(248)](x1,y1),null),lastX1=x1,lastY1=y1):2==e[t(268)].length&&(touch1=e[t(268)][0],touch2=e[t(268)][1],lastX1=touch1[t(264)]-originPt.x,lastY1=touch1[t(254)]-originPt.y,lastX2=touch2[t(264)]-originPt.x,lastY2=touch2[t(254)]-originPt.y))}function phoneKeyMove(e){var t,a,n,i=a95_0x1d1380;isLockCavans||isKeyDown&&(getCanvasOrigin(),1==e[i(268)].length?(touch1=e[i(268)][0],x1=touch1[i(264)]-originPt.x,y1=touch1[i(254)]-originPt.y,isMove?curPickType==RUNTIME_MODE_NORMAL&&(Math[i(244)](x1-lastX1)>moveSensitivity||Math[i(244)](y1-lastY1)>moveSensitivity)&&(glRunTime[i(278)](glRunTime[i(269)][i(263)].objectIndex,2*(x1-lastX1),-2*(y1-lastY1)),lastX1=x1,lastY1=y1,isKeyMove=!0):(Math[i(244)](x1-lastX1)>rotateSensitivity||Math[i(244)](y1-lastY1)>rotateSensitivity)&&(CameraController[i(250)](g_cameraController,float2[i(248)](x1,y1)),isKeyRotate=!0),lastX1=x1,lastY1=y1):2==e[i(268)][i(277)]&&(touch1=e[i(268)][0],touch2=e.targetTouches[1],x1=touch1[i(264)]-originPt.x,y1=touch1[i(254)]-originPt.y,x2=touch2.clientX-originPt.x,y2=touch2.clientY-originPt.y,e=lastX1-lastX2,t=lastY1-lastY2,a=x1-x2,n=y1-y2,e=Math[i(253)](e*e+t*t),t=Math.sqrt(a*a+n*n),a=Math[i(275)](lastY2-lastY1,lastX2-lastX1),n=Math[i(275)](y2-y1,x2-x1),Math[i(244)](a-n)<=zRotateSensitive&&Math[i(244)](t-e)<=cameraMoveSensitivity?(Math.abs(x1-lastX1)>moveSensitivity||Math[i(244)](y1-lastY1)>moveSensitivity)&&0<(x1-lastX1)*(x2-lastX2)&&(glRunTime[i(246)](2*(x1-lastX1),-2*(y1-lastY1)),isKeyMove=!0):(a=Math[i(273)](Math[i(273)](lastX1-lastX2,2)+Math[i(273)](lastY1-lastY2,2),.5),n=Math[i(273)](Math.pow(x1-x2,2)+Math.pow(y1-y2,2),.5),CameraController.zoomWithTouch(g_cameraController,g_camera,n-a)),lastX1=x1,lastY1=y1,lastX2=x2,lastY2=y2))}function phoneKeyUp(e){var t=a95_0x1d1380;if(!isLockCavans){if(getCanvasOrigin(),isKeyDown&&!isKeyMove&&!isKeyRotate&&!isKeyScale)if(touch1=e.changedTouches[0],x1=touch1.clientX-originPt.x,y1=touch1[t(254)]-originPt.y,getPickElement(x1,y1,isMultPick,!0),curDate=new Date,(curTime=curDate[t(260)]())-lastTime<doubleClickTimeMS&&lastPickType==curPickType&&curPickType==RUNTIME_MODE_NORMAL&&glRunTime[t(267)](),lastTime=curTime,lastX1=x1,lastY1=y1,lastPickType=curPickType,1==e.touches[t(277)]&&isUsrCommentFlag&&g_canvas[t(270)]&&getNewCommentNote(lastX1,lastY1),isUsrCommentFlag&&isSingleComment)addSingleComment(lastX,lastY,test_note);else if(isUsrCommentFlag&&g_canvas.isDuringComment)return void g_sceneAnnotation[t(276)](lastX1,lastY1);pickedCommentIndex=-1,isKeyScale=isKeyRotate=isKeyMove=isKeyDown=isKeyTap=!1,CameraController[t(279)](g_cameraController)}}function addTouchListener(e){var a=a95_0x1d1380;e.ontouchstart=function(e){var t=a95_0x2289;phoneKeyDown(e),callback_v3[t(247)](e)},e[a(261)]=function(e){var t=a;phoneKeyMove(e),callback_v3[t(252)](e)},e[a(251)]=function(e){var t=a;phoneKeyUp(e),callback_v3[t(265)](e)}}const a96_0x26b8=["vTriVer1","Copy","onNvgRotateXZ_Finish","vTriVer2","RayPoint2","set","planeYZ_M2","planeYZ_P3","showLeadLine","axisZArrow","pickAxis","arrDistance","837018IPngaV","planeXY_P2","intersectArrowZero","splice","isBind","pickIndex","planeYZ_P2","onNvgMoveAxisZ_Begin","planeXZ_M1","mul","updateBindMat","planeXY_M3","onNvgMoveAxisZ_Update","onNvgMoveAxisY_Begin","init","vecDir1","onNvgRotateXY_Begin","pIntersectPtRotate","300067AOzUoq","planeYZ_P1","vecDir2","angle","planeYZ_P4","xzCirRev","setScale","normalize","vecDirCross","pickArc","onNvgRotateXY_Finish","vTriVer3","xyCirRev","5361dMtQxG","onNvgMoveAxisX_Begin","cvtScreenToWorld","onNvgMovePlaneXY_Finish","639364KDHXeM","axisZ","isDuringAxis","2398083KWFWmQ","onMouseOver","arrIntersectPt","onNvgMoveAxisZ_Finish","dot","onNvgRotateYZ_Update","yzCir","planeXZ_M2","yzCirRev","onNvgMovePlaneYZ_Begin","onNvgRotateXZ_Begin","axisNvgEnable","planeXZ_M4","onNvgMovePlaneYZ_Update","onNvgRotateYZ_Begin","onNvgRotateXZ_Update","planeXZ_P1","planeYZ_M1","axisOrigin","pickPlane","axisXCir","xyCir","pIntersectPtMove","planeXZ_P2","pIntersectPt","setShowLeadLines","axisYArrow","intersectTool","isInit","unBind","push","arrIndexs","planeXZ_M3","onNvgMovePlaneXZ_Finish","onNvgMovePlaneXZ_Update","axisCircleR","planeXY_M2","calPlaneMoveUpdatePos","axisX","index","214elXPQU","box","planeXY_M4","vTriVer4","from","onMouseKeyMove","cross","vLinePt1","intersectArcZero","planeXY_M1","axisYCir","RayPoint1","xzCir","1JTigYL","onNvgMoveAxisX_Finish","calAxisRotateUpdatePos","flush2D","onNvgRotateYZ_Finish","onNvgRotateXY_Update","planeYZ_M3","scale","884295aHCrzp","axisXArrow","planeXZ_P3","isInIntersectZero","calAxisRotateUpdateAngle","axisY","onNvgMovePlaneYZ_Finish","nvgMatrix","abs","onNvgMoveAxisX_Update","onNvgMovePlaneXY_Begin","557542GpbHaB","calAxisMoveUpdatePos","onNvgMovePlaneXY_Update","vecAxis","planeXZ_P4","requestUpdate","onNvgMovePlaneXZ_Begin","intersectAxisZero","planeYZ_M4","onNvgMoveAxisY_Update","length","2XNnyZw","onNvgMoveAxisY_Finish","callbacks","planeXY_P3","vLinePt2","planeXY_P1"],a96_0x2253d6=a96_0x4466,AXIS_LENGTH=(!function(t){for(var e=a96_0x4466;;)try{if(606780===-parseInt(e(377))*-parseInt(e(480))-parseInt(e(469))-parseInt(e(458))+-parseInt(e(390))*parseInt(e(437))-parseInt(e(394))+parseInt(e(359))+-parseInt(e(397))*-parseInt(e(450)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(a96_0x26b8),1),AXIS_ARROW_B=.02,AXIS_ARROW_H=.15,AXIS_CIRCLE_R=.7,AXIS_PLANE_OFFSET=.1,AXIS_PLANE_E=.15,AXIS_SCALE=.3,AXIS_ZERO=1e-6,_axisX=float3[a96_0x2253d6(441)](AXIS_LENGTH,0,0),_axisY=float3[a96_0x2253d6(441)](0,AXIS_LENGTH,0),_axisZ=float3[a96_0x2253d6(441)](0,0,AXIS_LENGTH),_axisX_A=float3[a96_0x2253d6(441)](AXIS_LENGTH+AXIS_ARROW_H,0,0),_axisY_A=float3[a96_0x2253d6(441)](0,AXIS_LENGTH+AXIS_ARROW_H,0),_axisZ_A=float3.from(0,0,AXIS_LENGTH+AXIS_ARROW_H),_axisXCir=float3[a96_0x2253d6(441)](AXIS_CIRCLE_R,0,0),_axisYCir=float3[a96_0x2253d6(441)](0,AXIS_CIRCLE_R,0),_axisZCir=float3[a96_0x2253d6(441)](0,0,AXIS_CIRCLE_R),_planeXZ_P1=float3.from(AXIS_PLANE_OFFSET,0,AXIS_PLANE_OFFSET),_planeXZ_P2=float3.from(AXIS_PLANE_OFFSET+AXIS_PLANE_E,0,AXIS_PLANE_OFFSET),_planeXZ_P3=float3[a96_0x2253d6(441)](AXIS_PLANE_OFFSET+AXIS_PLANE_E,0,AXIS_PLANE_OFFSET+AXIS_PLANE_E),_planeXZ_P4=float3.from(AXIS_PLANE_OFFSET,0,AXIS_PLANE_OFFSET+AXIS_PLANE_E),_planeXZ_M1=float3[a96_0x2253d6(441)](-AXIS_LENGTH,0,-AXIS_LENGTH),_planeXZ_M2=float3[a96_0x2253d6(441)](AXIS_LENGTH,0,-AXIS_LENGTH),_planeXZ_M3=float3[a96_0x2253d6(441)](AXIS_LENGTH,0,AXIS_LENGTH),_planeXZ_M4=float3.from(-AXIS_LENGTH,0,AXIS_LENGTH),_planeXY_P1=float3[a96_0x2253d6(441)](AXIS_PLANE_OFFSET,AXIS_PLANE_OFFSET,0),_planeXY_P2=float3[a96_0x2253d6(441)](AXIS_PLANE_OFFSET+AXIS_PLANE_E,AXIS_PLANE_OFFSET,0),_planeXY_P3=float3[a96_0x2253d6(441)](AXIS_PLANE_OFFSET+AXIS_PLANE_E,AXIS_PLANE_OFFSET+AXIS_PLANE_E,0),_planeXY_P4=float3[a96_0x2253d6(441)](AXIS_PLANE_OFFSET,AXIS_PLANE_OFFSET+AXIS_PLANE_E,0),_planeXY_M1=float3[a96_0x2253d6(441)](-AXIS_LENGTH,-AXIS_LENGTH,0),_planeXY_M2=float3[a96_0x2253d6(441)](-AXIS_LENGTH,AXIS_LENGTH,0),_planeXY_M3=float3[a96_0x2253d6(441)](AXIS_LENGTH,AXIS_LENGTH,0),_planeXY_M4=float3[a96_0x2253d6(441)](AXIS_LENGTH,-AXIS_LENGTH,0),_planeYZ_P1=float3.from(0,AXIS_PLANE_OFFSET,AXIS_PLANE_OFFSET),_planeYZ_P2=float3[a96_0x2253d6(441)](0,AXIS_PLANE_OFFSET+AXIS_PLANE_E,AXIS_PLANE_OFFSET),_planeYZ_P3=float3[a96_0x2253d6(441)](0,AXIS_PLANE_OFFSET+AXIS_PLANE_E,AXIS_PLANE_OFFSET+AXIS_PLANE_E),_planeYZ_P4=float3[a96_0x2253d6(441)](0,AXIS_PLANE_OFFSET,AXIS_PLANE_OFFSET+AXIS_PLANE_E),_planeYZ_M1=float3.from(0,-AXIS_LENGTH,-AXIS_LENGTH),_planeYZ_M2=float3[a96_0x2253d6(441)](0,-AXIS_LENGTH,AXIS_LENGTH),_planeYZ_M3=float3[a96_0x2253d6(441)](0,AXIS_LENGTH,AXIS_LENGTH),_planeYZ_M4=float3[a96_0x2253d6(441)](0,AXIS_LENGTH,-AXIS_LENGTH),VALUE_AXIS_X=0,VALUE_AXIS_Y=1,VALUE_AXIS_Z=2,VALUE_AXIS_XY_CIR=3,VALUE_AXIS_XZ_CIR=4,VALUE_AXIS_YZ_CIR=5,VALUE_PLANE_XY=6,VALUE_PLANE_XZ=7,VALUE_PLANE_YZ=8;function AxisNvgCallbacks(){var e=a96_0x2253d6;this[e(391)]=null,this[e(467)]=null,this[e(451)]=null,this.onNvgMoveAxisY_Begin=null,this[e(478)]=null,this.onNvgMoveAxisY_Finish=null,this[e(366)]=null,this[e(371)]=null,this[e(400)]=null,this[e(375)]=null,this[e(455)]=null,this[e(387)]=null,this[e(407)]=null,this[e(412)]=null,this[e(349)]=null,this[e(411)]=null,this[e(402)]=null,this[e(454)]=null,this[e(468)]=null,this[e(471)]=null,this[e(393)]=null,this[e(475)]=null,this[e(431)]=null,this[e(430)]=null,this.onNvgMovePlaneYZ_Begin=null,this[e(410)]=null,this[e(464)]=null}function a96_0x4466(e,t){return e-=347,a96_0x26b8[e]}function AxisNavigator(){const _=a96_0x2253d6;this[_(415)]=float3[_(441)](0,0,0),this[_(425)]=!1,this.isBind=!1,this[_(474)]=!1,this[_(457)]=AXIS_SCALE,this[_(355)]=!0,this[_(364)]=-1,this[_(465)]=null,this[_(482)]=null,this[_(369)]=null,this.intersectTool=new CommonItersectTool,this.RayPoint1=new Point3(0,0,0),this[_(351)]=new Point3(0,0,0),this.vLinePt1=new ADF_BASEFLOAT3,this[_(484)]=new ADF_BASEFLOAT3,this[_(347)]=new ADF_BASEFLOAT3,this[_(350)]=new ADF_BASEFLOAT3,this[_(388)]=new ADF_BASEFLOAT3,this.vTriVer4=new ADF_BASEFLOAT3,this.pIntersectPt=new ADF_BASEFLOAT3,this[_(476)]=30,this[_(361)]=50,this[_(445)]=50,this[_(428)]=new Array,this.arrDistance=new Array,this[_(399)]=new Array,this.vecDir1=new Vector3(0,0,0),this[_(379)]=new Vector3(0,0,0),this[_(472)]=new Vector3(0,0,0),this[_(385)]=new Vector3(0,0,0),this[_(419)]=new ADF_BASEFLOAT3,this[_(376)]=new ADF_BASEFLOAT3,this.moveDir=new ADF_BASEFLOAT3,this[_(373)]=function(e=AXIS_SCALE){var t=_;return this[t(425)]||(this[t(383)](e),this[t(425)]=!0),!0},this.unInit=function(){var e=_;this.xyCir=null,this.xzCir=null,this[e(403)]=null,this[e(425)]=!1},this.bind=function(e,t,a){var n=_;this.nvgMatrix=e,this[n(482)]=t,this.updateBindMat=a,this[n(363)]=!0},this[_(426)]=function(){var e=_;this[e(465)]=null,this.callbacks=null,this[e(369)]=null,this.isBind=!1},this.setScale=function(e){var t=_,a=(this[t(457)]=e,this.axisX=float3[t(368)](null,_axisX,e),this[t(463)]=float3.mul(null,_axisY,e),this[t(395)]=float3[t(368)](null,_axisZ,e),this.axisXArrow=float3[t(368)](null,_axisX_A,e),this[t(423)]=float3.mul(null,_axisY_A,e),this[t(356)]=float3[t(368)](null,_axisZ_A,e),this[t(417)]=float3[t(368)](null,_axisXCir,e),this[t(447)]=float3[t(368)](null,_axisYCir,e),this.axisZCir=float3[t(368)](null,_axisZCir,e),this[t(413)]=float3.mul(null,_planeXZ_P1,e),this.planeXZ_P2=float3[t(368)](null,_planeXZ_P2,e),this.planeXZ_P3=float3[t(368)](null,_planeXZ_P3,e),this[t(473)]=float3[t(368)](null,_planeXZ_P4,e),this[t(485)]=float3.mul(null,_planeXY_P1,e),this[t(360)]=float3.mul(null,_planeXY_P2,e),this[t(483)]=float3[t(368)](null,_planeXY_P3,e),this.planeXY_P4=float3.mul(null,_planeXY_P4,e),this[t(378)]=float3[t(368)](null,_planeYZ_P1,e),this[t(365)]=float3[t(368)](null,_planeYZ_P2,e),this[t(354)]=float3[t(368)](null,_planeYZ_P3,e),this.planeYZ_P4=float3[t(368)](null,_planeYZ_P4,e),this[t(446)]=float3.mul(null,_planeXY_M1,e),this.planeXY_M2=float3[t(368)](null,_planeXY_M2,e),this[t(370)]=float3.mul(null,_planeXY_M3,e),this[t(439)]=float3.mul(null,_planeXY_M4,e),this[t(367)]=float3[t(368)](null,_planeXZ_M1,e),this[t(404)]=float3[t(368)](null,_planeXZ_M2,e),this[t(429)]=float3[t(368)](null,_planeXZ_M3,e),this.planeXZ_M4=float3.mul(null,_planeXZ_M4,e),this[t(414)]=float3[t(368)](null,_planeYZ_M1,e),this[t(353)]=float3[t(368)](null,_planeYZ_M2,e),this[t(456)]=float3[t(368)](null,_planeYZ_M3,e),this[t(477)]=float3[t(368)](null,_planeYZ_M4,e),this[t(432)]=AXIS_CIRCLE_R*e,this.axisArrowB=AXIS_ARROW_B*e,-AXIS_ARROW_H*e),n=(AXIS_LENGTH+AXIS_ARROW_H)*e,a=new Point3(a,a,a),n=new Point3(n,n,n),a=(this[t(438)]=new Box3D,TranBox3D(a,n,this[t(438)]),new ADF_BASEFLOAT3),n=new ADF_BASEFLOAT3,i=new ADF_BASEFLOAT3,r=new ADF_BASEFLOAT3,s=new ADF_BASEMATRIX,o=(a.x=this[t(415)][0],a.y=this.axisOrigin[1],a.z=this[t(415)][2],n.x=this[t(435)][0],n.y=this[t(435)][1],n.z=this[t(435)][2],i.x=this[t(463)][0],i.y=this[t(463)][1],i.z=this[t(463)][2],r.x=this[t(395)][0],r.y=this[t(395)][1],r.z=this[t(395)][2],Math.PI/2/alpha+1),l=3*Math.PI/2/alpha+1;this[t(418)]=new Float32Array(3*o),this[t(449)]=new Float32Array(3*o),this[t(403)]=new Float32Array(3*o),this[t(389)]=new Float32Array(3*l),this[t(382)]=new Float32Array(3*l),this[t(405)]=new Float32Array(3*l),GetArcTransformMatrix(a,n,i,0,Math.PI/2,this[t(432)],null,s),SplitArc_LineTripFloat32Array(this[t(432)],0,Math.PI/2,s,eAxisZ,this.xyCir),SplitArc_LineTripFloat32Array(this.axisCircleR,Math.PI/2,2*Math.PI,s,eAxisZ,this[t(389)]),ADFMatrixIdentity(s),GetArcTransformMatrix(a,n,r,0,Math.PI/2,this.axisCircleR,null,s),SplitArc_LineTripFloat32Array(this.axisCircleR,0,Math.PI/2,s,eAxisY,this.xzCir),SplitArc_LineTripFloat32Array(this[t(432)],Math.PI/2,2*Math.PI,s,eAxisY,this[t(382)]),ADFMatrixIdentity(s),GetArcTransformMatrix(a,i,r,0,Math.PI/2,this[t(432)],null,s),SplitArc_LineTripFloat32Array(this[t(432)],0,Math.PI/2,s,eAxisX,this[t(403)]),SplitArc_LineTripFloat32Array(this.axisCircleR,Math.PI/2,2*Math.PI,s,eAxisX,this.yzCirRev),this[t(476)]*=e,this.intersectArrowZero*=e,this.intersectArcZero*=e,this.isInit&&g_canvas[t(453)]()},this[_(422)]=function(e){this[_(355)]=e},this[_(398)]=function(e,t){var a=_,e=(glRunTime[a(392)](e,t,this.RayPoint1,this[a(351)]),this.pickAxisNvg(this[a(448)],this[a(351)]));if(null==e)return 0<=this[a(364)]&&(this[a(364)]=-1,glRunTime[a(453)]()),-1;this[a(364)]!=e[a(436)]&&(this[a(364)]=e[a(436)],glRunTime[a(453)]()),this.pIntersectPt[a(348)](e.ptIntersect)},this.onMouseKeyDown=function(e,t){var a=_;if(!(this.pickIndex<0))switch(g_canvas[a(396)]=!0,this.pickIndex){case VALUE_AXIS_X:this[a(482)][a(391)](this.pIntersectPt);break;case VALUE_AXIS_Y:this.callbacks[a(372)](this[a(421)]);break;case VALUE_AXIS_Z:this[a(482)][a(366)](this[a(421)]);break;case VALUE_AXIS_XY_CIR:CalTranslatePoint(this[a(415)][0],this.axisOrigin[1],this[a(415)][2],this.nvgMatrix,this[a(347)]),this.vecDir1[a(352)](this[a(421)].x-this[a(347)].x,this[a(421)].y-this[a(347)].y,this.pIntersectPt.z-this[a(347)].z),this.vecDir1[a(384)](),CalTranslatePoint(this.axisZ[0],this[a(395)][1],this.axisZ[2],this[a(465)],this.vTriVer2),this[a(472)][a(352)](this.vTriVer2.x-this[a(347)].x,this.vTriVer2.y-this[a(347)].y,this.vTriVer2.z-this[a(347)].z),this[a(472)][a(384)](),this[a(482)][a(375)]();break;case VALUE_AXIS_XZ_CIR:CalTranslatePoint(this[a(415)][0],this[a(415)][1],this[a(415)][2],this[a(465)],this[a(347)]),this[a(374)][a(352)](this[a(421)].x-this[a(347)].x,this[a(421)].y-this.vTriVer1.y,this[a(421)].z-this[a(347)].z),this[a(374)][a(384)](),CalTranslatePoint(this.axisY[0],this[a(463)][1],this[a(463)][2],this[a(465)],this.vTriVer2),this[a(472)].set(this[a(350)].x-this[a(347)].x,this[a(350)].y-this[a(347)].y,this[a(350)].z-this[a(347)].z),this[a(472)][a(384)](),this[a(482)][a(407)]();break;case VALUE_AXIS_YZ_CIR:CalTranslatePoint(this[a(415)][0],this[a(415)][1],this.axisOrigin[2],this[a(465)],this.vTriVer1),this.vecDir1[a(352)](this.pIntersectPt.x-this.vTriVer1.x,this.pIntersectPt.y-this[a(347)].y,this[a(421)].z-this[a(347)].z),this[a(374)][a(384)](),CalTranslatePoint(this.axisX[0],this[a(435)][1],this[a(435)][2],this.nvgMatrix,this[a(350)]),this[a(472)][a(352)](this.vTriVer2.x-this[a(347)].x,this.vTriVer2.y-this[a(347)].y,this[a(350)].z-this.vTriVer1.z),this[a(472)].normalize(),this[a(482)][a(411)]();break;case VALUE_PLANE_XY:this[a(482)][a(468)](this[a(421)]);break;case VALUE_PLANE_XZ:this.callbacks[a(475)](this[a(421)]);break;case VALUE_PLANE_YZ:this[a(482)].onNvgMovePlaneYZ_Begin(this[a(421)]);break;default:g_canvas[a(396)]=!1}},this.onMouseKeyUp=function(e,t){var a=_;if(!(this[a(364)]<0)){switch(this[a(364)]){case VALUE_AXIS_X:this[a(482)][a(451)]();break;case VALUE_AXIS_Y:this[a(482)].onNvgMoveAxisY_Finish();break;case VALUE_AXIS_Z:this[a(482)][a(400)]();break;case VALUE_AXIS_XY_CIR:this[a(482)][a(387)]();break;case VALUE_AXIS_XZ_CIR:this[a(482)].onNvgRotateXZ_Finish();break;case VALUE_AXIS_YZ_CIR:this[a(482)][a(454)]();break;case VALUE_PLANE_XY:this.callbacks[a(393)]();break;case VALUE_PLANE_XZ:this[a(482)][a(430)]();break;case VALUE_PLANE_YZ:this[a(482)][a(464)]()}g_canvas[a(396)]=!1,this.pickIndex=-1}},this[_(442)]=function(t,a){var n=_;if(!(this[n(364)]<0)){let e=0;switch(glRunTime[n(392)](t,a,this.RayPoint1,this[n(351)]),this.pickIndex){case VALUE_AXIS_X:this[n(470)](this[n(415)],this[n(459)],this.nvgMatrix,this.RayPoint1,this[n(351)]),this[n(482)][n(467)](this[n(419)]);break;case VALUE_AXIS_Y:this.calAxisMoveUpdatePos(this.axisOrigin,this.axisYArrow,this.nvgMatrix,this[n(448)],this[n(351)]),this[n(482)][n(478)](this.pIntersectPtMove);break;case VALUE_AXIS_Z:this[n(470)](this[n(415)],this.axisZArrow,this[n(465)],this.RayPoint1,this.RayPoint2),this[n(482)].onNvgMoveAxisZ_Update(this[n(419)]);break;case VALUE_AXIS_XY_CIR:this[n(452)](this[n(418)],this.nvgMatrix,this.RayPoint1,this[n(351)]),e=this[n(462)](),this.callbacks[n(455)](e);break;case VALUE_AXIS_XZ_CIR:this[n(452)](this[n(449)],this[n(465)],this[n(448)],this[n(351)]),e=this[n(462)](),this[n(482)][n(412)](e);break;case VALUE_AXIS_YZ_CIR:this[n(452)](this[n(403)],this[n(465)],this[n(448)],this[n(351)]),e=this.calAxisRotateUpdateAngle(),this[n(482)][n(402)](e);break;case VALUE_PLANE_XY:this[n(434)](this[n(446)],this[n(433)],this[n(370)],this[n(439)],this.nvgMatrix,this[n(448)],this[n(351)])&&this[n(482)].onNvgMovePlaneXY_Update(this[n(419)]);break;case VALUE_PLANE_XZ:this.calPlaneMoveUpdatePos(this[n(367)],this[n(404)],this[n(429)],this[n(409)],this[n(465)],this[n(448)],this.RayPoint2)&&this[n(482)][n(431)](this[n(419)]);break;case VALUE_PLANE_YZ:this.calPlaneMoveUpdatePos(this[n(414)],this[n(353)],this[n(456)],this[n(477)],this[n(465)],this[n(448)],this[n(351)])&&this[n(482)][n(410)](this[n(419)])}}},this[_(408)]=function(e){var t=_;switch(e){case VALUE_AXIS_X:return null!=this[t(482)][t(391)]&&null!=this[t(482)][t(467)]&&null!=this[t(482)].onNvgMoveAxisX_Finish;case VALUE_AXIS_Y:return null!=this[t(482)][t(372)]&&null!=this[t(482)].onNvgMoveAxisY_Update&&null!=this[t(482)][t(481)];case VALUE_AXIS_Z:return null!=this.callbacks[t(366)]&&null!=this[t(482)][t(371)]&&null!=this[t(482)].onNvgMoveAxisZ_Finish;case VALUE_AXIS_XY_CIR:return null!=this[t(482)][t(375)]&&null!=this[t(482)].onNvgRotateXY_Update&&null!=this.callbacks[t(387)];case VALUE_AXIS_XZ_CIR:return null!=this[t(482)][t(407)]&&null!=this[t(482)].onNvgRotateXZ_Update&&null!=this.callbacks[t(349)];case VALUE_AXIS_YZ_CIR:return null!=this[t(482)][t(411)]&&null!=this[t(482)][t(402)]&&null!=this[t(482)][t(454)];case VALUE_PLANE_XY:return null!=this[t(482)].onNvgMovePlaneXY_Begin&&null!=this[t(482)].onNvgMovePlaneXY_Update&&null!=this[t(482)][t(393)];case VALUE_PLANE_XZ:return null!=this[t(482)].onNvgMovePlaneXZ_Begin&&null!=this[t(482)].onNvgMovePlaneXZ_Update&&null!=this.callbacks[t(430)];case VALUE_PLANE_YZ:return null!=this[t(482)][t(406)]&&null!=this[t(482)][t(410)]&&null!=this.callbacks[t(464)];default:return!1}},this.pickAxisNvg=function(e,t){var n=_;if(null==this[n(482)])return null;if(this[n(444)].x=e.x,this[n(444)].y=e.y,this.vLinePt1.z=e.z,this[n(484)].x=t.x,this.vLinePt2.y=t.y,this[n(484)].z=t.z,this[n(358)][n(362)](0,this[n(358)][n(479)]),this[n(399)][n(362)](0,this[n(399)].length),this[n(428)][n(362)](0,this[n(428)][n(479)]),this.intersectTool.intersectRayBox(e,t,this[n(438)],this[n(465)])&&(this[n(408)](VALUE_AXIS_X)&&this.pickAxis(this[n(415)],this.axisX,this[n(459)],this.nvgMatrix,VALUE_AXIS_X),this[n(408)](VALUE_AXIS_Y)&&this[n(357)](this[n(415)],this[n(463)],this[n(423)],this[n(465)],VALUE_AXIS_Y),this[n(408)](VALUE_AXIS_Z)&&this.pickAxis(this[n(415)],this[n(395)],this[n(356)],this[n(465)],VALUE_AXIS_Z),this[n(408)](VALUE_AXIS_XY_CIR)&&this[n(386)](this[n(418)],this[n(465)],VALUE_AXIS_XY_CIR),this.axisNvgEnable(VALUE_AXIS_XZ_CIR)&&this.pickArc(this[n(449)],this[n(465)],VALUE_AXIS_XZ_CIR),this[n(408)](VALUE_AXIS_YZ_CIR)&&this.pickArc(this[n(403)],this[n(465)],VALUE_AXIS_YZ_CIR),this[n(408)](VALUE_PLANE_XY)&&this.pickPlane(this.planeXY_P1,this[n(360)],this[n(483)],this.planeXY_P4,this[n(465)],VALUE_PLANE_XY),this[n(408)](VALUE_PLANE_XZ)&&this[n(416)](this[n(413)],this[n(420)],this[n(460)],this.planeXZ_P4,this[n(465)],VALUE_PLANE_XZ),this[n(408)](VALUE_PLANE_YZ))&&this[n(416)](this[n(378)],this.planeYZ_P2,this.planeYZ_P3,this[n(381)],this[n(465)],VALUE_PLANE_YZ),0==this[n(358)][n(479)])return null;{let t=1/0,a=0;for(let e=0;e<this[n(358)][n(479)];e++)this[n(358)][e]<t&&(t=this[n(358)][e],a=e);return{dDistance:t,ptIntersect:this[n(399)][a],index:this[n(428)][a]}}},this[_(357)]=function(e,t,a,n,i){var r=_;CalTranslatePoint(e[0],e[1],e[2],n,this[r(347)]),CalTranslatePoint(t[0],t[1],t[2],n,this[r(350)]),CalTranslatePoint(a[0],a[1],a[2],n,this[r(388)]);let s=CalcDistanceOfTwoLineSeg(this.vTriVer1,this.vTriVer2,this[r(444)],this[r(484)],this[r(421)]);this[r(424)][r(461)](this[r(421)],this[r(444)],this.intersectAxisZero)?(s=CalDistanceOfPoint3d(this[r(421)],this.vLinePt1),(e=new ADF_BASEFLOAT3).Copy(this[r(421)]),this[r(358)][r(427)](s),this.arrIntersectPt[r(427)](e),this[r(428)][r(427)](i)):(s=CalcDistanceOfTwoLineSeg(this[r(350)],this[r(388)],this[r(444)],this[r(484)],this[r(421)]),this.intersectTool[r(461)](this[r(421)],this[r(444)],this[r(361)])&&(s=CalDistanceOfPoint3d(this[r(421)],this[r(444)]),(t=new ADF_BASEFLOAT3).Copy(this[r(421)]),this[r(358)].push(s),this.arrIntersectPt[r(427)](t),this.arrIndexs[r(427)](i)))},this[_(386)]=function(t,a,e){var n=_;let i=1/0,r=!1,s=new ADF_BASEFLOAT3;for(let e=0;e<t[n(479)];e+=3){CalTranslatePoint(t[e],t[e+1],t[e+2],a,this[n(347)]),CalTranslatePoint(t[e+3],t[e+4],t[e+5],a,this.vTriVer2);var o=CalcDistanceOfTwoLineSeg(this.vTriVer1,this[n(350)],this[n(444)],this[n(484)],this[n(421)]);this.intersectTool[n(461)](this[n(421)],this[n(444)],this[n(445)])&&o<i&&(s[n(348)](this.pIntersectPt),i=o,r=!0)}r&&(this[n(358)].push(i),this[n(399)][n(427)](s),this[n(428)][n(427)](e))},this[_(416)]=function(e,t,a,n,i,r){var s=_;CalTranslatePoint(e[0],e[1],e[2],i,this.vTriVer1),CalTranslatePoint(t[0],t[1],t[2],i,this[s(350)]),CalTranslatePoint(a[0],a[1],a[2],i,this.vTriVer3),CalTranslatePoint(n[0],n[1],n[2],i,this[s(440)]);let o=-1,l=null;CalcIntersectOfLineSegTriangle(this.vLinePt1,this[s(484)],this[s(347)],this[s(350)],this.vTriVer3,this[s(421)])?(o=CalDistanceOfPoint3d(this[s(421)],this[s(444)]),(l=new ADF_BASEFLOAT3)[s(348)](this[s(421)]),this.arrDistance[s(427)](o),this[s(399)].push(l),this[s(428)][s(427)](r)):CalcIntersectOfLineSegTriangle(this[s(444)],this[s(484)],this[s(388)],this[s(440)],this[s(347)],this[s(421)])&&(o=CalDistanceOfPoint3d(this[s(421)],this[s(444)]),(l=new ADF_BASEFLOAT3).Copy(this[s(421)]),this[s(358)][s(427)](o),this[s(399)][s(427)](l),this[s(428)].push(r))},this[_(470)]=function(e,t,a,n,i){var r=_;this[r(444)].x=n.x,this[r(444)].y=n.y,this.vLinePt1.z=n.z,this.vLinePt2.x=i.x,this[r(484)].y=i.y,this.vLinePt2.z=i.z,CalTranslatePoint(e[0],e[1],e[2],a,this[r(347)]),CalTranslatePoint(t[0],t[1],t[2],a,this[r(350)]),CalcDistanceOfTwoLineSeg(this[r(347)],this[r(350)],this[r(444)],this[r(484)],this[r(419)])},this.calAxisRotateUpdatePos=function(t,a,e,n){var i=_;this[i(444)].x=e.x,this[i(444)].y=e.y,this[i(444)].z=e.z,this[i(484)].x=n.x,this[i(484)].y=n.y,this.vLinePt2.z=n.z;let r=1/0,s=new ADF_BASEFLOAT3;for(let e=0;e<t[i(479)];e+=3){CalTranslatePoint(t[e],t[e+1],t[e+2],a,this[i(347)]),CalTranslatePoint(t[e+3],t[e+4],t[e+5],a,this.vTriVer2);var o=CalcDistanceOfTwoLineSeg(this[i(347)],this[i(350)],this[i(444)],this[i(484)],this[i(376)]);o<r&&(s.Copy(this[i(376)]),r=o)}this[i(376)][i(348)](s)},this[_(462)]=function(){var e=_;let t=0;return CalTranslatePoint(this[e(415)][0],this[e(415)][1],this[e(415)][2],this[e(465)],this[e(347)]),this[e(379)][e(352)](this[e(376)].x-this[e(347)].x,this[e(376)].y-this[e(347)].y,this[e(376)].z-this[e(347)].z),this[e(379)].normalize(),Math[e(466)](this[e(379)].y-this[e(374)].y)<AXIS_ZERO&&Math[e(466)](this[e(379)].x-this.vecDir1.x)<AXIS_ZERO&&Math.abs(this.vecDir2.z-this[e(374)].z)<AXIS_ZERO?0:(this[e(379)][e(443)](this[e(374)],this[e(385)]),t=0<this[e(385)][e(401)](this.vecAxis)?-this[e(379)].angle(this[e(374)]):this[e(379)][e(380)](this[e(374)]))},this[_(434)]=function(e,t,a,n,i,r,s){var o=_;return this[o(444)].x=r.x,this[o(444)].y=r.y,this[o(444)].z=r.z,this[o(484)].x=s.x,this[o(484)].y=s.y,this[o(484)].z=s.z,CalTranslatePoint(e[0],e[1],e[2],i,this.vTriVer1),CalTranslatePoint(t[0],t[1],t[2],i,this[o(350)]),CalTranslatePoint(a[0],a[1],a[2],i,this[o(388)]),CalTranslatePoint(n[0],n[1],n[2],i,this[o(440)]),!!CalcIntersectOfLineSegTriangle(this.vLinePt1,this[o(484)],this[o(347)],this.vTriVer2,this[o(388)],this[o(419)])||!!CalcIntersectOfLineSegTriangle(this.vLinePt1,this[o(484)],this[o(388)],this.vTriVer4,this[o(347)],this[o(419)])}}var a100_0x40ae=["axisOrigin","getPickedIndex","onNvgMoveAxisX_Begin","onNvgRotateXZ_Finish","onNvgMovePlaneYZ_Finish","objectMoveWorldFinish","unbind","17011ZEJOdG","onNvgMovePlaneXZ_Finish","mView","onNvgRotateXY_Finish","onNvgMovePlaneXY_Update","objectRotateWorldStart","onNvgMoveAxisZ_Begin","unBind","8SCcxix","log","objectMoveWorldStart","onNvgRotateXY_Begin","objectRotateWorldFinish","onNvgMovePlaneXY_Begin","onNvgMovePlaneYZ_Update","bind","onNvgRotateXZ_Update","create","210772KTlKvy","updateBindMatrix","onNvgMoveAxisY_Update","objectMoveWorldUpdate","mProj","73433schoiX","_arrObjectSet","GetObjectScale","175136MDXUzA","onNvgRotateXY_Update","m_arrObjectMatrix","4ZdNlak","onNvgMoveAxisY_Finish","onNvgRotateXZ_Begin","onNvgMoveAxisZ_Finish","30146TziXpD","92960eHJZxG","onNvgMovePlaneYZ_Begin","onNvgRotateYZ_Update","onNvgMoveAxisX_Finish","onNvgRotateYZ_Finish","objectRotateWorldUpdate","multiply","onNvgMoveAxisY_Begin","321530gFcaCm","onNvgMovePlaneXZ_Begin"],a100_0x5809b8=a100_0x4c34;function a100_0x4c34(e,t){return a100_0x40ae[e-=406]}!function(t){for(var e=a100_0x4c34;;)try{if(164609===parseInt(e(452))+-parseInt(e(416))*-parseInt(e(412))+parseInt(e(434))+parseInt(e(409))+parseInt(e(425))+-parseInt(e(417))+parseInt(e(442))*-parseInt(e(406)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(a100_0x40ae);var g_objNvgCallback=null,g_objNvgCenter=new Point3(0,0,0),g_objNvgScaleMat=mat4[a100_0x5809b8(451)](),g_objNvgBindMat=mat4.create(),g_objNvgBindIndex=-1;function ObjectAxisNavigator(){var i=a100_0x5809b8;(g_axisNvg=null==g_axisNvg?new AxisNavigator:g_axisNvg).init(),g_objNvgCallback=new AxisNvgCallbacks,this[i(453)]=function(){var e,t,a,n=i;g_objNvgBindIndex<0?(console[n(443)]("object navigator bind fail!"),this[n(433)]()):(e=g_webglControl[n(411)][g_objNvgBindIndex],t=g_GLObjectSet[n(407)][g_objNvgBindIndex][n(408)](),CalTranslatePoint(g_axisNvg.axisOrigin[0],g_axisNvg[n(427)][1],g_axisNvg.axisOrigin[2],e,g_objNvgCenter),a=CalCameraProjectScale(g_objNvgCenter,g_camera[n(436)],g_camera[n(456)]),g_objNvgScaleMat[0]=a/t,g_objNvgScaleMat[5]=a/t,g_objNvgScaleMat[10]=a/t,mat4[n(423)](g_objNvgBindMat,e,g_objNvgScaleMat))},this[i(449)]=function(){var t=i,e=g_glprogram[t(428)]();if(null==e||0==e.length)return console[t(443)]("bind object fail, no object is selected!"),!1;g_objNvgBindIndex=e[0],this[t(453)](),g_objNvgCallback[t(429)]=function(e){glRunTime[t(444)](g_objNvgBindIndex,e.x,e.y,e.z)},g_objNvgCallback.onNvgMoveAxisX_Update=function(e){glRunTime.objectMoveWorldUpdate(g_objNvgBindIndex,e.x,e.y,e.z)},g_objNvgCallback[t(420)]=function(){glRunTime[t(432)]()},g_objNvgCallback[t(424)]=function(e){glRunTime[t(444)](g_objNvgBindIndex,e.x,e.y,e.z)},g_objNvgCallback[t(454)]=function(e){glRunTime[t(455)](g_objNvgBindIndex,e.x,e.y,e.z)},g_objNvgCallback[t(413)]=function(){glRunTime.objectMoveWorldFinish()},g_objNvgCallback[t(440)]=function(e){glRunTime[t(444)](g_objNvgBindIndex,e.x,e.y,e.z)},g_objNvgCallback.onNvgMoveAxisZ_Update=function(e){glRunTime.objectMoveWorldUpdate(g_objNvgBindIndex,e.x,e.y,e.z)},g_objNvgCallback[t(415)]=function(){glRunTime[t(432)]()},g_objNvgCallback[t(445)]=function(){glRunTime.objectRotateWorldStart(g_objNvgBindIndex)},g_objNvgCallback[t(410)]=function(e){glRunTime[t(422)](g_objNvgBindIndex,g_axisZ,e)},g_objNvgCallback[t(437)]=function(){glRunTime[t(446)](g_objNvgBindIndex)},g_objNvgCallback[t(414)]=function(){glRunTime[t(439)](g_objNvgBindIndex)},g_objNvgCallback[t(450)]=function(e){glRunTime[t(422)](g_objNvgBindIndex,g_axisY,e)},g_objNvgCallback[t(430)]=function(){glRunTime[t(446)](g_objNvgBindIndex)},g_objNvgCallback.onNvgRotateYZ_Begin=function(){glRunTime[t(439)](g_objNvgBindIndex)},g_objNvgCallback[t(419)]=function(e){glRunTime[t(422)](g_objNvgBindIndex,g_axisX,e)},g_objNvgCallback[t(421)]=function(){glRunTime[t(446)](g_objNvgBindIndex)},g_objNvgCallback[t(447)]=function(e){glRunTime[t(444)](g_objNvgBindIndex,e.x,e.y,e.z)},g_objNvgCallback[t(438)]=function(e){glRunTime.objectMoveWorldUpdate(g_objNvgBindIndex,e.x,e.y,e.z)},g_objNvgCallback.onNvgMovePlaneXY_Finish=function(){glRunTime[t(432)]()},g_objNvgCallback[t(426)]=function(e){glRunTime[t(444)](g_objNvgBindIndex,e.x,e.y,e.z)},g_objNvgCallback.onNvgMovePlaneXZ_Update=function(e){glRunTime[t(455)](g_objNvgBindIndex,e.x,e.y,e.z)},g_objNvgCallback[t(435)]=function(){glRunTime[t(432)]()},g_objNvgCallback[t(418)]=function(e){glRunTime[t(444)](g_objNvgBindIndex,e.x,e.y,e.z)},g_objNvgCallback[t(448)]=function(e){glRunTime[t(455)](g_objNvgBindIndex,e.x,e.y,e.z)},g_objNvgCallback[t(431)]=function(){glRunTime.objectMoveWorldFinish()},g_axisNvg[t(449)](g_objNvgBindMat,g_objNvgCallback,this.updateBindMatrix),g_isLocked=!0},this[i(433)]=function(){g_axisNvg[i(441)](),g_isLocked=!1}}const a98_0x5e6b=["50337DrSMLa","arraybuffer","13333GuOZfm","3WHsJdk","27332tYzgTI","8494PjPybd","onload","4738baGzQX","response","length","17AKKQPE","10IAXJgA","6133ngjgAb","GET","264994pWEjIO","send","responseType"];function a98_0x296d(e,t){return e-=479,a98_0x5e6b[e]}!function(t){for(var e=a98_0x296d;;)try{if(146293===-parseInt(e(493))+parseInt(e(494))*-parseInt(e(479))+-parseInt(e(486))*parseInt(e(484))+-parseInt(e(481))*-parseInt(e(485))-parseInt(e(491))+parseInt(e(488))+parseInt(e(495)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(a98_0x5e6b);var httpTotal=0,httpCounter=0;function syncBufferFromUrl(e,a){const n=a98_0x296d;let i,r=new XMLHttpRequest;r.open(n(487),e),r[n(490)]=n(492),r.onload=function(e){var t=n;i=r[t(482)],a&&a(i)},r[n(489)](null)}function syncArraybufferFromUrl(e,t){const a=a98_0x296d;httpCounter=0,httpTotal=e[a(483)];let s=new Array(httpTotal);!function n(i){const r=a;if(httpCounter===httpTotal)t&&t(s);else{let a=new XMLHttpRequest;a.open(r(487),i[httpCounter]),a[r(490)]=r(492),a[r(480)]=function(e){var t=r;s[httpCounter]=a[t(482)],httpCounter++,n(i)},a[r(489)](null)}}(e)}var a12_0x376c=["setAnnotationAnim","log","m_arrObjectTransparent","endExplode","1116747JGhCaW","7435KJcRVp","fromCleCamera","animRun()","m_arrObjectMatrix","flush","_uFrameSize","P3D_OnAnimFinishCallBack","P3D_OnAnimRefreshCallBack","GetAnimMatrix","home","_fFOVY","_arrObjectSet","updateDesc","585405YtVqGm","129678qedqdc","6YIOXsi","GetAnimCamera","draw3D","beginExplode","1142047CnOEwr","77JgxWxW","fAspect","GetAnimTransparent","22588MmvHxZ","11113zhOmLy"];!function(t){for(var e=a12_0x4445;;)try{if(718361===-parseInt(e(196))+parseInt(e(180))+parseInt(e(190))+-parseInt(e(181))*parseInt(e(182))+parseInt(e(186))+parseInt(e(191))*parseInt(e(187))+parseInt(e(197)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(a12_0x376c);const ANIMRUN=0,ANIMPAUSE=1,ANIMEND=2,ANIMTERMINAL=3;var animationClock=null,animationStatus=ANIMTERMINAL,uTotalFrame=0,uCurFrame=0,uFrameStep=1,uSleepTime=40,uBaseTime=40,uAnimSpeed=1,g_nAnimationStart=0,g_nAnimationEnd=0,g_animMode=0,g_doObjectAnim=!0,g_doCameraAnim=!0,g_doTransAnim=!0,adfCamera=new ADF_CAMERA;function setAnimType(e,t,a){g_doObjectAnim=e,g_doCameraAnim=t,g_doTransAnim=a}function setAnimSpeed(e){e<.5||10<e||(4<e?(uAnimSpeed=1,uSleepTime=uBaseTime,uFrameStep=Math.ceil(e)):(uFrameStep=1,uSleepTime=uBaseTime/(uAnimSpeed=e)))}function a12_0x4445(e,t){return a12_0x376c[e-=179]}function getAnimSpeed(){return uAnimSpeed*uFrameStep}function getTotalFrames(){return g_GLObjectSet._uFrameSize}function setAnimationStart(){var e=a12_0x4445;animTerminal(),(uTotalFrame=g_GLObjectSet[e(202)])<=0||(animationStatus==ANIMTERMINAL&&glRunTime[e(206)](HOME_ALL),uTotalFrame<=uCurFrame&&(uCurFrame=0),animRun(),g_animMode=1)}function PlaySceneAnimation(){animTerminal(),(uTotalFrame=g_nAnimationEnd)<=(uCurFrame=g_nAnimationStart)&&(uCurFrame=g_nAnimationStart),animationStatus=ANIMRUN,animRun(),g_animMode=2}function PlayUsrFrameAnimation(e,t){if(t<=e||t>=g_GLObjectSet[a12_0x4445(202)])return-1;animTerminal(),uCurFrame=e,uTotalFrame=t,animationStatus=ANIMRUN,animRun(),g_animMode=2}function animRun(){var e=a12_0x4445;uCurFrame<uTotalFrame&&setObjectAnim(uCurFrame)?(g_doCameraAnim&&setCameraAnim(uCurFrame),g_doTransAnim&&setAnnotationAnim(uCurFrame),glRunTime[e(201)](),callback_v3[e(204)](uCurFrame),uCurFrame+=uFrameStep,animationClock=setTimeout(e(199),uSleepTime),animationStatus=ANIMRUN):(animPause(),animationStatus=ANIMEND,callback_v3[e(203)](!0))}function animPause(){uTotalFrame<=0||(null!=animationClock&&clearTimeout(animationClock),animationClock=null,animationStatus=ANIMPAUSE)}function animTerminal(){var e=a12_0x4445;uTotalFrame<=0||(uCurFrame=0,callback_v3[e(204)](uCurFrame),uTotalFrame=0,setObjectAnim(uCurFrame)&&(g_doCameraAnim&&setCameraAnim(uCurFrame),g_doTransAnim&&setAnnotationAnim(uCurFrame),glRunTime[e(184)]()),animPause(),animationStatus=ANIMTERMINAL,g_animMode=0)}function setCurFrame(e){var t=a12_0x4445;if(!(uTotalFrame<=0)){if(1==g_animMode){if(e<0||uTotalFrame<=e)return}else{if(2!=g_animMode)return;if(e<g_nAnimationStart||uTotalFrame<=e)return}setObjectAnim(uCurFrame=e)&&(g_doCameraAnim&&setCameraAnim(uCurFrame),g_doTransAnim)&&setAnnotationAnim(uCurFrame),glRunTime[t(201)](),animPause(),callback_v3.P3D_OnAnimFinishCallBack(!0)}}function setCameraAnim(e){var t=a12_0x4445;return!(e>g_GLObjectSet._uFrameSize||e<0||(g_GLCameraSet[t(183)](e,adfCamera),adfCamera[t(207)]<=1e-4||(Common[t(198)](g_cameraDesc,adfCamera),g_cameraDesc[t(188)]=g_camera.desc[t(188)],Camera[t(179)](g_camera,g_cameraDesc)),0))}function setObjectAnim(t){var a=a12_0x4445;if(t>g_GLObjectSet[a(202)]||t<0)return!1;for(let e=0;e<g_webglControl[a(200)].length;e++){g_GLObjectSet[a(208)][e][a(205)](t,g_webglControl[a(200)][e]);var n=g_GLObjectSet[a(208)][e][a(189)](t);g_webglControl[a(194)][e]=n}return!0}function setAnnotationAnim(e){var t=a12_0x4445;return!(e>g_GLObjectSet._uFrameSize||e<0||(g_sceneAnnotation[t(192)](e),0))}var scope=1,totalFrame=0,mode=0,explode=!1;function setExplodeStart(e,t,a,n){return!(a<1||n<0||!g_sceneExploder[a12_0x4445(185)](e))&&(scope=a,totalFrame=n,mode=t,explode=!0)}function updateExplodeFrame(e){return explode?!(e<0||totalFrame<e)&&(e=e/totalFrame*(scope-1)+1,g_sceneExploder.updateExplode(mode,e)):(console[a12_0x4445(193)](""),!1)}function finishExplode(){var e=a12_0x4445;if(null!=g_sceneExploder)return g_sceneExploder[e(195)]()}function clearAnimation(){null!=g_GLObjectSet&&(animationStatus!=ANIMTERMINAL&&animTerminal(),explodeStatus)&&finishExplode()}const a13_0x10c9=["getObjectWorldCenterByIndex","endExplode","110201ghHKtg","_arrObjectSet","1189777bWhyXg","splice","m_vExplodedCenter","curMoveVec","5167441GcZdVU","6DJpRro","1ZFMXpz","m_arrObjectOriWld","log","1271551edJEII","1369115NTTGHg","create","copy","987179VMPGJF","m_modelBox","The input has invalid object ids","m_arrObjIndex","beginExplode","translate","m_arrObjectOriPos","1019069aECjyW","set","m_arrObjectMatrix","flush","length","objectMovematrix","push"];function a13_0x1f33(e,t){return e-=232,a13_0x10c9[e]}!function(t){for(var e=a13_0x1f33;;)try{if(707682===-parseInt(e(242))-parseInt(e(251))+parseInt(e(262))+parseInt(e(247))*-parseInt(e(240))+-parseInt(e(252))+-parseInt(e(248))*parseInt(e(255))+parseInt(e(246)))break;t.push(t.shift())}catch(e){t.push(t.shift())}}(a13_0x10c9);var explodeStatus=!1;function SceneExplode(){const _=a13_0x1f33;this[_(258)]=new Array,this[_(244)]=new Point3(0,0,0),this[_(261)]=new Array,this[_(249)]=new Array,this.curMoveVec=vec3[_(253)](),this[_(236)]=mat4.create(),this[_(259)]=function(t){var a=_;if(glRunTime.home(HOME_ALL),this[a(258)][a(243)](0,this[a(258)][a(235)]),null==t||0==t[a(235)])for(let e=0;e<g_GLObjectSet[a(241)][a(235)];++e)this[a(258)].push(e);else for(let e=0;e<t[a(235)];++e){var n=glRunTime.getObjectIndexById(t[e]);if(e<0)return console[a(250)](a(257)),!1;this.m_arrObjIndex[a(237)](n)}this[a(261)][a(243)](0,this[a(261)].length),this[a(249)][a(243)](0,this[a(249)].length),getModelBoxCenter(glRunTime[a(256)],this[a(244)]);for(let e=0;e<this[a(258)][a(235)];e++){this[a(261)][e]=glRunTime[a(238)](this[a(258)][e]);var i=mat4[a(253)]();mat4[a(254)](i,g_webglControl[a(233)][this[a(258)][e]]),this[a(249)][e]=i}return explodeStatus=!0},this.updateExplode=function(e,t){var a=_;let n,i,r;switch(e){case P3D_EXPLODE_MODE_X:n=t,i=1,r=1;break;case P3D_EXPLODE_MODE_Y:n=1,i=t,r=1;break;case P3D_EXPLODE_MODE_Z:n=1,i=1,r=t;break;default:P3D_EXPLODE_MODE_FREE;n=t,i=t,r=t}var s,o,l;for(let e=0;e<this[a(258)][a(235)];e++)s=(this[a(261)][e].x-this[a(244)].x)*n,o=(this.m_arrObjectOriPos[e].y-this[a(244)].y)*i,l=(this[a(261)][e].z-this.m_vExplodedCenter.z)*r,vec3[a(232)](this[a(245)],this[a(244)].x+s-this[a(261)][e].x,this[a(244)].y+o-this.m_arrObjectOriPos[e].y,this[a(244)].z+l-this[a(261)][e].z),mat4[a(260)](this[a(236)],IDENTITY_MATRIX,this[a(245)]),mat4.multiply(g_webglControl[a(233)][this[a(258)][e]],this[a(236)],this[a(249)][e]);return glRunTime[a(234)](),!0},this[_(239)]=function(){var t=_;for(let e=0;e<this[t(258)][t(235)];e++)mat4.copy(g_webglControl.m_arrObjectMatrix[this[t(258)][e]],this[t(249)][e]);return glRunTime[t(234)](),!(explodeStatus=!1)}}