'use strict';const a19_0xaf3b=['2RcCFux','makeAxis','eLockAxis','eAxisY','translation','vAt','boundsScene','fSensZoomO','mul','transformVec3','1HuuMQT','77hyOwsu','bInvertRot','mView','fSensZoomP','fSensRot','dot','56749VQsyMw','271687UFMVYp','assign','39355LphDFa','rotate','10558iPgCUB','4907wnUxoj','fSensPanP','viewport','add','from','eControl','vEye','eAxisX','viewAxisInWorld','fNear','distance','rotateY','transformPoint3','3gtRvUI','max','fHeight','camera','vDragPoint','negate','setViewParam','ePerspective','fSensPanO','fFOVInRadian','mProjI','5hvJviJ','eAxisZ','rotateZ','sign','fWidth','tan','rotateX','screenToClipV','desc','54499TnKtnM','eProjType','bDragging','vUp','265362dfHjUy'];(function(_0x22d3c8,_0x482ce4){const _0x11e046=a19_0x583f;while(!![]){try{const _0x1a7e9c=-parseInt(_0x11e046(0x9d))+-parseInt(_0x11e046(0x96))*parseInt(_0x11e046(0x9e))+-parseInt(_0x11e046(0xc8))+parseInt(_0x11e046(0xc9))*parseInt(_0x11e046(0xa2))+-parseInt(_0x11e046(0xbb))*-parseInt(_0x11e046(0xa0))+-parseInt(_0x11e046(0xb0))*-parseInt(_0x11e046(0xc4))+parseInt(_0x11e046(0x97))*parseInt(_0x11e046(0xa3));if(_0x1a7e9c===_0x482ce4)break;else _0x22d3c8['push'](_0x22d3c8['shift']());}catch(_0x825e52){_0x22d3c8['push'](_0x22d3c8['shift']());}}}(a19_0xaf3b,0x28635));import*as a19_0x4812fb from'../Math/math.js';import*as a19_0x31bd92 from'../Math/float2.js';import*as a19_0x5664fc from'../Math/float3.js';import*as a19_0x691dd from'../Math/matrix.js';import*as a19_0x71429c from'../Math/box.js';import*as a19_0x9da7b6 from'./Camera.js';export const eZoom=0x0;export const ePan=0x1;function a19_0x583f(_0x35d612,_0x2be824){_0x35d612=_0x35d612-0x96;let _0xaf3bed=a19_0xaf3b[_0x35d612];return _0xaf3bed;}export const eRotPos=0x2;export const eRotDir=0x3;export function make(){const _0xeb36fe=a19_0x583f;let _0x2a5e16={'fSensZoomP':0x1,'fSensZoomO':0x2,'fSensPanP':0x1,'fSensPanO':0x1,'fSensMoveZ':0x1,'fSensRoll':0x1,'fSensRot':0x3,'eLockAxis':a19_0x4812fb[_0xeb36fe(0xcc)],'bDragging':![],'eControl':eZoom,'vDragPoint':a19_0x31bd92[_0xeb36fe(0xa7)](0x0,0x0),'bInvertRot':![],'boudnsScene':a19_0x71429c['make'](),'camera':null};return _0x2a5e16;}export function setControl(_0x4c81e9,_0x51e795){const _0x38478b=a19_0x583f;(_0x51e795<eZoom||_0x51e795>eRotDir)&&(_0x4c81e9[_0x38478b(0xa8)]=eRotPos),_0x4c81e9[_0x38478b(0xa8)]=_0x51e795;}export function beginDrag(_0x276658,_0x5e8325,_0x1183e7,_0x5c35f5){const _0x2c92bf=a19_0x583f;_0x276658['bDragging']=!![],_0x276658['camera']=_0x5e8325,_0x276658[_0x2c92bf(0xcb)]!=null?_0x276658[_0x2c92bf(0x98)]=a19_0x5664fc[_0x2c92bf(0x9c)](_0x5e8325[_0x2c92bf(0xc3)][_0x2c92bf(0xc7)],a19_0x5664fc[_0x2c92bf(0xca)](_0x276658[_0x2c92bf(0xcb)]))<0x0:_0x276658[_0x2c92bf(0x98)]=![],a19_0x31bd92['assign'](_0x276658['vDragPoint'],_0x1183e7),_0x5c35f5!=null&&a19_0x71429c[_0x2c92bf(0x9f)](_0x276658[_0x2c92bf(0xcf)],_0x5c35f5);}export function endDrag(_0x230b3f){const _0x2caeae=a19_0x583f;_0x230b3f[_0x2caeae(0xc6)]=![],_0x230b3f['camera']=null;}export function drag(_0x3225df,_0x19b97b){const _0x4b84cf=a19_0x583f;if(_0x3225df[_0x4b84cf(0xc6)]){let _0x4e6b5c=a19_0x31bd92['sub'](null,_0x3225df['vDragPoint'],_0x19b97b);a19_0x31bd92[_0x4b84cf(0x9f)](_0x3225df[_0x4b84cf(0xb4)],_0x19b97b);if(_0x3225df[_0x4b84cf(0xa8)]==eZoom)zoom(_0x3225df,_0x3225df[_0x4b84cf(0xb3)],_0x4e6b5c);else{if(_0x3225df[_0x4b84cf(0xa8)]==ePan)pan(_0x3225df,_0x3225df[_0x4b84cf(0xb3)],_0x4e6b5c);else{if(_0x3225df['eControl']==eRotPos)rotPos(_0x3225df,_0x3225df[_0x4b84cf(0xb3)],_0x4e6b5c);else _0x3225df[_0x4b84cf(0xa8)]==eRotDir&&rotDir(_0x3225df,_0x3225df[_0x4b84cf(0xb3)],_0x4e6b5c);}}}}export function zoomWithMouseWheel(_0x2b8cf8,_0x1fd2c3,_0x1e31f2,_0x507c87=0.05){const _0x22add1=a19_0x583f;zoom(_0x2b8cf8,_0x1fd2c3,a19_0x31bd92[_0x22add1(0xa7)](0x0,a19_0x4812fb[_0x22add1(0xbe)](_0x1e31f2)*_0x1fd2c3['viewport'][_0x22add1(0xb2)]*_0x507c87));}export function zoomWithTouch(_0x4a249b,_0x39485a,_0x5ef3a6,_0x3873ff=0.05){const _0x314292=a19_0x583f;zoom(_0x4a249b,_0x39485a,a19_0x31bd92[_0x314292(0xa7)](0x0,a19_0x4812fb['sign'](_0x5ef3a6)*_0x39485a[_0x314292(0xa5)]['fHeight']*_0x3873ff));}export function zoom(_0x4862bf,_0x2ca044,_0x2fed3f){const _0x2f1771=a19_0x583f;let _0xa001cf=a19_0x9da7b6[_0x2f1771(0xc2)](null,_0x2ca044,_0x2fed3f);if(_0x2ca044['desc'][_0x2f1771(0xc5)]==a19_0x9da7b6[_0x2f1771(0xb7)]){const _0x5e6520=_0x2ca044[_0x2f1771(0xc3)]['vEye'],_0x2b429b=_0x2ca044['desc'][_0x2f1771(0xce)];let _0x1f0ed2=a19_0x5664fc[_0x2f1771(0xad)](_0x5e6520,_0x2b429b),_0x5ae365=(_0xa001cf[0x0]+_0xa001cf[0x1])*_0x4862bf[_0x2f1771(0x9a)]*_0x1f0ed2,_0x5a2420=_0x1f0ed2+_0x5ae365,_0x416c90=_0x2ca044['desc'][_0x2f1771(0xac)]*(0x1+0.001);if(_0x5a2420<_0x416c90){let _0x163f36=a19_0x9da7b6[_0x2f1771(0xab)](null,_0x2ca044,a19_0x4812fb[_0x2f1771(0xbc)]),_0x2bdb83;{_0x2bdb83=a19_0x5664fc[_0x2f1771(0xd1)](null,_0x163f36,_0x416c90),_0x2bdb83=a19_0x5664fc[_0x2f1771(0xa6)](_0x2bdb83,_0x2bdb83,_0x2b429b);}a19_0x9da7b6['setViewParam'](_0x2ca044,_0x2bdb83,null,null);}else{let _0x1751b3=a19_0x9da7b6[_0x2f1771(0xab)](null,_0x2ca044,a19_0x4812fb[_0x2f1771(0xbc)]),_0x58da14;{_0x58da14=a19_0x5664fc['mul'](null,_0x1751b3,_0x5ae365),_0x58da14=a19_0x5664fc[_0x2f1771(0xa6)](_0x58da14,_0x58da14,_0x5e6520);}a19_0x9da7b6['setViewParam'](_0x2ca044,_0x58da14,null,null);}}else{let _0x18cf3a;{_0x18cf3a=a19_0x5664fc[_0x2f1771(0xa7)]((_0xa001cf[0x0]+_0xa001cf[0x1])*_0x4862bf[_0x2f1771(0xd0)],0x0,0x0),_0x18cf3a=a19_0x691dd[_0x2f1771(0xd2)](_0x18cf3a,_0x18cf3a,_0x2ca044[_0x2f1771(0xba)]);}let _0x1ee4d1=a19_0x4812fb[_0x2f1771(0xb1)](_0x2ca044[_0x2f1771(0xc3)][_0x2f1771(0xbf)]+_0x18cf3a[0x0],0.001);a19_0x9da7b6['setOrthographic'](_0x2ca044,_0x1ee4d1,null,null,null);}}export function pan(_0x3583c1,_0xf3b432,_0x28ac73){const _0x4cf513=a19_0x583f;if(_0xf3b432[_0x4cf513(0xc3)]['eProjType']==a19_0x9da7b6[_0x4cf513(0xb7)]){let _0x213cf4;{_0x213cf4=a19_0x691dd[_0x4cf513(0xaf)](null,_0xf3b432[_0x4cf513(0xc3)][_0x4cf513(0xce)],_0xf3b432[_0x4cf513(0x99)])[0x2],_0x213cf4*=-Math[_0x4cf513(0xc0)](0.5*_0xf3b432[_0x4cf513(0xc3)][_0x4cf513(0xb9)]);}let _0x490aa7;{_0x490aa7=a19_0x9da7b6[_0x4cf513(0xc2)](null,_0xf3b432,_0x28ac73),_0x490aa7=a19_0x31bd92[_0x4cf513(0xd1)](_0x490aa7,_0x490aa7,_0x213cf4*_0x3583c1[_0x4cf513(0xa4)]);}let _0x5d1112;{_0x5d1112=a19_0x9da7b6[_0x4cf513(0xab)](null,_0xf3b432,a19_0x4812fb[_0x4cf513(0xaa)]),_0x5d1112=a19_0x5664fc['mul'](_0x5d1112,_0x5d1112,_0x490aa7[0x0]*_0xf3b432[_0x4cf513(0xc3)]['fAspect']);}let _0x4e1afc;{_0x4e1afc=a19_0x9da7b6[_0x4cf513(0xab)](null,_0xf3b432,a19_0x4812fb[_0x4cf513(0xcc)]),_0x4e1afc=a19_0x5664fc[_0x4cf513(0xd1)](_0x4e1afc,_0x4e1afc,_0x490aa7[0x1]);}let _0xc9f0d4=a19_0x5664fc[_0x4cf513(0xa6)](null,_0x5d1112,_0x4e1afc),_0x88774=a19_0x5664fc[_0x4cf513(0xa6)](null,_0xf3b432[_0x4cf513(0xc3)][_0x4cf513(0xa9)],_0xc9f0d4),_0x54f509=a19_0x5664fc[_0x4cf513(0xa6)](null,_0xf3b432['desc']['vAt'],_0xc9f0d4);a19_0x9da7b6[_0x4cf513(0xb6)](_0xf3b432,_0x88774,_0x54f509,null);}else{let _0x2ab763=-_0xf3b432[_0x4cf513(0xc3)][_0x4cf513(0xbf)]/_0xf3b432[_0x4cf513(0xa5)]['fWidth'],_0x2c5b4e=-_0x2ab763,_0x4dda8e=_0x28ac73[0x0]*_0x2ab763*_0x3583c1[_0x4cf513(0xb8)],_0x1e5388=_0x28ac73[0x1]*_0x2c5b4e*_0x3583c1[_0x4cf513(0xb8)],_0x3c454b;{_0x3c454b=a19_0x9da7b6[_0x4cf513(0xab)](null,_0xf3b432,a19_0x4812fb[_0x4cf513(0xaa)]),_0x3c454b=a19_0x5664fc['mul'](_0x3c454b,_0x3c454b,_0x4dda8e);}let _0x3abc6f;{_0x3abc6f=a19_0x9da7b6[_0x4cf513(0xab)](null,_0xf3b432,a19_0x4812fb[_0x4cf513(0xcc)]),_0x3abc6f=a19_0x5664fc[_0x4cf513(0xd1)](_0x3abc6f,_0x3abc6f,_0x1e5388);}let _0x5a5011=a19_0x5664fc['add'](null,_0x3c454b,_0x3abc6f),_0x21f767=a19_0x5664fc['add'](null,_0xf3b432[_0x4cf513(0xc3)][_0x4cf513(0xa9)],_0x5a5011),_0x3fcb53=a19_0x5664fc[_0x4cf513(0xa6)](null,_0xf3b432['desc']['vAt'],_0x5a5011);a19_0x9da7b6[_0x4cf513(0xb6)](_0xf3b432,_0x21f767,_0x3fcb53,null);}}export function rotPos(_0x17f759,_0x320948,_0x2e0b0b){const _0x161b59=a19_0x583f;let _0x10ba20;{_0x10ba20=a19_0x31bd92[_0x161b59(0xd1)](_0x10ba20,_0x2e0b0b,a19_0x31bd92['from'](0x1,-0x1)),_0x10ba20=a19_0x9da7b6[_0x161b59(0xc2)](_0x10ba20,_0x320948,_0x10ba20),_0x17f759['bInvertRot']&&(_0x10ba20[0x0]=-_0x10ba20[0x0]);}let _0x44f320;{if(_0x17f759[_0x161b59(0xcb)]==a19_0x4812fb[_0x161b59(0xaa)])_0x44f320=a19_0x691dd[_0x161b59(0xc1)](null,_0x10ba20[0x1]*_0x17f759[_0x161b59(0x9b)]);else{if(_0x17f759[_0x161b59(0xcb)]==a19_0x4812fb[_0x161b59(0xcc)])_0x44f320=a19_0x691dd[_0x161b59(0xae)](null,_0x10ba20[0x0]*_0x17f759[_0x161b59(0x9b)]);else{if(_0x17f759['eLockAxis']==a19_0x4812fb['eAxisZ'])_0x44f320=a19_0x691dd[_0x161b59(0xbd)](null,_0x10ba20[0x0]*_0x17f759[_0x161b59(0x9b)]);else{let _0x170c6b=a19_0x9da7b6[_0x161b59(0xab)](null,_0x320948,a19_0x4812fb[_0x161b59(0xcc)]);_0x44f320=a19_0x691dd[_0x161b59(0xa1)](null,_0x170c6b,_0x10ba20[0x0]*_0x17f759[_0x161b59(0x9b)]);}}}}let _0x16785a;{let _0x3e8559=a19_0x9da7b6[_0x161b59(0xab)](null,_0x320948,a19_0x4812fb[_0x161b59(0xaa)]);_0x16785a=a19_0x691dd[_0x161b59(0xa1)](null,_0x3e8559,_0x10ba20[0x1]*_0x17f759[_0x161b59(0x9b)]);}let _0xce40b8;{_0xce40b8=a19_0x691dd[_0x161b59(0xcd)](null,a19_0x5664fc['negate'](null,_0x320948['desc']['vAt'])),_0xce40b8=a19_0x691dd[_0x161b59(0xd1)](_0xce40b8,_0xce40b8,_0x16785a),_0xce40b8=a19_0x691dd[_0x161b59(0xd1)](_0xce40b8,_0xce40b8,_0x44f320),_0xce40b8=a19_0x691dd[_0x161b59(0xd1)](_0xce40b8,_0xce40b8,a19_0x691dd[_0x161b59(0xcd)](null,_0x320948[_0x161b59(0xc3)][_0x161b59(0xce)]));}let _0x5a62ac=a19_0x691dd[_0x161b59(0xaf)](null,_0x320948[_0x161b59(0xc3)][_0x161b59(0xa9)],_0xce40b8),_0x1f2351;{let _0x37e980=a19_0x691dd['mul'](null,_0x16785a,_0x44f320);_0x1f2351=a19_0x9da7b6[_0x161b59(0xab)](null,_0x320948,a19_0x4812fb['eAxisY']),_0x1f2351=a19_0x691dd[_0x161b59(0xd2)](_0x1f2351,_0x1f2351,_0x37e980);}a19_0x9da7b6[_0x161b59(0xb6)](_0x320948,_0x5a62ac,null,_0x1f2351);}export function rotDir(_0xaec7aa,_0x4f5a89,_0x4fce19){const _0x50f6ae=a19_0x583f;let _0xaff8a6;{_0xaff8a6=a19_0x31bd92['mul'](_0xaff8a6,_0x4fce19,a19_0x31bd92[_0x50f6ae(0xa7)](-0x1,0x1)),_0xaff8a6=a19_0x9da7b6[_0x50f6ae(0xc2)](_0xaff8a6,_0x4f5a89,_0xaff8a6),_0xaff8a6=a19_0x31bd92[_0x50f6ae(0xb5)](_0xaff8a6,_0xaff8a6),_0xaec7aa[_0x50f6ae(0x98)]&&(_0xaff8a6[0x0]=-_0xaff8a6[0x0]);}let _0x6aa2dd;{if(_0xaec7aa[_0x50f6ae(0xcb)]==a19_0x4812fb[_0x50f6ae(0xaa)])_0x6aa2dd=a19_0x691dd[_0x50f6ae(0xc1)](null,_0xaff8a6[0x0]*_0xaec7aa[_0x50f6ae(0x9b)]);else _0xaec7aa[_0x50f6ae(0xcb)]==a19_0x4812fb['eAxisY']?_0x6aa2dd=a19_0x691dd[_0x50f6ae(0xae)](null,_0xaff8a6[0x0]*_0xaec7aa['fSensRot']):_0x6aa2dd=a19_0x691dd[_0x50f6ae(0xbd)](null,_0xaff8a6[0x0]*_0xaec7aa[_0x50f6ae(0x9b)]);}let _0x548688;{let _0x2dfdb2=a19_0x9da7b6[_0x50f6ae(0xab)](null,_0x4f5a89,a19_0x4812fb[_0x50f6ae(0xaa)]);_0x548688=a19_0x691dd[_0x50f6ae(0xa1)](null,_0x2dfdb2,_0xaff8a6[0x1]*_0xaec7aa['fSensRot']);}let _0x565001;{_0x565001=a19_0x691dd[_0x50f6ae(0xcd)](null,a19_0x5664fc[_0x50f6ae(0xb5)](null,_0x4f5a89[_0x50f6ae(0xc3)]['vEye'])),_0x565001=a19_0x691dd[_0x50f6ae(0xd1)](_0x565001,_0x565001,_0x548688),_0x565001=a19_0x691dd[_0x50f6ae(0xd1)](_0x565001,_0x565001,_0x6aa2dd),_0x565001=a19_0x691dd[_0x50f6ae(0xd1)](_0x565001,_0x565001,a19_0x691dd[_0x50f6ae(0xcd)](null,_0x4f5a89['desc'][_0x50f6ae(0xa9)]));}let _0x4ea327=a19_0x691dd[_0x50f6ae(0xaf)](null,_0x4f5a89[_0x50f6ae(0xc3)][_0x50f6ae(0xce)],_0x565001),_0x25343c;{let _0x171f37=a19_0x691dd[_0x50f6ae(0xd1)](null,_0x548688,_0x6aa2dd);_0x25343c=a19_0x9da7b6[_0x50f6ae(0xab)](null,_0x4f5a89,a19_0x4812fb[_0x50f6ae(0xcc)]),_0x25343c=a19_0x691dd[_0x50f6ae(0xd2)](_0x25343c,_0x25343c,_0x171f37);}a19_0x9da7b6[_0x50f6ae(0xb6)](_0x4f5a89,null,_0x4ea327,_0x25343c);}export function lockUpAxis(_0x4b24b8,_0x4cf47a){const _0x30bdb6=a19_0x583f;_0x4cf47a!=a19_0x4812fb[_0x30bdb6(0xaa)]&&_0x4cf47a!=a19_0x4812fb['eAxisY']&&_0x4cf47a!=a19_0x4812fb[_0x30bdb6(0xbc)]?_0x4b24b8[_0x30bdb6(0xcb)]=null:_0x4b24b8[_0x30bdb6(0xcb)]=_0x4cf47a;}export function rotate(_0xb29ec2,_0x2db446,_0x42e6a2,_0x30a554){const _0x372ad9=a19_0x583f;_0xb29ec2[_0x372ad9(0xb3)]=_0x2db446;if(_0x42e6a2==eZoom)zoom(_0xb29ec2,_0xb29ec2[_0x372ad9(0xb3)],_0x30a554);else{if(_0x42e6a2==ePan)pan(_0xb29ec2,_0xb29ec2[_0x372ad9(0xb3)],_0x30a554);else{if(_0x42e6a2==eRotPos)rotPos(_0xb29ec2,_0xb29ec2[_0x372ad9(0xb3)],_0x30a554);else _0x42e6a2==eRotDir&&rotDir(_0xb29ec2,_0xb29ec2['camera'],_0x30a554);}}}