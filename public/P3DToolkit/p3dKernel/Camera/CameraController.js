'use strict';const a19_0x594d=['assign','fSensRot','bInvertRot','setOrthographic','fSensPanP','vDragPoint','add','viewAxisInWorld','1162TAISwP','eAxisY','rotateZ','eControl','1ivJbwh','eLockAxis','1rXiDRU','negate','fAspect','transformPoint3','setViewParam','ePerspective','sign','mul','dot','fFOVInRadian','translation','desc','screenToClipV','makeAxis','boundsScene','2403FowzZU','camera','fSensZoomO','viewport','fWidth','bDragging','170156rYzgjR','eAxisX','make','1518943VBkPtu','2jCqQGf','305401DQIDeX','1182635HXoBlx','385hrPNYk','fHeight','eAxisZ','eProjType','mProjI','vEye','mView','rotate','rotateX','147gGDUJa','1246497SmJMTy','2gaplUK','from','fSensZoomP','fNear','transformVec3','vAt','fSensPanO'];(function(_0x2c6565,_0x34184e){const _0x7670cd=a19_0x8d9c;while(!![]){try{const _0x4132e9=-parseInt(_0x7670cd(0x9b))*-parseInt(_0x7670cd(0xb5))+-parseInt(_0x7670cd(0x97))*-parseInt(_0x7670cd(0xbb))+parseInt(_0x7670cd(0x9a))+parseInt(_0x7670cd(0xa4))*parseInt(_0x7670cd(0xca))+parseInt(_0x7670cd(0xb9))*parseInt(_0x7670cd(0x99))+parseInt(_0x7670cd(0x98))*-parseInt(_0x7670cd(0xd0))+-parseInt(_0x7670cd(0xa6))*parseInt(_0x7670cd(0xa5));if(_0x4132e9===_0x34184e)break;else _0x2c6565['push'](_0x2c6565['shift']());}catch(_0x1ccd94){_0x2c6565['push'](_0x2c6565['shift']());}}}(a19_0x594d,0xeddcc));import*as a19_0x1fa5c9 from'../Math/math.js';import*as a19_0x1d86bc from'../Math/float2.js';import*as a19_0x1ec0e3 from'../Math/float3.js';import*as a19_0xe3cc6b from'../Math/matrix.js';import*as a19_0xa8cecb from'../Math/box.js';import*as a19_0x4309cd from'./Camera.js';export const eZoom=0x0;export const ePan=0x1;export const eRotPos=0x2;export const eRotDir=0x3;export function make(){const _0x49b17b=a19_0x8d9c;let _0x10d9b0={'fSensZoomP':0x1,'fSensZoomO':0x2,'fSensPanP':0x1,'fSensPanO':0x1,'fSensMoveZ':0x1,'fSensRoll':0x1,'fSensRot':0x3,'eLockAxis':a19_0x1fa5c9[_0x49b17b(0xb6)],'bDragging':![],'eControl':eZoom,'vDragPoint':a19_0x1d86bc[_0x49b17b(0xa7)](0x0,0x0),'bInvertRot':![],'boudnsScene':a19_0xa8cecb[_0x49b17b(0x96)](),'camera':null};return _0x10d9b0;}export function setControl(_0x2e23fd,_0x58e601){const _0x251867=a19_0x8d9c;(_0x58e601<eZoom||_0x58e601>eRotDir)&&(_0x2e23fd['eControl']=eRotPos),_0x2e23fd[_0x251867(0xb8)]=_0x58e601;}export function beginDrag(_0x805d0d,_0x46a572,_0x42eae1,_0x2eac76){const _0x25a616=a19_0x8d9c;_0x805d0d[_0x25a616(0xcf)]=!![],_0x805d0d['camera']=_0x46a572,_0x805d0d[_0x25a616(0xba)]!=null?_0x805d0d['bInvertRot']=a19_0x1ec0e3[_0x25a616(0xc3)](_0x46a572[_0x25a616(0xc6)]['vUp'],a19_0x1ec0e3[_0x25a616(0xc8)](_0x805d0d[_0x25a616(0xba)]))<0x0:_0x805d0d[_0x25a616(0xaf)]=![],a19_0x1d86bc[_0x25a616(0xad)](_0x805d0d[_0x25a616(0xb2)],_0x42eae1),_0x2eac76!=null&&a19_0xa8cecb[_0x25a616(0xad)](_0x805d0d[_0x25a616(0xc9)],_0x2eac76);}export function endDrag(_0x17f039){const _0x448e5b=a19_0x8d9c;_0x17f039[_0x448e5b(0xcf)]=![],_0x17f039[_0x448e5b(0xcb)]=null;}function a19_0x8d9c(_0x203b35,_0x201223){_0x203b35=_0x203b35-0x95;let _0x594db5=a19_0x594d[_0x203b35];return _0x594db5;}export function drag(_0x10dcdc,_0x47eb58){const _0x3c51b9=a19_0x8d9c;if(_0x10dcdc['bDragging']){let _0x3a3d22=a19_0x1d86bc['sub'](null,_0x10dcdc[_0x3c51b9(0xb2)],_0x47eb58);a19_0x1d86bc[_0x3c51b9(0xad)](_0x10dcdc[_0x3c51b9(0xb2)],_0x47eb58);if(_0x10dcdc['eControl']==eZoom)zoom(_0x10dcdc,_0x10dcdc[_0x3c51b9(0xcb)],_0x3a3d22);else{if(_0x10dcdc[_0x3c51b9(0xb8)]==ePan)pan(_0x10dcdc,_0x10dcdc['camera'],_0x3a3d22);else{if(_0x10dcdc[_0x3c51b9(0xb8)]==eRotPos)rotPos(_0x10dcdc,_0x10dcdc[_0x3c51b9(0xcb)],_0x3a3d22);else _0x10dcdc[_0x3c51b9(0xb8)]==eRotDir&&rotDir(_0x10dcdc,_0x10dcdc['camera'],_0x3a3d22);}}}}export function zoomWithMouseWheel(_0x18c574,_0x1ca341,_0x22399e,_0x10868d=0.05){const _0x2827f7=a19_0x8d9c;zoom(_0x18c574,_0x1ca341,a19_0x1d86bc[_0x2827f7(0xa7)](0x0,a19_0x1fa5c9[_0x2827f7(0xc1)](_0x22399e)*_0x1ca341['viewport'][_0x2827f7(0x9c)]*_0x10868d));}export function zoomWithTouch(_0x5a99c4,_0x7aefbb,_0x4320a5,_0x1c1bbe=0.05){const _0x5276bd=a19_0x8d9c;zoom(_0x5a99c4,_0x7aefbb,a19_0x1d86bc[_0x5276bd(0xa7)](0x0,a19_0x1fa5c9['sign'](_0x4320a5)*_0x7aefbb[_0x5276bd(0xcd)][_0x5276bd(0x9c)]*_0x1c1bbe));}export function zoom(_0xfcbe32,_0x491d61,_0x5e347c){const _0x194071=a19_0x8d9c;let _0x4a63ac=a19_0x4309cd[_0x194071(0xc7)](null,_0x491d61,_0x5e347c);if(_0x491d61[_0x194071(0xc6)][_0x194071(0x9e)]==a19_0x4309cd['ePerspective']){const _0x1cf87d=_0x491d61[_0x194071(0xc6)][_0x194071(0xa0)],_0x1880fc=_0x491d61[_0x194071(0xc6)][_0x194071(0xab)];let _0x151969=a19_0x1ec0e3['distance'](_0x1cf87d,_0x1880fc),_0x5bdbfd=(_0x4a63ac[0x0]+_0x4a63ac[0x1])*_0xfcbe32[_0x194071(0xa8)]*_0x151969,_0x47d2d9=_0x151969+_0x5bdbfd,_0x1f9bfc=_0x491d61[_0x194071(0xc6)][_0x194071(0xa9)]*(0x1+0.001);if(_0x47d2d9<_0x1f9bfc){let _0x7a023=a19_0x4309cd[_0x194071(0xb4)](null,_0x491d61,a19_0x1fa5c9[_0x194071(0x9d)]),_0x3662ca;{_0x3662ca=a19_0x1ec0e3[_0x194071(0xc2)](null,_0x7a023,_0x1f9bfc),_0x3662ca=a19_0x1ec0e3[_0x194071(0xb3)](_0x3662ca,_0x3662ca,_0x1880fc);}a19_0x4309cd[_0x194071(0xbf)](_0x491d61,_0x3662ca,null,null);}else{let _0x53569e=a19_0x4309cd[_0x194071(0xb4)](null,_0x491d61,a19_0x1fa5c9[_0x194071(0x9d)]),_0x33e4d4;{_0x33e4d4=a19_0x1ec0e3[_0x194071(0xc2)](null,_0x53569e,_0x5bdbfd),_0x33e4d4=a19_0x1ec0e3[_0x194071(0xb3)](_0x33e4d4,_0x33e4d4,_0x1cf87d);}a19_0x4309cd['setViewParam'](_0x491d61,_0x33e4d4,null,null);}}else{let _0x52c3e3;{_0x52c3e3=a19_0x1ec0e3[_0x194071(0xa7)]((_0x4a63ac[0x0]+_0x4a63ac[0x1])*_0xfcbe32[_0x194071(0xcc)],0x0,0x0),_0x52c3e3=a19_0xe3cc6b[_0x194071(0xaa)](_0x52c3e3,_0x52c3e3,_0x491d61[_0x194071(0x9f)]);}let _0x50a43f=a19_0x1fa5c9['max'](_0x491d61['desc'][_0x194071(0xce)]+_0x52c3e3[0x0],0.001);a19_0x4309cd[_0x194071(0xb0)](_0x491d61,_0x50a43f,null,null,null);}}export function pan(_0x24fae1,_0xaa08ce,_0x19e31b){const _0x2f9af8=a19_0x8d9c;if(_0xaa08ce['desc']['eProjType']==a19_0x4309cd[_0x2f9af8(0xc0)]){let _0x1f7713;{_0x1f7713=a19_0xe3cc6b[_0x2f9af8(0xbe)](null,_0xaa08ce[_0x2f9af8(0xc6)]['vAt'],_0xaa08ce[_0x2f9af8(0xa1)])[0x2],_0x1f7713*=-Math['tan'](0.5*_0xaa08ce[_0x2f9af8(0xc6)][_0x2f9af8(0xc4)]);}let _0x283a3a;{_0x283a3a=a19_0x4309cd['screenToClipV'](null,_0xaa08ce,_0x19e31b),_0x283a3a=a19_0x1d86bc[_0x2f9af8(0xc2)](_0x283a3a,_0x283a3a,_0x1f7713*_0x24fae1[_0x2f9af8(0xb1)]);}let _0x4db8ab;{_0x4db8ab=a19_0x4309cd[_0x2f9af8(0xb4)](null,_0xaa08ce,a19_0x1fa5c9[_0x2f9af8(0x95)]),_0x4db8ab=a19_0x1ec0e3[_0x2f9af8(0xc2)](_0x4db8ab,_0x4db8ab,_0x283a3a[0x0]*_0xaa08ce[_0x2f9af8(0xc6)][_0x2f9af8(0xbd)]);}let _0x517bbc;{_0x517bbc=a19_0x4309cd['viewAxisInWorld'](null,_0xaa08ce,a19_0x1fa5c9['eAxisY']),_0x517bbc=a19_0x1ec0e3['mul'](_0x517bbc,_0x517bbc,_0x283a3a[0x1]);}let _0x5e1bcb=a19_0x1ec0e3['add'](null,_0x4db8ab,_0x517bbc),_0x11d98f=a19_0x1ec0e3[_0x2f9af8(0xb3)](null,_0xaa08ce['desc']['vEye'],_0x5e1bcb),_0x2e0645=a19_0x1ec0e3['add'](null,_0xaa08ce['desc'][_0x2f9af8(0xab)],_0x5e1bcb);a19_0x4309cd[_0x2f9af8(0xbf)](_0xaa08ce,_0x11d98f,_0x2e0645,null);}else{let _0x488162=-_0xaa08ce[_0x2f9af8(0xc6)][_0x2f9af8(0xce)]/_0xaa08ce[_0x2f9af8(0xcd)][_0x2f9af8(0xce)],_0x2e8489=-_0x488162,_0x78495b=_0x19e31b[0x0]*_0x488162*_0x24fae1[_0x2f9af8(0xac)],_0xdcc572=_0x19e31b[0x1]*_0x2e8489*_0x24fae1['fSensPanO'],_0x521785;{_0x521785=a19_0x4309cd[_0x2f9af8(0xb4)](null,_0xaa08ce,a19_0x1fa5c9[_0x2f9af8(0x95)]),_0x521785=a19_0x1ec0e3[_0x2f9af8(0xc2)](_0x521785,_0x521785,_0x78495b);}let _0x363ab6;{_0x363ab6=a19_0x4309cd['viewAxisInWorld'](null,_0xaa08ce,a19_0x1fa5c9[_0x2f9af8(0xb6)]),_0x363ab6=a19_0x1ec0e3[_0x2f9af8(0xc2)](_0x363ab6,_0x363ab6,_0xdcc572);}let _0x6e4db6=a19_0x1ec0e3[_0x2f9af8(0xb3)](null,_0x521785,_0x363ab6),_0x3054e3=a19_0x1ec0e3['add'](null,_0xaa08ce['desc']['vEye'],_0x6e4db6),_0x6978b0=a19_0x1ec0e3[_0x2f9af8(0xb3)](null,_0xaa08ce['desc'][_0x2f9af8(0xab)],_0x6e4db6);a19_0x4309cd[_0x2f9af8(0xbf)](_0xaa08ce,_0x3054e3,_0x6978b0,null);}}export function rotPos(_0x3ecdc6,_0x5a9395,_0x1cef4b){const _0x17915f=a19_0x8d9c;let _0x3c53b9;{_0x3c53b9=a19_0x1d86bc[_0x17915f(0xc2)](_0x3c53b9,_0x1cef4b,a19_0x1d86bc['from'](0x1,-0x1)),_0x3c53b9=a19_0x4309cd[_0x17915f(0xc7)](_0x3c53b9,_0x5a9395,_0x3c53b9),_0x3ecdc6[_0x17915f(0xaf)]&&(_0x3c53b9[0x0]=-_0x3c53b9[0x0]);}let _0x288314;{if(_0x3ecdc6[_0x17915f(0xba)]==a19_0x1fa5c9[_0x17915f(0x95)])_0x288314=a19_0xe3cc6b[_0x17915f(0xa3)](null,_0x3c53b9[0x1]*_0x3ecdc6[_0x17915f(0xae)]);else{if(_0x3ecdc6[_0x17915f(0xba)]==a19_0x1fa5c9[_0x17915f(0xb6)])_0x288314=a19_0xe3cc6b['rotateY'](null,_0x3c53b9[0x0]*_0x3ecdc6[_0x17915f(0xae)]);else{if(_0x3ecdc6[_0x17915f(0xba)]==a19_0x1fa5c9[_0x17915f(0x9d)])_0x288314=a19_0xe3cc6b['rotateZ'](null,_0x3c53b9[0x0]*_0x3ecdc6[_0x17915f(0xae)]);else{let _0xd8d9d7=a19_0x4309cd[_0x17915f(0xb4)](null,_0x5a9395,a19_0x1fa5c9[_0x17915f(0xb6)]);_0x288314=a19_0xe3cc6b[_0x17915f(0xa2)](null,_0xd8d9d7,_0x3c53b9[0x0]*_0x3ecdc6['fSensRot']);}}}}let _0x1d41a3;{let _0x3ef1d3=a19_0x4309cd[_0x17915f(0xb4)](null,_0x5a9395,a19_0x1fa5c9[_0x17915f(0x95)]);_0x1d41a3=a19_0xe3cc6b[_0x17915f(0xa2)](null,_0x3ef1d3,_0x3c53b9[0x1]*_0x3ecdc6[_0x17915f(0xae)]);}let _0x23d4ca;{_0x23d4ca=a19_0xe3cc6b['translation'](null,a19_0x1ec0e3['negate'](null,_0x5a9395['desc'][_0x17915f(0xab)])),_0x23d4ca=a19_0xe3cc6b[_0x17915f(0xc2)](_0x23d4ca,_0x23d4ca,_0x1d41a3),_0x23d4ca=a19_0xe3cc6b['mul'](_0x23d4ca,_0x23d4ca,_0x288314),_0x23d4ca=a19_0xe3cc6b[_0x17915f(0xc2)](_0x23d4ca,_0x23d4ca,a19_0xe3cc6b[_0x17915f(0xc5)](null,_0x5a9395[_0x17915f(0xc6)][_0x17915f(0xab)]));}let _0x5c2ad1=a19_0xe3cc6b[_0x17915f(0xbe)](null,_0x5a9395['desc'][_0x17915f(0xa0)],_0x23d4ca),_0x415eba;{let _0xbe74ca=a19_0xe3cc6b[_0x17915f(0xc2)](null,_0x1d41a3,_0x288314);_0x415eba=a19_0x4309cd[_0x17915f(0xb4)](null,_0x5a9395,a19_0x1fa5c9[_0x17915f(0xb6)]),_0x415eba=a19_0xe3cc6b[_0x17915f(0xaa)](_0x415eba,_0x415eba,_0xbe74ca);}a19_0x4309cd[_0x17915f(0xbf)](_0x5a9395,_0x5c2ad1,null,_0x415eba);}export function rotDir(_0x413d2f,_0x248ee6,_0x38fcb1){const _0x1c4924=a19_0x8d9c;let _0x4e1ea2;{_0x4e1ea2=a19_0x1d86bc[_0x1c4924(0xc2)](_0x4e1ea2,_0x38fcb1,a19_0x1d86bc[_0x1c4924(0xa7)](-0x1,0x1)),_0x4e1ea2=a19_0x4309cd[_0x1c4924(0xc7)](_0x4e1ea2,_0x248ee6,_0x4e1ea2),_0x4e1ea2=a19_0x1d86bc[_0x1c4924(0xbc)](_0x4e1ea2,_0x4e1ea2),_0x413d2f[_0x1c4924(0xaf)]&&(_0x4e1ea2[0x0]=-_0x4e1ea2[0x0]);}let _0x15aa7d;{if(_0x413d2f[_0x1c4924(0xba)]==a19_0x1fa5c9[_0x1c4924(0x95)])_0x15aa7d=a19_0xe3cc6b['rotateX'](null,_0x4e1ea2[0x0]*_0x413d2f['fSensRot']);else _0x413d2f[_0x1c4924(0xba)]==a19_0x1fa5c9[_0x1c4924(0xb6)]?_0x15aa7d=a19_0xe3cc6b['rotateY'](null,_0x4e1ea2[0x0]*_0x413d2f['fSensRot']):_0x15aa7d=a19_0xe3cc6b[_0x1c4924(0xb7)](null,_0x4e1ea2[0x0]*_0x413d2f['fSensRot']);}let _0x264878;{let _0x3d2289=a19_0x4309cd['viewAxisInWorld'](null,_0x248ee6,a19_0x1fa5c9[_0x1c4924(0x95)]);_0x264878=a19_0xe3cc6b['rotate'](null,_0x3d2289,_0x4e1ea2[0x1]*_0x413d2f[_0x1c4924(0xae)]);}let _0x1444e5;{_0x1444e5=a19_0xe3cc6b[_0x1c4924(0xc5)](null,a19_0x1ec0e3[_0x1c4924(0xbc)](null,_0x248ee6['desc']['vEye'])),_0x1444e5=a19_0xe3cc6b['mul'](_0x1444e5,_0x1444e5,_0x264878),_0x1444e5=a19_0xe3cc6b[_0x1c4924(0xc2)](_0x1444e5,_0x1444e5,_0x15aa7d),_0x1444e5=a19_0xe3cc6b[_0x1c4924(0xc2)](_0x1444e5,_0x1444e5,a19_0xe3cc6b[_0x1c4924(0xc5)](null,_0x248ee6[_0x1c4924(0xc6)][_0x1c4924(0xa0)]));}let _0x49e305=a19_0xe3cc6b[_0x1c4924(0xbe)](null,_0x248ee6[_0x1c4924(0xc6)]['vAt'],_0x1444e5),_0x57b92b;{let _0x15d248=a19_0xe3cc6b[_0x1c4924(0xc2)](null,_0x264878,_0x15aa7d);_0x57b92b=a19_0x4309cd[_0x1c4924(0xb4)](null,_0x248ee6,a19_0x1fa5c9[_0x1c4924(0xb6)]),_0x57b92b=a19_0xe3cc6b[_0x1c4924(0xaa)](_0x57b92b,_0x57b92b,_0x15d248);}a19_0x4309cd[_0x1c4924(0xbf)](_0x248ee6,null,_0x49e305,_0x57b92b);}export function lockUpAxis(_0x19c448,_0x544054){const _0x511396=a19_0x8d9c;_0x544054!=a19_0x1fa5c9[_0x511396(0x95)]&&_0x544054!=a19_0x1fa5c9[_0x511396(0xb6)]&&_0x544054!=a19_0x1fa5c9[_0x511396(0x9d)]?_0x19c448[_0x511396(0xba)]=null:_0x19c448['eLockAxis']=_0x544054;}export function rotate(_0x281c1f,_0x37599d,_0x5b36e6,_0x8f85e9){const _0x23abc6=a19_0x8d9c;_0x281c1f[_0x23abc6(0xcb)]=_0x37599d;if(_0x5b36e6==eZoom)zoom(_0x281c1f,_0x281c1f['camera'],_0x8f85e9);else{if(_0x5b36e6==ePan)pan(_0x281c1f,_0x281c1f[_0x23abc6(0xcb)],_0x8f85e9);else{if(_0x5b36e6==eRotPos)rotPos(_0x281c1f,_0x281c1f[_0x23abc6(0xcb)],_0x8f85e9);else _0x5b36e6==eRotDir&&rotDir(_0x281c1f,_0x281c1f['camera'],_0x8f85e9);}}}