'use strict';const a19_0x3ef8=['3190qYoDhD','bInvertRot','ePerspective','mProjI','422381flYzpM','max','from','rotateX','467mOsldu','assign','make','eLockAxis','vUp','setViewParam','480478OCCMrv','263420AaNKUB','sign','vDragPoint','viewAxisInWorld','rotateZ','fHeight','25203HepJpS','boundsScene','camera','eControl','fSensZoomP','bDragging','transformPoint3','rotate','screenToClipV','941IsPOXg','mul','rotateY','transformVec3','fFOVInRadian','fSensPanO','fNear','vAt','negate','translation','desc','fAspect','sub','297077ABrhxi','fWidth','eAxisZ','eProjType','fSensRot','distance','add','eAxisX','eAxisY','viewport','mView','1EgzNLC','vEye','32QRDJZr'];(function(_0x19dedd,_0x54a9ba){const _0x44fee1=a19_0x528d;while(!![]){try{const _0x3a8031=parseInt(_0x44fee1(0x102))+parseInt(_0x44fee1(0xed))*parseInt(_0x44fee1(0xec))+parseInt(_0x44fee1(0xfb))+-parseInt(_0x44fee1(0x10b))*parseInt(_0x44fee1(0xf5))+-parseInt(_0x44fee1(0xf1))+-parseInt(_0x44fee1(0xfc))*-parseInt(_0x44fee1(0xea))+parseInt(_0x44fee1(0x118));if(_0x3a8031===_0x54a9ba)break;else _0x19dedd['push'](_0x19dedd['shift']());}catch(_0x2e0175){_0x19dedd['push'](_0x19dedd['shift']());}}}(a19_0x3ef8,0x4acfe));import*as a19_0x2098b4 from'../Math/math.js';import*as a19_0x3c29ae from'../Math/float2.js';import*as a19_0xf567fd from'../Math/float3.js';import*as a19_0x1ef87c from'../Math/matrix.js';import*as a19_0x49827c from'../Math/box.js';import*as a19_0x22c307 from'./camera.js';export const eZoom=0x0;export const ePan=0x1;export const eRotPos=0x2;export const eRotDir=0x3;export function make(){const _0x3d8c2d=a19_0x528d;let _0xd952ea={'fSensZoomP':0x1,'fSensZoomO':0x2,'fSensPanP':0x1,'fSensPanO':0x1,'fSensMoveZ':0x1,'fSensRoll':0x1,'fSensRot':0x3,'eLockAxis':a19_0x2098b4[_0x3d8c2d(0x120)],'bDragging':![],'eControl':eZoom,'vDragPoint':a19_0x3c29ae[_0x3d8c2d(0xf3)](0x0,0x0),'bInvertRot':![],'boudnsScene':a19_0x49827c[_0x3d8c2d(0xf7)](),'camera':null};return _0xd952ea;}export function setControl(_0x5a5270,_0x4fbcbd){const _0xba3ee6=a19_0x528d;(_0x4fbcbd<eZoom||_0x4fbcbd>eRotDir)&&(_0x5a5270[_0xba3ee6(0x105)]=eRotPos),_0x5a5270[_0xba3ee6(0x105)]=_0x4fbcbd;}export function beginDrag(_0x11c2ab,_0x1e1f55,_0x564d00,_0xd1f182){const _0x573617=a19_0x528d;_0x11c2ab['bDragging']=!![],_0x11c2ab[_0x573617(0x104)]=_0x1e1f55,_0x11c2ab[_0x573617(0xf8)]!=null?_0x11c2ab[_0x573617(0xee)]=a19_0xf567fd['dot'](_0x1e1f55[_0x573617(0x115)][_0x573617(0xf9)],a19_0xf567fd['makeAxis'](_0x11c2ab[_0x573617(0xf8)]))<0x0:_0x11c2ab[_0x573617(0xee)]=![],a19_0x3c29ae[_0x573617(0xf6)](_0x11c2ab[_0x573617(0xfe)],_0x564d00),_0xd1f182!=null&&a19_0x49827c['assign'](_0x11c2ab[_0x573617(0x103)],_0xd1f182);}export function endDrag(_0x378707){const _0x361df5=a19_0x528d;_0x378707[_0x361df5(0x107)]=![],_0x378707[_0x361df5(0x104)]=null;}export function drag(_0x5da9be,_0x4ea1ac){const _0x3b6978=a19_0x528d;if(_0x5da9be[_0x3b6978(0x107)]){let _0x431c49=a19_0x3c29ae[_0x3b6978(0x117)](null,_0x5da9be['vDragPoint'],_0x4ea1ac);a19_0x3c29ae[_0x3b6978(0xf6)](_0x5da9be['vDragPoint'],_0x4ea1ac);if(_0x5da9be[_0x3b6978(0x105)]==eZoom)zoom(_0x5da9be,_0x5da9be[_0x3b6978(0x104)],_0x431c49);else{if(_0x5da9be[_0x3b6978(0x105)]==ePan)pan(_0x5da9be,_0x5da9be[_0x3b6978(0x104)],_0x431c49);else{if(_0x5da9be['eControl']==eRotPos)rotPos(_0x5da9be,_0x5da9be[_0x3b6978(0x104)],_0x431c49);else _0x5da9be[_0x3b6978(0x105)]==eRotDir&&rotDir(_0x5da9be,_0x5da9be[_0x3b6978(0x104)],_0x431c49);}}}}export function zoomWithMouseWheel(_0x2c0d20,_0xbba79f,_0xae37d,_0x25783a=0.05){const _0x36c560=a19_0x528d;zoom(_0x2c0d20,_0xbba79f,a19_0x3c29ae[_0x36c560(0xf3)](0x0,a19_0x2098b4[_0x36c560(0xfd)](_0xae37d)*_0xbba79f[_0x36c560(0x121)][_0x36c560(0x101)]*_0x25783a));}export function zoomWithTouch(_0x74c34b,_0x118ca0,_0x2b5dc9,_0x4bbfcf=0.05){const _0x4f3304=a19_0x528d;zoom(_0x74c34b,_0x118ca0,a19_0x3c29ae[_0x4f3304(0xf3)](0x0,a19_0x2098b4[_0x4f3304(0xfd)](_0x2b5dc9)*_0x118ca0['viewport'][_0x4f3304(0x101)]*_0x4bbfcf));}function a19_0x528d(_0x5c69a0,_0x12fc5e){_0x5c69a0=_0x5c69a0-0xea;let _0x3ef8fa=a19_0x3ef8[_0x5c69a0];return _0x3ef8fa;}export function zoom(_0x4dc77d,_0x3c5a73,_0x4c4f58){const _0x1e3642=a19_0x528d;let _0x2fbfba=a19_0x22c307[_0x1e3642(0x10a)](null,_0x3c5a73,_0x4c4f58);if(_0x3c5a73[_0x1e3642(0x115)]['eProjType']==a19_0x22c307[_0x1e3642(0xef)]){const _0x3ff096=_0x3c5a73[_0x1e3642(0x115)][_0x1e3642(0xeb)],_0x2469a8=_0x3c5a73[_0x1e3642(0x115)][_0x1e3642(0x112)];let _0x24caa1=a19_0xf567fd[_0x1e3642(0x11d)](_0x3ff096,_0x2469a8),_0x2b6789=(_0x2fbfba[0x0]+_0x2fbfba[0x1])*_0x4dc77d[_0x1e3642(0x106)]*_0x24caa1,_0x5e955a=_0x24caa1+_0x2b6789,_0x12f0ab=_0x3c5a73[_0x1e3642(0x115)][_0x1e3642(0x111)]*(0x1+0.001);if(_0x5e955a<_0x12f0ab){let _0x278d5d=a19_0x22c307[_0x1e3642(0xff)](null,_0x3c5a73,a19_0x2098b4[_0x1e3642(0x11a)]),_0x33c77c;{_0x33c77c=a19_0xf567fd[_0x1e3642(0x10c)](null,_0x278d5d,_0x12f0ab),_0x33c77c=a19_0xf567fd['add'](_0x33c77c,_0x33c77c,_0x2469a8);}a19_0x22c307[_0x1e3642(0xfa)](_0x3c5a73,_0x33c77c,null,null);}else{let _0x4caa70=a19_0x22c307['viewAxisInWorld'](null,_0x3c5a73,a19_0x2098b4['eAxisZ']),_0xe4ef95;{_0xe4ef95=a19_0xf567fd[_0x1e3642(0x10c)](null,_0x4caa70,_0x2b6789),_0xe4ef95=a19_0xf567fd[_0x1e3642(0x11e)](_0xe4ef95,_0xe4ef95,_0x3ff096);}a19_0x22c307[_0x1e3642(0xfa)](_0x3c5a73,_0xe4ef95,null,null);}}else{let _0x2cb81e;{_0x2cb81e=a19_0xf567fd[_0x1e3642(0xf3)]((_0x2fbfba[0x0]+_0x2fbfba[0x1])*_0x4dc77d['fSensZoomO'],0x0,0x0),_0x2cb81e=a19_0x1ef87c[_0x1e3642(0x10e)](_0x2cb81e,_0x2cb81e,_0x3c5a73[_0x1e3642(0xf0)]);}let _0x2988c2=a19_0x2098b4[_0x1e3642(0xf2)](_0x3c5a73[_0x1e3642(0x115)][_0x1e3642(0x119)]+_0x2cb81e[0x0],0.001);a19_0x22c307['setOrthographic'](_0x3c5a73,_0x2988c2,null,null,null);}}export function pan(_0x328606,_0x3887aa,_0x42458e){const _0x3991df=a19_0x528d;if(_0x3887aa[_0x3991df(0x115)][_0x3991df(0x11b)]==a19_0x22c307[_0x3991df(0xef)]){let _0x455fe0;{_0x455fe0=a19_0x1ef87c[_0x3991df(0x108)](null,_0x3887aa[_0x3991df(0x115)][_0x3991df(0x112)],_0x3887aa[_0x3991df(0x122)])[0x2],_0x455fe0*=-Math['tan'](0.5*_0x3887aa[_0x3991df(0x115)][_0x3991df(0x10f)]);}let _0x1c3952;{_0x1c3952=a19_0x22c307[_0x3991df(0x10a)](null,_0x3887aa,_0x42458e),_0x1c3952=a19_0x3c29ae[_0x3991df(0x10c)](_0x1c3952,_0x1c3952,_0x455fe0*_0x328606['fSensPanP']);}let _0x52d719;{_0x52d719=a19_0x22c307[_0x3991df(0xff)](null,_0x3887aa,a19_0x2098b4[_0x3991df(0x11f)]),_0x52d719=a19_0xf567fd['mul'](_0x52d719,_0x52d719,_0x1c3952[0x0]*_0x3887aa['desc'][_0x3991df(0x116)]);}let _0x237aa9;{_0x237aa9=a19_0x22c307['viewAxisInWorld'](null,_0x3887aa,a19_0x2098b4[_0x3991df(0x120)]),_0x237aa9=a19_0xf567fd['mul'](_0x237aa9,_0x237aa9,_0x1c3952[0x1]);}let _0x1289eb=a19_0xf567fd[_0x3991df(0x11e)](null,_0x52d719,_0x237aa9),_0x412f1b=a19_0xf567fd[_0x3991df(0x11e)](null,_0x3887aa[_0x3991df(0x115)]['vEye'],_0x1289eb),_0x14c116=a19_0xf567fd[_0x3991df(0x11e)](null,_0x3887aa['desc'][_0x3991df(0x112)],_0x1289eb);a19_0x22c307[_0x3991df(0xfa)](_0x3887aa,_0x412f1b,_0x14c116,null);}else{let _0x4fe209=-_0x3887aa[_0x3991df(0x115)]['fWidth']/_0x3887aa[_0x3991df(0x121)][_0x3991df(0x119)],_0x4f8a3c=-_0x4fe209,_0x4cf94d=_0x42458e[0x0]*_0x4fe209*_0x328606[_0x3991df(0x110)],_0x117e4c=_0x42458e[0x1]*_0x4f8a3c*_0x328606[_0x3991df(0x110)],_0x3069b2;{_0x3069b2=a19_0x22c307[_0x3991df(0xff)](null,_0x3887aa,a19_0x2098b4['eAxisX']),_0x3069b2=a19_0xf567fd[_0x3991df(0x10c)](_0x3069b2,_0x3069b2,_0x4cf94d);}let _0x534e23;{_0x534e23=a19_0x22c307['viewAxisInWorld'](null,_0x3887aa,a19_0x2098b4[_0x3991df(0x120)]),_0x534e23=a19_0xf567fd['mul'](_0x534e23,_0x534e23,_0x117e4c);}let _0x56504f=a19_0xf567fd[_0x3991df(0x11e)](null,_0x3069b2,_0x534e23),_0x5518de=a19_0xf567fd[_0x3991df(0x11e)](null,_0x3887aa[_0x3991df(0x115)][_0x3991df(0xeb)],_0x56504f),_0x52c21a=a19_0xf567fd['add'](null,_0x3887aa[_0x3991df(0x115)][_0x3991df(0x112)],_0x56504f);a19_0x22c307[_0x3991df(0xfa)](_0x3887aa,_0x5518de,_0x52c21a,null);}}export function rotPos(_0x316a35,_0x2505e9,_0x54e6de){const _0x2add36=a19_0x528d;let _0x2718f2;{_0x2718f2=a19_0x3c29ae[_0x2add36(0x10c)](_0x2718f2,_0x54e6de,a19_0x3c29ae[_0x2add36(0xf3)](0x1,-0x1)),_0x2718f2=a19_0x22c307[_0x2add36(0x10a)](_0x2718f2,_0x2505e9,_0x2718f2),_0x316a35[_0x2add36(0xee)]&&(_0x2718f2[0x0]=-_0x2718f2[0x0]);}let _0xe3dbcf;{if(_0x316a35[_0x2add36(0xf8)]==a19_0x2098b4[_0x2add36(0x11f)])_0xe3dbcf=a19_0x1ef87c['rotateX'](null,_0x2718f2[0x1]*_0x316a35[_0x2add36(0x11c)]);else{if(_0x316a35[_0x2add36(0xf8)]==a19_0x2098b4[_0x2add36(0x120)])_0xe3dbcf=a19_0x1ef87c['rotateY'](null,_0x2718f2[0x0]*_0x316a35[_0x2add36(0x11c)]);else{if(_0x316a35[_0x2add36(0xf8)]==a19_0x2098b4[_0x2add36(0x11a)])_0xe3dbcf=a19_0x1ef87c[_0x2add36(0x100)](null,_0x2718f2[0x0]*_0x316a35[_0x2add36(0x11c)]);else{let _0x220393=a19_0x22c307[_0x2add36(0xff)](null,_0x2505e9,a19_0x2098b4['eAxisY']);_0xe3dbcf=a19_0x1ef87c[_0x2add36(0x109)](null,_0x220393,_0x2718f2[0x0]*_0x316a35[_0x2add36(0x11c)]);}}}}let _0x4d168a;{let _0x2b839f=a19_0x22c307[_0x2add36(0xff)](null,_0x2505e9,a19_0x2098b4[_0x2add36(0x11f)]);_0x4d168a=a19_0x1ef87c[_0x2add36(0x109)](null,_0x2b839f,_0x2718f2[0x1]*_0x316a35[_0x2add36(0x11c)]);}let _0xe7ff5f;{_0xe7ff5f=a19_0x1ef87c[_0x2add36(0x114)](null,a19_0xf567fd[_0x2add36(0x113)](null,_0x2505e9['desc'][_0x2add36(0x112)])),_0xe7ff5f=a19_0x1ef87c[_0x2add36(0x10c)](_0xe7ff5f,_0xe7ff5f,_0x4d168a),_0xe7ff5f=a19_0x1ef87c[_0x2add36(0x10c)](_0xe7ff5f,_0xe7ff5f,_0xe3dbcf),_0xe7ff5f=a19_0x1ef87c[_0x2add36(0x10c)](_0xe7ff5f,_0xe7ff5f,a19_0x1ef87c[_0x2add36(0x114)](null,_0x2505e9[_0x2add36(0x115)][_0x2add36(0x112)]));}let _0x5b1664=a19_0x1ef87c[_0x2add36(0x108)](null,_0x2505e9['desc'][_0x2add36(0xeb)],_0xe7ff5f),_0x22dabc;{let _0x28c95c=a19_0x1ef87c[_0x2add36(0x10c)](null,_0x4d168a,_0xe3dbcf);_0x22dabc=a19_0x22c307[_0x2add36(0xff)](null,_0x2505e9,a19_0x2098b4[_0x2add36(0x120)]),_0x22dabc=a19_0x1ef87c['transformVec3'](_0x22dabc,_0x22dabc,_0x28c95c);}a19_0x22c307[_0x2add36(0xfa)](_0x2505e9,_0x5b1664,null,_0x22dabc);}export function rotDir(_0x3a35b0,_0xac2cc4,_0x4d1652){const _0x32c9bd=a19_0x528d;let _0x11b5a7;{_0x11b5a7=a19_0x3c29ae['mul'](_0x11b5a7,_0x4d1652,a19_0x3c29ae['from'](-0x1,0x1)),_0x11b5a7=a19_0x22c307[_0x32c9bd(0x10a)](_0x11b5a7,_0xac2cc4,_0x11b5a7),_0x11b5a7=a19_0x3c29ae[_0x32c9bd(0x113)](_0x11b5a7,_0x11b5a7),_0x3a35b0[_0x32c9bd(0xee)]&&(_0x11b5a7[0x0]=-_0x11b5a7[0x0]);}let _0x165bce;{if(_0x3a35b0[_0x32c9bd(0xf8)]==a19_0x2098b4[_0x32c9bd(0x11f)])_0x165bce=a19_0x1ef87c[_0x32c9bd(0xf4)](null,_0x11b5a7[0x0]*_0x3a35b0[_0x32c9bd(0x11c)]);else _0x3a35b0[_0x32c9bd(0xf8)]==a19_0x2098b4[_0x32c9bd(0x120)]?_0x165bce=a19_0x1ef87c[_0x32c9bd(0x10d)](null,_0x11b5a7[0x0]*_0x3a35b0[_0x32c9bd(0x11c)]):_0x165bce=a19_0x1ef87c[_0x32c9bd(0x100)](null,_0x11b5a7[0x0]*_0x3a35b0[_0x32c9bd(0x11c)]);}let _0x4a6f0a;{let _0xb9e286=a19_0x22c307['viewAxisInWorld'](null,_0xac2cc4,a19_0x2098b4[_0x32c9bd(0x11f)]);_0x4a6f0a=a19_0x1ef87c[_0x32c9bd(0x109)](null,_0xb9e286,_0x11b5a7[0x1]*_0x3a35b0[_0x32c9bd(0x11c)]);}let _0x4b9202;{_0x4b9202=a19_0x1ef87c[_0x32c9bd(0x114)](null,a19_0xf567fd[_0x32c9bd(0x113)](null,_0xac2cc4['desc'][_0x32c9bd(0xeb)])),_0x4b9202=a19_0x1ef87c[_0x32c9bd(0x10c)](_0x4b9202,_0x4b9202,_0x4a6f0a),_0x4b9202=a19_0x1ef87c[_0x32c9bd(0x10c)](_0x4b9202,_0x4b9202,_0x165bce),_0x4b9202=a19_0x1ef87c[_0x32c9bd(0x10c)](_0x4b9202,_0x4b9202,a19_0x1ef87c[_0x32c9bd(0x114)](null,_0xac2cc4[_0x32c9bd(0x115)][_0x32c9bd(0xeb)]));}let _0x45aa87=a19_0x1ef87c[_0x32c9bd(0x108)](null,_0xac2cc4[_0x32c9bd(0x115)]['vAt'],_0x4b9202),_0x23ab9f;{let _0x33994a=a19_0x1ef87c[_0x32c9bd(0x10c)](null,_0x4a6f0a,_0x165bce);_0x23ab9f=a19_0x22c307[_0x32c9bd(0xff)](null,_0xac2cc4,a19_0x2098b4[_0x32c9bd(0x120)]),_0x23ab9f=a19_0x1ef87c[_0x32c9bd(0x10e)](_0x23ab9f,_0x23ab9f,_0x33994a);}a19_0x22c307[_0x32c9bd(0xfa)](_0xac2cc4,null,_0x45aa87,_0x23ab9f);}export function lockUpAxis(_0x2c4fb7,_0x42fae8){const _0x298c56=a19_0x528d;_0x42fae8!=a19_0x2098b4[_0x298c56(0x11f)]&&_0x42fae8!=a19_0x2098b4['eAxisY']&&_0x42fae8!=a19_0x2098b4[_0x298c56(0x11a)]?_0x2c4fb7[_0x298c56(0xf8)]=null:_0x2c4fb7[_0x298c56(0xf8)]=_0x42fae8;}export function rotate(_0x308ec6,_0x3ec9f5,_0x379b00,_0x48f70a){const _0x56f203=a19_0x528d;_0x308ec6['camera']=_0x3ec9f5;if(_0x379b00==eZoom)zoom(_0x308ec6,_0x308ec6[_0x56f203(0x104)],_0x48f70a);else{if(_0x379b00==ePan)pan(_0x308ec6,_0x308ec6[_0x56f203(0x104)],_0x48f70a);else{if(_0x379b00==eRotPos)rotPos(_0x308ec6,_0x308ec6['camera'],_0x48f70a);else _0x379b00==eRotDir&&rotDir(_0x308ec6,_0x308ec6[_0x56f203(0x104)],_0x48f70a);}}}