'use strict';const a87_0x1d1c=['14701UZBDKW','vAmbient','unpackBGBA','log','_arrTexID','vEmissive','textureSpecular','5ENDTuH','_uMtlID','textureDiffuse','44987GsuiaL','fPower','ambientG','ambientB','createForFloatArray','specularB','ambientR','specularR','textureAmbient','getArrayData','alpha','roughness','vSpecular','emissiveR','diffuseB','diffuseG','diffuseR','saturate','fromCleVec4','texSlicePos','115264jCepuV','textureEmissive','463814DjdzRk','227043xfiFcK','3PCIrOp','4ndAhYG','emissiveG','uploadArrayData','_MtlData','specularG','emissiveB','633934ruMByv','length','478334TkFDbO','2qNNlCq','vDiffuse','sRGBToLinear'];(function(_0x5191b4,_0x40edb7){const _0x1377fa=a87_0x43bc;while(!![]){try{const _0x54d5af=-parseInt(_0x1377fa(0x99))+-parseInt(_0x1377fa(0x90))+parseInt(_0x1377fa(0xa6))*parseInt(_0x1377fa(0xa9))+parseInt(_0x1377fa(0x93))*parseInt(_0x1377fa(0x8e))+-parseInt(_0x1377fa(0x91))+-parseInt(_0x1377fa(0x92))*-parseInt(_0x1377fa(0x9f))+-parseInt(_0x1377fa(0x9b))*-parseInt(_0x1377fa(0x9c));if(_0x54d5af===_0x40edb7)break;else _0x5191b4['push'](_0x5191b4['shift']());}catch(_0x1693f5){_0x5191b4['push'](_0x5191b4['shift']());}}}(a87_0x1d1c,0x585f3));import*as a87_0x4dbada from'../Math/math.js';import*as a87_0x12d34f from'../Math/float4.js';import*as a87_0x1c6f60 from'./comm.js';function a87_0x43bc(_0x53787f,_0x1103fa){_0x53787f=_0x53787f-0x7e;let _0x1d1cdc=a87_0x1d1c[_0x53787f];return _0x1d1cdc;}export function make(_0x51956e,_0x38cf2d){let _0xb0a862={'uPos':0x0,'uIndex':_0x51956e,'cleMaterial':_0x38cf2d,'emissiveR':0x0,'emissiveG':0x0,'emissiveB':0x0,'ambientR':0x1,'ambientG':0x1,'ambientB':0x1,'diffuseR':0x1,'diffuseG':0x1,'diffuseB':0x1,'specularR':0.9,'specularG':0.9,'specularB':0.9,'roughness':0.1,'alpha':0x1,'texSlicePos':0x0};return _0xb0a862;}export function fromCleMaterialIdx(_0x910e6c){const _0x495462=a87_0x43bc;let _0x316782=make(_0x910e6c,null);if(cleIsSystemMaterial(_0x910e6c)){let _0x48ae54=cleGetSystemMaterialPureFlag(_0x910e6c),_0x2754a4=cleGetSystemMaterialColor(_0x910e6c);{_0x2754a4=a87_0x12d34f[_0x495462(0xa1)](null,cleGetSystemMaterialColor(_0x910e6c)),_0x2754a4=a87_0x12d34f[_0x495462(0x9e)](_0x2754a4,_0x2754a4);}_0x316782[_0x495462(0x87)]=_0x48ae54==!![]?_0x2754a4[0x0]:0x0,_0x316782[_0x495462(0x94)]=_0x48ae54==!![]?_0x2754a4[0x1]:0x0,_0x316782[_0x495462(0x98)]=_0x48ae54==!![]?_0x2754a4[0x2]:0x0,_0x316782[_0x495462(0x80)]=_0x48ae54==![]?_0x2754a4[0x0]:0x0,_0x316782[_0x495462(0xab)]=_0x48ae54==![]?_0x2754a4[0x1]:0x0,_0x316782[_0x495462(0xac)]=_0x48ae54==![]?_0x2754a4[0x2]:0x0,_0x316782[_0x495462(0x8a)]=_0x48ae54==![]?_0x2754a4[0x0]:0x0,_0x316782[_0x495462(0x89)]=_0x48ae54==![]?_0x2754a4[0x1]:0x0,_0x316782['diffuseB']=_0x48ae54==![]?_0x2754a4[0x2]:0x0,_0x316782[_0x495462(0x81)]=_0x48ae54==![]?_0x2754a4[0x0]:0x0,_0x316782['specularG']=_0x48ae54==![]?_0x2754a4[0x1]:0x0,_0x316782[_0x495462(0x7f)]=_0x48ae54==![]?_0x2754a4[0x2]:0x0,_0x316782[_0x495462(0x85)]=clePhongPowerToRoughness(0x28*2.55);}return _0x316782;}export function fromCleMaterial(_0x22dd46,_0x414797){const _0x18a4e=a87_0x43bc;let _0x506d2d=make(_0x22dd46[_0x18a4e(0xa7)],_0x22dd46);{const _0x138e0b=_0x22dd46[_0x18a4e(0x96)]['_mtlPhysics'];let _0x4aadd8=a87_0x12d34f['make']();{_0x4aadd8=a87_0x1c6f60[_0x18a4e(0x8c)](_0x4aadd8,_0x138e0b[_0x18a4e(0xa4)]),_0x4aadd8=a87_0x12d34f[_0x18a4e(0x9e)](_0x4aadd8,_0x4aadd8),_0x506d2d[_0x18a4e(0x87)]=_0x4aadd8[0x0],_0x506d2d[_0x18a4e(0x94)]=_0x4aadd8[0x1],_0x506d2d[_0x18a4e(0x98)]=_0x4aadd8[0x2];}{_0x4aadd8=a87_0x1c6f60[_0x18a4e(0x8c)](_0x4aadd8,_0x138e0b[_0x18a4e(0xa0)]),_0x4aadd8=a87_0x12d34f[_0x18a4e(0x9e)](_0x4aadd8,_0x4aadd8),_0x506d2d[_0x18a4e(0x80)]=_0x4aadd8[0x0],_0x506d2d[_0x18a4e(0xab)]=_0x4aadd8[0x1],_0x506d2d[_0x18a4e(0xac)]=_0x4aadd8[0x2];}{_0x4aadd8=a87_0x1c6f60[_0x18a4e(0x8c)](_0x4aadd8,_0x138e0b[_0x18a4e(0x9d)]),_0x4aadd8=a87_0x12d34f[_0x18a4e(0x9e)](_0x4aadd8,_0x4aadd8),_0x506d2d['diffuseR']=_0x4aadd8[0x0],_0x506d2d['diffuseG']=_0x4aadd8[0x1],_0x506d2d[_0x18a4e(0x88)]=_0x4aadd8[0x2];}{_0x4aadd8=a87_0x1c6f60[_0x18a4e(0x8c)](_0x4aadd8,_0x138e0b[_0x18a4e(0x86)]),_0x4aadd8=a87_0x12d34f['sRGBToLinear'](_0x4aadd8,_0x4aadd8),_0x506d2d[_0x18a4e(0x81)]=_0x4aadd8[0x0],_0x506d2d['specularG']=_0x4aadd8[0x1],_0x506d2d[_0x18a4e(0x7f)]=_0x4aadd8[0x2];}_0x506d2d[_0x18a4e(0x85)]=clePhongPowerToRoughness(_0x138e0b[_0x18a4e(0xaa)]*2.55),_0x506d2d[_0x18a4e(0x84)]=_0x138e0b[_0x18a4e(0xa4)]['w'];if(_0x22dd46[_0x18a4e(0x96)]['_arrTexID'][_0x18a4e(0x9a)]>0x0){let _0x312b0e=_0x414797[_0x22dd46[_0x18a4e(0x96)][_0x18a4e(0xa3)][0x0]];_0x312b0e!=null&&(_0x506d2d[_0x18a4e(0x8d)]=_0x312b0e);}}return _0x506d2d;}export function makeView(_0x3e0b7d,_0x29ee8d){const _0x5b8883=a87_0x43bc;let _0x44dcfc={'textureEmissive':Texture2D['createForFloatArray'](_0x3e0b7d,0x4,_0x29ee8d['length']),'textureAmbient':Texture2D[_0x5b8883(0x7e)](_0x3e0b7d,0x4,_0x29ee8d[_0x5b8883(0x9a)]),'textureDiffuse':Texture2D[_0x5b8883(0x7e)](_0x3e0b7d,0x4,_0x29ee8d[_0x5b8883(0x9a)]),'textureSpecular':Texture2D[_0x5b8883(0x7e)](_0x3e0b7d,0x4,_0x29ee8d['length'])};return updateView(_0x44dcfc,_0x29ee8d),_0x44dcfc;}export function updateView(_0x1e5a48,_0x3eb8a6){const _0x29ec64=a87_0x43bc;let _0x42eab=Texture2D[_0x29ec64(0x83)](_0x1e5a48['textureEmissive']),_0xd14cf=Texture2D[_0x29ec64(0x83)](_0x1e5a48[_0x29ec64(0x82)]),_0x3ac17b=Texture2D['getArrayData'](_0x1e5a48[_0x29ec64(0xa8)]),_0x509764=Texture2D[_0x29ec64(0x83)](_0x1e5a48[_0x29ec64(0xa5)]);for(let _0x5374c7=0x0;_0x5374c7<_0x3eb8a6[_0x29ec64(0x9a)];++_0x5374c7){const _0x153387=_0x3eb8a6[_0x5374c7];_0x42eab[_0x5374c7*0x4+0x0]=_0x153387['emissiveR'],_0x42eab[_0x5374c7*0x4+0x1]=_0x153387[_0x29ec64(0x94)],_0x42eab[_0x5374c7*0x4+0x2]=_0x153387[_0x29ec64(0x98)],_0x42eab[_0x5374c7*0x4+0x3]=_0x153387[_0x29ec64(0x84)],_0xd14cf[_0x5374c7*0x4+0x0]=_0x153387[_0x29ec64(0x80)],_0xd14cf[_0x5374c7*0x4+0x1]=_0x153387[_0x29ec64(0xab)],_0xd14cf[_0x5374c7*0x4+0x2]=_0x153387[_0x29ec64(0xac)],_0xd14cf[_0x5374c7*0x4+0x3]=_0x153387[_0x29ec64(0x8d)],_0x3ac17b[_0x5374c7*0x4+0x0]=_0x153387[_0x29ec64(0x8a)],_0x3ac17b[_0x5374c7*0x4+0x1]=_0x153387[_0x29ec64(0x89)],_0x3ac17b[_0x5374c7*0x4+0x2]=_0x153387[_0x29ec64(0x88)],_0x509764[_0x5374c7*0x4+0x0]=_0x153387['specularR'],_0x509764[_0x5374c7*0x4+0x1]=_0x153387[_0x29ec64(0x97)],_0x509764[_0x5374c7*0x4+0x2]=_0x153387[_0x29ec64(0x7f)],_0x509764[_0x5374c7*0x4+0x3]=_0x153387[_0x29ec64(0x85)];}Texture2D[_0x29ec64(0x95)](_0x1e5a48[_0x29ec64(0x8f)]),Texture2D['uploadArrayData'](_0x1e5a48[_0x29ec64(0x82)]),Texture2D[_0x29ec64(0x95)](_0x1e5a48[_0x29ec64(0xa8)]),Texture2D[_0x29ec64(0x95)](_0x1e5a48['textureSpecular']);}export function cleIsSystemMaterial(_0x25e5d9){return _0x25e5d9>=0x64&&_0x25e5d9<=0x81;}export function cleGetSystemMaterialPureFlag(_0x59804e){return _0x59804e>=0x73&&_0x59804e<=0x81;}export function cleGetSystemMaterialColor(_0x6bceeb){if(_0x6bceeb==0x64||_0x6bceeb==0x73)return 0xffff0000;if(_0x6bceeb==0x65||_0x6bceeb==0x74)return 0xff00ff00;if(_0x6bceeb==0x66||_0x6bceeb==0x75)return 0xff0000ff;if(_0x6bceeb==0x67||_0x6bceeb==0x76)return 0xffffff00;if(_0x6bceeb==0x68||_0x6bceeb==0x77)return 0xffff00ff;if(_0x6bceeb==0x69||_0x6bceeb==0x78)return 0xff00ffff;if(_0x6bceeb==0x6a||_0x6bceeb==0x79)return 0xff000000;if(_0x6bceeb==0x6b||_0x6bceeb==0x7a)return 0xffffffff;if(_0x6bceeb==0x6c||_0x6bceeb==0x7b)return 0xff7f7f7f;if(_0x6bceeb==0x6d||_0x6bceeb==0x7c)return 0xff7f0000;if(_0x6bceeb==0x6e||_0x6bceeb==0x7d)return 0xff007f00;if(_0x6bceeb==0x6f||_0x6bceeb==0x7e)return 0xff00007f;if(_0x6bceeb==0x70||_0x6bceeb==0x7f)return 0xff7f7f00;if(_0x6bceeb==0x71||_0x6bceeb==0x80)return 0xff7f007f;if(_0x6bceeb==0x72||_0x6bceeb==0x81)return 0xff007f7f;return 0xff000000;}export function clePhongPowerToRoughness(_0x23734e){const _0x14751e=a87_0x43bc;if(_0x23734e<=0x0)return 0x1;const _0x1c3be2=Math[_0x14751e(0xa2)](_0x23734e);if(_0x23734e<=0x18)return a87_0x4dbada[_0x14751e(0x8b)](0.773871-0.160132*_0x1c3be2);if(_0x23734e<=0x3c)return a87_0x4dbada[_0x14751e(0x8b)](0.606127-0.105979*_0x1c3be2);return a87_0x4dbada[_0x14751e(0x8b)](0.4008-0.0562807*_0x1c3be2);}