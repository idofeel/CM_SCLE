'use strict';const a87_0x580a=['textureDiffuse','vAmbient','1867743ECbaiS','specularR','emissiveB','_MtlData','roughness','vEmissive','textureSpecular','8858YgIsYE','sRGBToLinear','specularG','1328604HufVjx','169889aXVQkM','createForFloatArray','emissiveG','diffuseB','205213ZlSdbL','diffuseR','4eQloYS','textureAmbient','187387MIuaBq','unpackBGBA','ambientB','4ggHhgj','ambientR','specularB','textureEmissive','376597sHZDxG','_mtlPhysics','diffuseG','saturate','getArrayData','alpha','vDiffuse','texSlicePos','ambientG','length','emissiveR','3gQkWGz','make','fromCleVec4','uploadArrayData','99kPRhsD'];(function(_0x1658a6,_0x126b39){const _0x17c402=a87_0x4b01;while(!![]){try{const _0xb3f1ef=parseInt(_0x17c402(0x180))+-parseInt(_0x17c402(0x175))*parseInt(_0x17c402(0x17c))+parseInt(_0x17c402(0x16d))*parseInt(_0x17c402(0x18f))+-parseInt(_0x17c402(0x177))*parseInt(_0x17c402(0x179))+-parseInt(_0x17c402(0x18b))*-parseInt(_0x17c402(0x171))+-parseInt(_0x17c402(0x170))+parseInt(_0x17c402(0x192));if(_0xb3f1ef===_0x126b39)break;else _0x1658a6['push'](_0x1658a6['shift']());}catch(_0xcf171){_0x1658a6['push'](_0x1658a6['shift']());}}}(a87_0x580a,0xb2b29));import*as a87_0x483ad8 from'../Math/math.js';import*as a87_0x5947dc from'../Math/float4.js';import*as a87_0x34ce24 from'./comm.js';function a87_0x4b01(_0x455ce8,_0x3ed546){_0x455ce8=_0x455ce8-0x16a;let _0x580a6e=a87_0x580a[_0x455ce8];return _0x580a6e;}export function make(_0x22cc29,_0xa506f4){let _0x3968aa={'uPos':0x0,'uIndex':_0x22cc29,'cleMaterial':_0xa506f4,'emissiveR':0x0,'emissiveG':0x0,'emissiveB':0x0,'ambientR':0x1,'ambientG':0x1,'ambientB':0x1,'diffuseR':0x1,'diffuseG':0x1,'diffuseB':0x1,'specularR':0.9,'specularG':0.9,'specularB':0.9,'roughness':0.1,'alpha':0x1,'texSlicePos':0x0};return _0x3968aa;}export function fromCleMaterialIdx(_0x50fd39){const _0x1eab24=a87_0x4b01;let _0xd6ff05=make(_0x50fd39,null);if(cleIsSystemMaterial(_0x50fd39)){let _0x9b27b9=cleGetSystemMaterialPureFlag(_0x50fd39),_0x5e9c71=cleGetSystemMaterialColor(_0x50fd39);{_0x5e9c71=a87_0x5947dc[_0x1eab24(0x17a)](null,cleGetSystemMaterialColor(_0x50fd39)),_0x5e9c71=a87_0x5947dc[_0x1eab24(0x16e)](_0x5e9c71,_0x5e9c71);}_0xd6ff05[_0x1eab24(0x18a)]=_0x9b27b9==!![]?_0x5e9c71[0x0]:0x0,_0xd6ff05[_0x1eab24(0x173)]=_0x9b27b9==!![]?_0x5e9c71[0x1]:0x0,_0xd6ff05[_0x1eab24(0x194)]=_0x9b27b9==!![]?_0x5e9c71[0x2]:0x0,_0xd6ff05[_0x1eab24(0x17d)]=_0x9b27b9==![]?_0x5e9c71[0x0]:0x0,_0xd6ff05['ambientG']=_0x9b27b9==![]?_0x5e9c71[0x1]:0x0,_0xd6ff05[_0x1eab24(0x17b)]=_0x9b27b9==![]?_0x5e9c71[0x2]:0x0,_0xd6ff05['diffuseR']=_0x9b27b9==![]?_0x5e9c71[0x0]:0x0,_0xd6ff05[_0x1eab24(0x182)]=_0x9b27b9==![]?_0x5e9c71[0x1]:0x0,_0xd6ff05[_0x1eab24(0x174)]=_0x9b27b9==![]?_0x5e9c71[0x2]:0x0,_0xd6ff05[_0x1eab24(0x193)]=_0x9b27b9==![]?_0x5e9c71[0x0]:0x0,_0xd6ff05[_0x1eab24(0x16f)]=_0x9b27b9==![]?_0x5e9c71[0x1]:0x0,_0xd6ff05[_0x1eab24(0x17e)]=_0x9b27b9==![]?_0x5e9c71[0x2]:0x0,_0xd6ff05['roughness']=clePhongPowerToRoughness(0x28*2.55);}return _0xd6ff05;}export function fromCleMaterial(_0x18b0aa,_0x2a1dd6){const _0x4b59a5=a87_0x4b01;let _0x1c2e91=make(_0x18b0aa['_uMtlID'],_0x18b0aa);{const _0x28bdc9=_0x18b0aa[_0x4b59a5(0x195)][_0x4b59a5(0x181)];let _0x16cafd=a87_0x5947dc[_0x4b59a5(0x18c)]();{_0x16cafd=a87_0x34ce24[_0x4b59a5(0x18d)](_0x16cafd,_0x28bdc9[_0x4b59a5(0x16b)]),_0x16cafd=a87_0x5947dc[_0x4b59a5(0x16e)](_0x16cafd,_0x16cafd),_0x1c2e91[_0x4b59a5(0x18a)]=_0x16cafd[0x0],_0x1c2e91[_0x4b59a5(0x173)]=_0x16cafd[0x1],_0x1c2e91['emissiveB']=_0x16cafd[0x2];}{_0x16cafd=a87_0x34ce24[_0x4b59a5(0x18d)](_0x16cafd,_0x28bdc9[_0x4b59a5(0x191)]),_0x16cafd=a87_0x5947dc['sRGBToLinear'](_0x16cafd,_0x16cafd),_0x1c2e91[_0x4b59a5(0x17d)]=_0x16cafd[0x0],_0x1c2e91[_0x4b59a5(0x188)]=_0x16cafd[0x1],_0x1c2e91['ambientB']=_0x16cafd[0x2];}{_0x16cafd=a87_0x34ce24[_0x4b59a5(0x18d)](_0x16cafd,_0x28bdc9[_0x4b59a5(0x186)]),_0x16cafd=a87_0x5947dc[_0x4b59a5(0x16e)](_0x16cafd,_0x16cafd),_0x1c2e91[_0x4b59a5(0x176)]=_0x16cafd[0x0],_0x1c2e91[_0x4b59a5(0x182)]=_0x16cafd[0x1],_0x1c2e91[_0x4b59a5(0x174)]=_0x16cafd[0x2];}{_0x16cafd=a87_0x34ce24['fromCleVec4'](_0x16cafd,_0x28bdc9['vSpecular']),_0x16cafd=a87_0x5947dc['sRGBToLinear'](_0x16cafd,_0x16cafd),_0x1c2e91[_0x4b59a5(0x193)]=_0x16cafd[0x0],_0x1c2e91['specularG']=_0x16cafd[0x1],_0x1c2e91['specularB']=_0x16cafd[0x2];}_0x1c2e91[_0x4b59a5(0x16a)]=clePhongPowerToRoughness(_0x28bdc9['fPower']*2.55),_0x1c2e91[_0x4b59a5(0x185)]=_0x28bdc9[_0x4b59a5(0x16b)]['w'];if(_0x18b0aa[_0x4b59a5(0x195)]['_arrTexID'][_0x4b59a5(0x189)]>0x0){let _0x174b4b=_0x2a1dd6[_0x18b0aa[_0x4b59a5(0x195)]['_arrTexID'][0x0]];_0x174b4b!=null&&(_0x1c2e91[_0x4b59a5(0x187)]=_0x174b4b);}}return _0x1c2e91;}export function makeView(_0x47f68f,_0x5e42e8){const _0x223b04=a87_0x4b01;let _0x2564bf={'textureEmissive':Texture2D[_0x223b04(0x172)](_0x47f68f,0x4,_0x5e42e8[_0x223b04(0x189)]),'textureAmbient':Texture2D[_0x223b04(0x172)](_0x47f68f,0x4,_0x5e42e8[_0x223b04(0x189)]),'textureDiffuse':Texture2D[_0x223b04(0x172)](_0x47f68f,0x4,_0x5e42e8['length']),'textureSpecular':Texture2D[_0x223b04(0x172)](_0x47f68f,0x4,_0x5e42e8['length'])};return updateView(_0x2564bf,_0x5e42e8),_0x2564bf;}export function updateView(_0x33fff8,_0x1edcd0){const _0x563f1f=a87_0x4b01;let _0x2fdf15=Texture2D[_0x563f1f(0x184)](_0x33fff8[_0x563f1f(0x17f)]),_0xc427b=Texture2D[_0x563f1f(0x184)](_0x33fff8['textureAmbient']),_0x165f54=Texture2D[_0x563f1f(0x184)](_0x33fff8[_0x563f1f(0x190)]),_0x840c71=Texture2D['getArrayData'](_0x33fff8[_0x563f1f(0x16c)]);for(let _0xe45053=0x0;_0xe45053<_0x1edcd0[_0x563f1f(0x189)];++_0xe45053){const _0x3b81dc=_0x1edcd0[_0xe45053];_0x2fdf15[_0xe45053*0x4+0x0]=_0x3b81dc['emissiveR'],_0x2fdf15[_0xe45053*0x4+0x1]=_0x3b81dc[_0x563f1f(0x173)],_0x2fdf15[_0xe45053*0x4+0x2]=_0x3b81dc[_0x563f1f(0x194)],_0x2fdf15[_0xe45053*0x4+0x3]=_0x3b81dc['alpha'],_0xc427b[_0xe45053*0x4+0x0]=_0x3b81dc[_0x563f1f(0x17d)],_0xc427b[_0xe45053*0x4+0x1]=_0x3b81dc[_0x563f1f(0x188)],_0xc427b[_0xe45053*0x4+0x2]=_0x3b81dc[_0x563f1f(0x17b)],_0xc427b[_0xe45053*0x4+0x3]=_0x3b81dc[_0x563f1f(0x187)],_0x165f54[_0xe45053*0x4+0x0]=_0x3b81dc[_0x563f1f(0x176)],_0x165f54[_0xe45053*0x4+0x1]=_0x3b81dc['diffuseG'],_0x165f54[_0xe45053*0x4+0x2]=_0x3b81dc['diffuseB'],_0x840c71[_0xe45053*0x4+0x0]=_0x3b81dc[_0x563f1f(0x193)],_0x840c71[_0xe45053*0x4+0x1]=_0x3b81dc[_0x563f1f(0x16f)],_0x840c71[_0xe45053*0x4+0x2]=_0x3b81dc[_0x563f1f(0x17e)],_0x840c71[_0xe45053*0x4+0x3]=_0x3b81dc['roughness'];}Texture2D[_0x563f1f(0x18e)](_0x33fff8['textureEmissive']),Texture2D[_0x563f1f(0x18e)](_0x33fff8[_0x563f1f(0x178)]),Texture2D['uploadArrayData'](_0x33fff8[_0x563f1f(0x190)]),Texture2D[_0x563f1f(0x18e)](_0x33fff8['textureSpecular']);}export function cleIsSystemMaterial(_0x2d59f9){return _0x2d59f9>=0x64&&_0x2d59f9<=0x81;}export function cleGetSystemMaterialPureFlag(_0xf3b89f){return _0xf3b89f>=0x73&&_0xf3b89f<=0x81;}export function cleGetSystemMaterialColor(_0x229362){if(_0x229362==0x64||_0x229362==0x73)return 0xffff0000;if(_0x229362==0x65||_0x229362==0x74)return 0xff00ff00;if(_0x229362==0x66||_0x229362==0x75)return 0xff0000ff;if(_0x229362==0x67||_0x229362==0x76)return 0xffffff00;if(_0x229362==0x68||_0x229362==0x77)return 0xffff00ff;if(_0x229362==0x69||_0x229362==0x78)return 0xff00ffff;if(_0x229362==0x6a||_0x229362==0x79)return 0xff000000;if(_0x229362==0x6b||_0x229362==0x7a)return 0xffffffff;if(_0x229362==0x6c||_0x229362==0x7b)return 0xff7f7f7f;if(_0x229362==0x6d||_0x229362==0x7c)return 0xff7f0000;if(_0x229362==0x6e||_0x229362==0x7d)return 0xff007f00;if(_0x229362==0x6f||_0x229362==0x7e)return 0xff00007f;if(_0x229362==0x70||_0x229362==0x7f)return 0xff7f7f00;if(_0x229362==0x71||_0x229362==0x80)return 0xff7f007f;if(_0x229362==0x72||_0x229362==0x81)return 0xff007f7f;return 0xff000000;}export function clePhongPowerToRoughness(_0x8759d1){const _0x127126=a87_0x4b01;if(_0x8759d1<=0x0)return 0x1;const _0x5efbda=Math['log'](_0x8759d1);if(_0x8759d1<=0x18)return a87_0x483ad8[_0x127126(0x183)](0.773871-0.160132*_0x5efbda);if(_0x8759d1<=0x3c)return a87_0x483ad8['saturate'](0.606127-0.105979*_0x5efbda);return a87_0x483ad8[_0x127126(0x183)](0.4008-0.0562807*_0x5efbda);}